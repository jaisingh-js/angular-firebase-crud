"use strict";(self.webpackChunkangular_firebase_crud=self.webpackChunkangular_firebase_crud||[]).push([[179],{2011:(it,we,P)=>{P.d(we,{Dh:()=>ce,GT:()=>se,cc:()=>Ie,hO:()=>ke,on:()=>U,pX:()=>ie,xv:()=>ue});var f=P(4650),Q=P(9260),O=P(2122);it=P.hmd(it);const re=["ngOnDestroy"],ie=(De,Ee,Oe,Ae={})=>new Proxy(De,{get:(ve,Se)=>Oe.runOutsideAngular(()=>{var Ve;if(De[Se])return!(null===(Ve=Ae?.spy)||void 0===Ve)&&Ve.get&&Ae.spy.get(Se,De[Se]),De[Se];if(re.indexOf(Se)>-1)return()=>{};const Re=Ee.toPromise().then(V=>{const ye=V&&V[Se];return"function"==typeof ye?ye.bind(V):ye&&ye.then?ye.then(z=>Oe.run(()=>z)):Oe.run(()=>ye)});return new Proxy(()=>{},{get:(V,ye)=>Re[ye],apply:(V,ye,z)=>Re.then(Z=>{var ne;const ee=Z&&Z(...z);return!(null===(ne=Ae?.spy)||void 0===ne)&&ne.apply&&Ae.spy.apply(Se,z,ee),ee})})})}),se=(De,Ee)=>{Ee.forEach(Oe=>{Object.getOwnPropertyNames(Oe.prototype||Oe).forEach(Ae=>{Object.defineProperty(De.prototype,Ae,Object.getOwnPropertyDescriptor(Oe.prototype||Oe,Ae))})})};class fe{constructor(Ee){return Ee}}const ce=new f.OlP("angularfire2.app.options"),ue=new f.OlP("angularfire2.app.name");function U(De,Ee,Oe){const ve="object"==typeof Oe&&Oe||{};ve.name=ve.name||"string"==typeof Oe&&Oe||"[DEFAULT]";const Ve=Q.Z.apps.filter(Re=>Re&&Re.name===ve.name)[0]||Ee.runOutsideAngular(()=>Q.Z.initializeApp(De,ve));try{JSON.stringify(De)!==JSON.stringify(Ve.options)&&B("error",`${Ve.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(Ve)}const B=(De,...Ee)=>{(0,f.X6Q)()&&typeof console<"u"&&console[De](...Ee)},W={provide:fe,useFactory:U,deps:[ce,f.R0b,[new f.FiY,ue]]};let ke=(()=>{class De{constructor(Oe){Q.Z.registerVersion("angularfire",O.q4.full,"core"),Q.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Q.Z.registerVersion("angular",f.q4F.full,Oe.toString())}static initializeApp(Oe,Ae){return{ngModule:De,providers:[{provide:ce,useValue:Oe},{provide:ue,useValue:Ae}]}}}return De.\u0275fac=function(Oe){return new(Oe||De)(f.LFG(f.Lbi))},De.\u0275mod=f.oAB({type:De}),De.\u0275inj=f.cJS({providers:[W]}),De})();function Ie(De,Ee,Oe,Ae,ve){const[,Se,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Re=>Re[0]===De)||[];if(Se)return function $e(De,Ee){try{return De.toString()===Ee.toString()}catch{return De===Ee}}(ve,Ve)||(de("error",`${Ee} was already initialized on the ${Oe} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:ve,was:Ve})),Se;{const Re=Ae();return globalThis.\u0275AngularfireInstanceCache.push([De,Re,ve]),Re}}const tt=!!it.hot,de=(De,...Ee)=>{(0,f.X6Q)()&&typeof console<"u"&&console[De](...Ee)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(it,we,P)=>{P.d(we,{q4:()=>Ca,iC:()=>Ta,HU:()=>sf,vb:()=>Ui,JM:()=>Vt});var f=P(4650),Q=P(259),O=P(5861),re=P(9681),ie=P(2090),se=P(4859),fe=P(1877),ce=P(8766);const ue="@firebase/installations",U="0.6.0",W=`w:${U}`,ke="FIS_v2",Ee=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Oe(I){return I instanceof ie.ZR&&I.code.includes("request-failed")}function Ae({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ve(I){return{token:I.token,requestStatus:2,expiresIn:Z(I.expiresIn),creationTime:Date.now()}}function Se(I,b){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*(I,b){const F=(yield b.json()).error;return Ee.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Re({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function V(I,{refreshToken:b}){const M=Re(I);return M.append("Authorization",function ne(I){return`${ke} ${I}`}(b)),M}function ye(I){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(I){const b=yield I();return b.status>=500&&b.status<600?I():b})).apply(this,arguments)}function Z(I){return Number(I.replace("s","000"))}function ee(I,b){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:b},{fid:M}){const F=Ae(I),K=Re(I),Y=b.getImmediate({optional:!0});if(Y){const Xe=yield Y.getHeartbeatsHeader();Xe&&K.append("x-firebase-client",Xe)}const Ye={method:"POST",headers:K,body:JSON.stringify({fid:M,authVersion:ke,appId:I.appId,sdkVersion:W})},nt=yield ye(()=>fetch(F,Ye));if(nt.ok){const Xe=yield nt.json();return{fid:Xe.fid||M,registrationStatus:2,refreshToken:Xe.refreshToken,authToken:ve(Xe.authToken)}}throw yield Se("Create Installation",nt)})).apply(this,arguments)}function Ne(I){return new Promise(b=>{setTimeout(b,I)})}const Xt=/^[cdef][\w-]{21}$/;function At(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function Pt(I){return function st(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Xt.test(M)?M:""}catch{return""}}function ct(I){return`${I.appName}!${I.appId}`}const Yt=new Map;function ur(I,b){const M=ct(I);gn(M,b),function Qr(I,b){const M=function Dr(){return!Fr&&"BroadcastChannel"in self&&(Fr=new BroadcastChannel("[Firebase] FID Change"),Fr.onmessage=I=>{gn(I.data.key,I.data.fid)}),Fr}();M&&M.postMessage({key:I,fid:b}),function Cr(){0===Yt.size&&Fr&&(Fr.close(),Fr=null)}()}(M,b)}function gn(I,b){const M=Yt.get(I);if(M)for(const F of M)F(b)}let Fr=null;const hi="firebase-installations-store";let br=null;function Gs(){return br||(br=(0,ce.X3)("firebase-installations-database",1,{upgrade:(I,b)=>{0===b&&I.createObjectStore(hi)}})),br}function an(I,b){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,O.Z)(function*(I,b){const M=ct(I),K=(yield Gs()).transaction(hi,"readwrite"),Y=K.objectStore(hi),be=yield Y.get(M);return yield Y.put(b,M),yield K.done,(!be||be.fid!==b.fid)&&ur(I,b.fid),b})).apply(this,arguments)}function lt(I){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,O.Z)(function*(I){const b=ct(I),F=(yield Gs()).transaction(hi,"readwrite");yield F.objectStore(hi).delete(b),yield F.done})).apply(this,arguments)}function fi(I,b){return vn.apply(this,arguments)}function vn(){return(vn=(0,O.Z)(function*(I,b){const M=ct(I),K=(yield Gs()).transaction(hi,"readwrite"),Y=K.objectStore(hi),be=yield Y.get(M),Ye=b(be);return void 0===Ye?yield Y.delete(M):yield Y.put(Ye,M),yield K.done,Ye&&(!be||be.fid!==Ye.fid)&&ur(I,Ye.fid),Ye})).apply(this,arguments)}function Tr(I){return ms.apply(this,arguments)}function ms(){return(ms=(0,O.Z)(function*(I){let b;const M=yield fi(I.appConfig,F=>{const K=Dt(F),Y=ht(I,K);return b=Y.registrationPromise,Y.installationEntry});return""===M.fid?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}})).apply(this,arguments)}function Dt(I){return cr(I||{fid:At(),registrationStatus:0})}function ht(I,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ee.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function gt(I,b){return Zi.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:Cn(I)}:{installationEntry:b}}function Zi(){return(Zi=(0,O.Z)(function*(I,b){try{const M=yield ee(I,b);return an(I.appConfig,M)}catch(M){throw Oe(M)&&409===M.customData.serverCode?yield lt(I.appConfig):yield an(I.appConfig,{fid:b.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Cn(I){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(I){let b=yield pi(I.appConfig);for(;1===b.registrationStatus;)yield Ne(100),b=yield pi(I.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield Tr(I);return F||M}return b})).apply(this,arguments)}function pi(I){return fi(I,b=>{if(!b)throw Ee.create("installation-not-found");return cr(b)})}function cr(I){return function na(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function nn(I,b){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:b},M){const F=Wt(I,M),K=V(I,M),Y=b.getImmediate({optional:!0});if(Y){const Xe=yield Y.getHeartbeatsHeader();Xe&&K.append("x-firebase-client",Xe)}const Ye={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:W,appId:I.appId}})},nt=yield ye(()=>fetch(F,Ye));if(nt.ok)return ve(yield nt.json());throw yield Se("Generate Auth Token",nt)})).apply(this,arguments)}function Wt(I,{fid:b}){return`${Ae(I)}/${b}/authTokens:generate`}function lr(I){return xi.apply(this,arguments)}function xi(){return(xi=(0,O.Z)(function*(I,b=!1){let M;const F=yield fi(I.appConfig,Y=>{if(!xt(Y))throw Ee.create("not-registered");const be=Y.authToken;if(!b&&j(be))return Y;if(1===be.requestStatus)return M=Ue(I,b),Y;{if(!navigator.onLine)throw Ee.create("app-offline");const Ye=q(Y);return M=vt(I,Ye),Ye}});return M?yield M:F.authToken})).apply(this,arguments)}function Ue(I,b){return _e.apply(this,arguments)}function _e(){return(_e=(0,O.Z)(function*(I,b){let M=yield Ze(I.appConfig);for(;1===M.authToken.requestStatus;)yield Ne(100),M=yield Ze(I.appConfig);const F=M.authToken;return 0===F.requestStatus?lr(I,b):F})).apply(this,arguments)}function Ze(I){return fi(I,b=>{if(!xt(b))throw Ee.create("not-registered");return function pe(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function vt(I,b){return wt.apply(this,arguments)}function wt(){return(wt=(0,O.Z)(function*(I,b){try{const M=yield nn(I,b),F=Object.assign(Object.assign({},b),{authToken:M});return yield an(I.appConfig,F),M}catch(M){if(!Oe(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield an(I.appConfig,F)}else yield lt(I.appConfig);throw M}})).apply(this,arguments)}function xt(I){return void 0!==I&&2===I.registrationStatus}function j(I){return 2===I.requestStatus&&!function L(I){const b=Date.now();return b<I.creationTime||I.creationTime+I.expiresIn<b+36e5}(I)}function q(I){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:b})}function Je(){return(Je=(0,O.Z)(function*(I){const b=I,{installationEntry:M,registrationPromise:F}=yield Tr(b);return F?F.catch(console.error):lr(b).catch(console.error),M.fid})).apply(this,arguments)}function Gt(){return(Gt=(0,O.Z)(function*(I,b=!1){const M=I;return yield wn(M),(yield lr(M,b)).token})).apply(this,arguments)}function wn(I){return ft.apply(this,arguments)}function ft(){return(ft=(0,O.Z)(function*(I){const{registrationPromise:b}=yield Tr(I);b&&(yield b)})).apply(this,arguments)}function Ha(I){return Ee.create("missing-app-config-values",{valueName:I})}const uc="installations",En=I=>{const b=I.getProvider("app").getImmediate(),M=function ia(I){if(!I||!I.options)throw Ha("App Configuration");if(!I.name)throw Ha("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!I.options[M])throw Ha(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,re._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Ll=I=>{const b=I.getProvider("app").getImmediate(),M=(0,re._getProvider)(b,uc).getImmediate();return{getId:()=>function X(I){return Je.apply(this,arguments)}(M),getToken:K=>function Rt(I){return Gt.apply(this,arguments)}(M,K)}};(function cc(){(0,re._registerComponent)(new se.wA(uc,En,"PUBLIC")),(0,re._registerComponent)(new se.wA("installations-internal",Ll,"PRIVATE"))})(),(0,re.registerVersion)(ue,U),(0,re.registerVersion)(ue,U,"esm2017");const sa="@firebase/remote-config",Fn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wo{constructor(b,M,F,K){this.client=b,this.storage=M,this.storageCache=F,this.logger=K}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,K=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${K}.`),K}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(K&&M.isCachedDataFresh(b.cacheMaxAgeMillis,F))return K;b.eTag=K&&K.eTag;const Y=yield M.client.fetch(b),be=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&be.push(M.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(be),Y})()}}function Jr(I=navigator){return I.languages&&I.languages[0]||I.language}class ys{constructor(b,M,F,K,Y,be){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=F,this.projectId=K,this.apiKey=Y,this.appId=be}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),be=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},nt={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:K,app_id:M.appId,language_code:Jr()},Xe={method:"POST",headers:Ye,body:JSON.stringify(nt)},Et=fetch(be,Xe),It=new Promise((gr,mr)=>{b.signal.addEventListener(()=>{const Ss=new Error("The operation was aborted.");Ss.name="AbortError",mr(Ss)})});let pr;try{yield Promise.race([Et,It]),pr=yield Et}catch(gr){let mr="fetch-client-network";throw"AbortError"===gr?.name&&(mr="fetch-timeout"),Fn.create(mr,{originalErrorMessage:gr?.message})}let Tn=pr.status;const Lo=pr.headers.get("ETag")||void 0;let jc,Ts;if(200===pr.status){let gr;try{gr=yield pr.json()}catch(mr){throw Fn.create("fetch-client-parse",{originalErrorMessage:mr?.message})}jc=gr.entries,Ts=gr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ts?Tn=500:"NO_CHANGE"===Ts?Tn=304:("NO_TEMPLATE"===Ts||"EMPTY_CONFIG"===Ts)&&(jc={}),304!==Tn&&200!==Tn)throw Fn.create("fetch-status",{httpStatus:Tn});return{status:Tn,eTag:Lo,config:jc}})()}}class Jp{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:F}){var K=this;return(0,O.Z)(function*(){yield function Rn(I,b){return new Promise((M,F)=>{const K=Math.max(b-Date.now(),0),Y=setTimeout(M,K);I.addEventListener(()=>{clearTimeout(Y),F(Fn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const Y=yield K.client.fetch(b);return yield K.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function rn(I){if(!(I instanceof ie.ZR&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}(Y))throw Y;const be={throttleEndTimeMillis:Date.now()+(0,ie.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(be),K.attemptFetch(b,be)}})()}}class Eo{constructor(b,M,F,K,Y){this.app=b,this._client=M,this._storageCache=F,this._storage=K,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ws(I,b){const M=I.target.error||void 0;return Fn.create(b,{originalErrorMessage:M&&M?.message})}const Sr="app_namespace_store";class gi{constructor(b,M,F,K=function Ur(){return new Promise((I,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{b(Ws(F,"storage-open"))},M.onsuccess=F=>{I(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Sr,{keyPath:"compositeKey"})}}catch(M){b(Fn.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=b,this.appName=M,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,Y)=>{const Ye=F.transaction([Sr],"readonly").objectStore(Sr),nt=M.createCompositeKey(b);try{const Xe=Ye.get(nt);Xe.onerror=Et=>{Y(Ws(Et,"storage-get"))},Xe.onsuccess=Et=>{const It=Et.target.result;K(It?It.value:void 0)}}catch(Xe){Y(Fn.create("storage-get",{originalErrorMessage:Xe?.message}))}})})()}set(b,M){var F=this;return(0,O.Z)(function*(){const K=yield F.openDbPromise;return new Promise((Y,be)=>{const nt=K.transaction([Sr],"readwrite").objectStore(Sr),Xe=F.createCompositeKey(b);try{const Et=nt.put({compositeKey:Xe,value:M});Et.onerror=It=>{be(Ws(It,"storage-set"))},Et.onsuccess=()=>{Y()}}catch(Et){be(Fn.create("storage-set",{originalErrorMessage:Et?.message}))}})})()}delete(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,Y)=>{const Ye=F.transaction([Sr],"readwrite").objectStore(Sr),nt=M.createCompositeKey(b);try{const Xe=Ye.delete(nt);Xe.onerror=Et=>{Y(Ws(Et,"storage-delete"))},Xe.onsuccess=()=>{K()}}catch(Xe){Y(Fn.create("storage-delete",{originalErrorMessage:Xe?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class aa{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const M=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),K=b.storage.getActiveConfig(),Y=yield M;Y&&(b.lastFetchStatus=Y);const be=yield F;be&&(b.lastSuccessfulFetchTimestampMillis=be);const Ye=yield K;Ye&&(b.activeConfig=Ye)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function ua(){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,O.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function mi(){(0,re._registerComponent)(new se.wA("remote-config",function I(b,{instanceIdentifier:M}){const F=b.getProvider("app").getImmediate(),K=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Fn.create("registration-window");if(!(0,ie.hl)())throw Fn.create("indexed-db-unavailable");const{projectId:Y,apiKey:be,appId:Ye}=F.options;if(!Y)throw Fn.create("registration-project-id");if(!be)throw Fn.create("registration-api-key");if(!Ye)throw Fn.create("registration-app-id");const nt=new gi(Ye,F.name,M=M||"firebase"),Xe=new aa(nt),Et=new fe.Yd(sa);Et.logLevel=fe.in.ERROR;const It=new ys(K,re.SDK_VERSION,M,Y,be,Ye),pr=new Jp(It,nt),Tn=new wo(pr,nt,Xe,Et),Lo=new Eo(F,Tn,Xe,nt,Et);return function dn(I){const b=(0,ie.m9)(I);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Lo),Lo},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(sa,"0.4.0"),(0,re.registerVersion)(sa,"0.4.0","esm2017")}();const dc="/firebase-messaging-sw.js",Ji="/firebase-cloud-messaging-push-scope",Ks="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Bl="google.c.a.c_id",zh="google.c.a.c_l",hc="google.c.a.ts",jl="google.c.a.e";var qa=(()=>{return(I=qa||(qa={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",qa;var I})();function yi(I){const b=new Uint8Array(I);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $l(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),K=new Uint8Array(F.length);for(let Y=0;Y<F.length;++Y)K[Y]=F.charCodeAt(Y);return K}const fc="fcm_token_details_db",Ar="fcm_token_object_Store";function Gl(I){return pc.apply(this,arguments)}function pc(){return pc=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(fc))return null;let b=null;return(yield(0,ce.X3)(fc,5,{upgrade:(F=(0,O.Z)(function*(K,Y,be,Ye){var nt;if(Y<2||!K.objectStoreNames.contains(Ar))return;const Xe=Ye.objectStore(Ar),Et=yield Xe.index("fcmSenderId").get(I);if(yield Xe.clear(),Et)if(2===Y){const It=Et;if(!It.auth||!It.p256dh||!It.endpoint)return;b={token:It.fcmToken,createTime:null!==(nt=It.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:yi(It.vapidKey)}}}else if(3===Y){const It=Et;b={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:yi(It.auth),p256dh:yi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:yi(It.vapidKey)}}}else if(4===Y){const It=Et;b={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:yi(It.auth),p256dh:yi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:yi(It.vapidKey)}}}}),function(Y,be,Ye,nt){return F.apply(this,arguments)})})).close(),yield(0,ce.Lj)(fc),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),qh(b)?b:null;var F}),pc.apply(this,arguments)}function qh(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:b}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const vs="firebase-messaging-store";let la=null;function Ys(){return la||(la=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(I,b)=>{0===b&&I.createObjectStore(vs)}})),la}function Wa(I){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,O.Z)(function*(I){const b=Ya(I),F=yield(yield Ys()).transaction(vs).objectStore(vs).get(b);if(F)return F;{const K=yield Gl(I.appConfig.senderId);if(K)return yield Qs(I,K),K}})).apply(this,arguments)}function Qs(I,b){return da.apply(this,arguments)}function da(){return(da=(0,O.Z)(function*(I,b){const M=Ya(I),K=(yield Ys()).transaction(vs,"readwrite");return yield K.objectStore(vs).put(b,M),yield K.done,b})).apply(this,arguments)}function Za(I){return Io.apply(this,arguments)}function Io(){return(Io=(0,O.Z)(function*(I){const b=Ya(I),F=(yield Ys()).transaction(vs,"readwrite");yield F.objectStore(vs).delete(b),yield F.done})).apply(this,arguments)}function Ya({appConfig:I}){return I.appId}const bn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ha(I,b){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,O.Z)(function*(I,b){const M=yield _s(I),F=fa(b),K={method:"POST",headers:M,body:JSON.stringify(F)};let Y;try{Y=yield(yield fetch(Co(I.appConfig),K)).json()}catch(be){throw bn.create("token-subscribe-failed",{errorInfo:be?.toString()})}if(Y.error)throw bn.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw bn.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function Do(I,b){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(I,b){const M=yield _s(I),F=fa(b.subscriptionOptions),K={method:"PATCH",headers:M,body:JSON.stringify(F)};let Y;try{Y=yield(yield fetch(`${Co(I.appConfig)}/${b.token}`,K)).json()}catch(be){throw bn.create("token-update-failed",{errorInfo:be?.toString()})}if(Y.error)throw bn.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw bn.create("token-update-no-token");return Y.token})).apply(this,arguments)}function er(I,b){return ql.apply(this,arguments)}function ql(){return(ql=(0,O.Z)(function*(I,b){const F={method:"DELETE",headers:yield _s(I)};try{const Y=yield(yield fetch(`${Co(I.appConfig)}/${b}`,F)).json();if(Y.error)throw bn.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(K){throw bn.create("token-unsubscribe-failed",{errorInfo:K?.toString()})}})).apply(this,arguments)}function Co({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function _s(I){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,O.Z)(function*({appConfig:I,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function fa({p256dh:I,auth:b,endpoint:M,vapidKey:F}){const K={web:{endpoint:M,auth:b,p256dh:I}};return F!==Ks&&(K.web.applicationPubKey=F),K}const pa=6048e5;function Qa(I){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,O.Z)(function*(I){const b=yield mc(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:b.endpoint,auth:yi(b.getKey("auth")),p256dh:yi(b.getKey("p256dh"))},F=yield Wa(I.firebaseDependencies);if(F){if(eu(F.subscriptionOptions,M))return Date.now()>=F.createTime+pa?Ct(I,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield er(I.firebaseDependencies,F.token)}catch(K){console.warn(K)}return gc(I.firebaseDependencies,M)}return gc(I.firebaseDependencies,M)})).apply(this,arguments)}function ga(I){return ma.apply(this,arguments)}function ma(){return(ma=(0,O.Z)(function*(I){const b=yield Wa(I.firebaseDependencies);b&&(yield er(I.firebaseDependencies,b.token),yield Za(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Ct(I,b){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,O.Z)(function*(I,b){try{const M=yield Do(I.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield Qs(I.firebaseDependencies,F),M}catch(M){throw yield ga(I),M}})).apply(this,arguments)}function gc(I,b){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,O.Z)(function*(I,b){const F={token:yield ha(I,b),createTime:Date.now(),subscriptionOptions:b};return yield Qs(I,F),F.token})).apply(this,arguments)}function mc(I,b){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,O.Z)(function*(I,b){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$l(b)})})).apply(this,arguments)}function eu(I,b){return b.vapidKey===I.vapidKey&&b.endpoint===I.endpoint&&b.auth===I.auth&&b.p256dh===I.p256dh}function On(I){const b={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Kl(I,b){if(!b.notification)return;I.notification={};const M=b.notification.title;M&&(I.notification.title=M);const F=b.notification.body;F&&(I.notification.body=F);const K=b.notification.image;K&&(I.notification.image=K);const Y=b.notification.icon;Y&&(I.notification.icon=Y)}(b,I),function Ce(I,b){!b.data||(I.data=b.data)}(b,I),function Zt(I,b){var M,F,K,Y,be;if(!(b.fcmOptions||null!==(M=b.notification)&&void 0!==M&&M.click_action))return;I.fcmOptions={};const Ye=null!==(K=null===(F=b.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==K?K:null===(Y=b.notification)||void 0===Y?void 0:Y.click_action;Ye&&(I.fcmOptions.link=Ye);const nt=null===(be=b.fcmOptions)||void 0===be?void 0:be.analytics_label;nt&&(I.fcmOptions.analyticsLabel=nt)}(b,I),b}function yc(I){return"object"==typeof I&&!!I&&Bl in I}function Zl(I,b){const M=[];for(let F=0;F<I.length;F++)M.push(I.charAt(F)),F<b.length&&M.push(b.charAt(F));return M.join("")}function bo(I){return bn.create("missing-app-config-values",{valueName:I})}Zl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class tu{constructor(b,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function tr(I){if(!I||!I.options)throw bo("App Configuration Object");if(!I.name)throw bo("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const F of b)if(!M[F])throw bo(F);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:K,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ei(I){return nu.apply(this,arguments)}function nu(){return(nu=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(dc,{scope:Ji}),I.swRegistration.update().catch(()=>{})}catch(b){throw bn.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function To(I,b){return vc.apply(this,arguments)}function vc(){return(vc=(0,O.Z)(function*(I,b){if(!b&&!I.swRegistration&&(yield ei(I)),b||!I.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw bn.create("invalid-sw-registration");I.swRegistration=b}})).apply(this,arguments)}function Yl(I,b){return So.apply(this,arguments)}function So(){return(So=(0,O.Z)(function*(I,b){b?I.vapidKey=b:I.vapidKey||(I.vapidKey=Ks)})).apply(this,arguments)}function ki(){return(ki=(0,O.Z)(function*(I,b){if(!navigator)throw bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw bn.create("permission-blocked");return yield Yl(I,b?.vapidKey),yield To(I,b?.serviceWorkerRegistration),Qa(I)})).apply(this,arguments)}function _c(I,b,M){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,O.Z)(function*(I,b,M){const F=ti(b);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Bl],message_name:M[zh],message_time:M[hc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ti(I){switch(I){case qa.NOTIFICATION_CLICKED:return"notification_open";case qa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wc(){return(wc=(0,O.Z)(function*(I,b){const M=b.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===qa.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(On(M)):I.onMessageHandler.next(On(M)));const F=M.data;yc(F)&&"1"===F[jl]&&(yield _c(I,M.messageType,F))})).apply(this,arguments)}const Ec="@firebase/messaging",Ql=I=>{const b=new tu(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Xp(I,b){return wc.apply(this,arguments)}(b,M)),b},Xs=I=>{const b=I.getProvider("messaging").getImmediate();return{getToken:F=>function In(I,b){return ki.apply(this,arguments)}(b,F)}};function Ic(){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,O.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Jl(){(0,re._registerComponent)(new se.wA("messaging",Ql,"PUBLIC")),(0,re._registerComponent)(new se.wA("messaging-internal",Xs,"PRIVATE")),(0,re.registerVersion)(Ec,"0.12.0"),(0,re.registerVersion)(Ec,"0.12.0","esm2017")}();const Dc="analytics",jr="firebase_id",Ao="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cc="https://www.googletagmanager.com/gtag/js",nr=new fe.Yd("@firebase/analytics");function Zh(I){return Promise.all(I.map(b=>b.catch(M=>M)))}function ng(I,b){const M=document.createElement("script");M.src=`${Cc}?l=${I}&id=${b}`,M.async=!0,document.head.appendChild(M)}function ws(I,b,M,F,K,Y){return ni.apply(this,arguments)}function ni(){return(ni=(0,O.Z)(function*(I,b,M,F,K,Y){const be=F[K];try{if(be)yield b[be];else{const nt=(yield Zh(M)).find(Xe=>Xe.measurementId===K);nt&&(yield b[nt.appId])}}catch(Ye){nr.error(Ye)}I("config",K,Y)})).apply(this,arguments)}function su(I,b,M,F,K){return vi.apply(this,arguments)}function vi(){return(vi=(0,O.Z)(function*(I,b,M,F,K){try{let Y=[];if(K&&K.send_to){let be=K.send_to;Array.isArray(be)||(be=[be]);const Ye=yield Zh(M);for(const nt of be){const Xe=Ye.find(It=>It.measurementId===nt),Et=Xe&&b[Xe.appId];if(!Et){Y=[];break}Y.push(Et)}}0===Y.length&&(Y=Object.values(b)),yield Promise.all(Y),I("event",F,K||{})}catch(Y){nr.error(Y)}})).apply(this,arguments)}function Mo(I){const b=window.document.getElementsByTagName("script");for(const M of Object.values(b))if(M.src&&M.src.includes(Cc)&&M.src.includes(I))return M;return null}const ri=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Sc=new class Fi{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function td(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Es(I){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,O.Z)(function*(I){var b;const{appId:M,apiKey:F}=I,K={method:"GET",headers:td(F)},Y=Ao.replace("{app-id}",M),be=yield fetch(Y,K);if(200!==be.status&&304!==be.status){let Ye="";try{const nt=yield be.json();null!==(b=nt.error)&&void 0!==b&&b.message&&(Ye=nt.error.message)}catch{}throw ri.create("config-fetch-failed",{httpStatus:be.status,responseMessage:Ye})}return be.json()})).apply(this,arguments)}function mn(I){return xo.apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(I,b=Sc,M){const{appId:F,apiKey:K,measurementId:Y}=I.options;if(!F)throw ri.create("no-app-id");if(!K){if(Y)return{measurementId:Y,appId:F};throw ri.create("no-api-key")}const be=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new au;return setTimeout((0,O.Z)(function*(){Ye.abort()}),void 0!==M?M:6e4),Ro({appId:F,apiKey:K,measurementId:Y},be,Ye,b)})).apply(this,arguments)}function Ro(I,b,M){return Is.apply(this,arguments)}function Is(){return(Is=(0,O.Z)(function*(I,{throttleEndTimeMillis:b,backoffCount:M},F,K=Sc){var Y;const{appId:be,measurementId:Ye}=I;try{yield ou(F,b)}catch(nt){if(Ye)return nr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${nt?.message}]`),{appId:be,measurementId:Ye};throw nt}try{const nt=yield Es(I);return K.deleteThrottleMetadata(be),nt}catch(nt){const Xe=nt;if(!nd(Xe)){if(K.deleteThrottleMetadata(be),Ye)return nr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${Xe?.message}]`),{appId:be,measurementId:Ye};throw nt}const Et=503===Number(null===(Y=Xe?.customData)||void 0===Y?void 0:Y.httpStatus)?(0,ie.$s)(M,K.intervalMillis,30):(0,ie.$s)(M,K.intervalMillis),It={throttleEndTimeMillis:Date.now()+Et,backoffCount:M+1};return K.setThrottleMetadata(be,It),nr.debug(`Calling attemptFetch again in ${Et} millis`),Ro(I,It,F,K)}})).apply(this,arguments)}function ou(I,b){return new Promise((M,F)=>{const K=Math.max(b-Date.now(),0),Y=setTimeout(M,K);I.addEventListener(()=>{clearTimeout(Y),F(ri.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function nd(I){if(!(I instanceof ie.ZR&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}class au{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let uu,to;function es(){return(es=(0,O.Z)(function*(I,b,M,F,K){if(K&&K.global)I("event",M,F);else{const Y=yield b;I("event",M,Object.assign(Object.assign({},F),{send_to:Y}))}})).apply(this,arguments)}function Ea(I){to=I}function hu(I){uu=I}function xc(){return rd.apply(this,arguments)}function rd(){return(rd=(0,O.Z)(function*(){if(!(0,ie.hl)())return nr.warn(ri.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(I){return nr.warn(ri.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function Rc(){return(Rc=(0,O.Z)(function*(I,b,M,F,K,Y,be){var Ye;const nt=mn(I);nt.then(Tn=>{M[Tn.measurementId]=Tn.appId,I.options.measurementId&&Tn.measurementId!==I.options.measurementId&&nr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Tn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Tn=>nr.error(Tn)),b.push(nt);const Xe=xc().then(Tn=>{if(Tn)return F.getId()}),[Et,It]=yield Promise.all([nt,Xe]);Mo(Y)||ng(Y,Et.measurementId),to&&(K("consent","default",to),Ea(void 0)),K("js",new Date);const pr=null!==(Ye=be?.config)&&void 0!==Ye?Ye:{};return pr.origin="firebase",pr.update=!0,null!=It&&(pr[jr]=It),K("config",Et.measurementId,pr),uu&&(K("set",uu),hu(void 0)),Et.measurementId})).apply(this,arguments)}class Qh{constructor(b){this.app=b}_delete(){return delete _i[this.app.options.appId],Promise.resolve()}}let _i={},Nc=[];const Ia={};let fu,Li,wi="dataLayer",ii=!1;function kc(I,b,M){!function Pc(){const I=[];if((0,ie.ru)()&&I.push("This is a browser extension environment."),(0,ie.zI)()||I.push("Cookies are not available."),I.length>0){const b=I.map((F,K)=>`(${K+1}) ${F}`).join(" "),M=ri.create("invalid-analytics-context",{errorInfo:b});nr.warn(M.message)}}();const F=I.options.appId;if(!F)throw ri.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw ri.create("no-api-key");nr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_i[F])throw ri.create("already-exists",{id:F});if(!ii){!function Yh(I){let b=[];Array.isArray(window[I])?b=window[I]:window[I]=b}(wi);const{wrappedGtag:Y,gtagCore:be}=function ed(I,b,M,F,K){let Y=function(...be){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(Y=window[K]),window[K]=function bc(I,b,M,F){function Y(){return(Y=(0,O.Z)(function*(be,Ye,nt){try{"event"===be?yield su(I,b,M,Ye,nt):"config"===be?yield ws(I,b,M,F,Ye,nt):"consent"===be?I("consent","update",nt):I("set",Ye)}catch(Xe){nr.error(Xe)}})).apply(this,arguments)}return function K(be,Ye,nt){return Y.apply(this,arguments)}}(Y,I,b,M),{gtagCore:Y,wrappedGtag:window[K]}}(_i,Nc,Ia,wi,"gtag");Li=Y,fu=be,ii=!0}return _i[F]=function ts(I,b,M,F,K,Y,be){return Rc.apply(this,arguments)}(I,Nc,Ia,b,fu,wi,M),new Qh(I)}function sd(){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,O.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const sn="@firebase/analytics";!function ad(){(0,re._registerComponent)(new se.wA(Dc,(b,{options:M})=>kc(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,re._registerComponent)(new se.wA("analytics-internal",function I(b){try{const M=b.getProvider(Dc).getImmediate();return{logEvent:(F,K,Y)=>function tf(I,b,M,F){I=(0,ie.m9)(I),function No(I,b,M,F,K){return es.apply(this,arguments)}(Li,_i[I.app.options.appId],b,M,F).catch(K=>nr.error(K))}(M,F,K,Y)}}catch(M){throw ri.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,re.registerVersion)(sn,"0.9.0"),(0,re.registerVersion)(sn,"0.9.0","esm2017")}();var Lc=P(4408),nf=P(7565);const cd=new class ud extends nf.v{}(class cy extends Lc.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,M,F):(b.flush(this),0)}});var rf=P(4986),Uc=P(8505),fn=P(9468),gu=P(5363);const Ca=new f.GfV("7.5.0"),ld="__angularfire_symbol__analyticsIsSupportedValue",$r="__angularfire_symbol__analyticsIsSupported",Vi="__angularfire_symbol__remoteConfigIsSupportedValue",mu="__angularfire_symbol__remoteConfigIsSupported",ba="__angularfire_symbol__messagingIsSupportedValue",ko="__angularfire_symbol__messagingIsSupported";function Vt(I,b,M){if(b){if(1===b.length)return b[0];const Y=b.filter(be=>be.app===M);if(1===Y.length)return Y[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[$r]||(globalThis[$r]=sd().then(I=>globalThis[ld]=I).catch(()=>globalThis[ld]=!1)),globalThis[ko]||(globalThis[ko]=Ic().then(I=>globalThis[ba]=I).catch(()=>globalThis[ba]=!1)),globalThis[mu]||(globalThis[mu]=ua().then(I=>globalThis[Vi]=I).catch(()=>globalThis[Vi]=!1));const Ui=(I,b)=>{const M=b?[b]:(0,Q.C6)(),F=[];return M.forEach(K=>{K.container.getProvider(I).instances.forEach(be=>{F.includes(be)||F.push(be)})}),F};function Ke(){}class si{constructor(b,M=cd){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,F){const K=this.zone;return this.delegate.schedule(function(be){K.runGuarded(()=>{b.apply(this,[be])})},M,F)}}class oi{constructor(b){this.zone=b,this.task=null}call(b,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ke,{},Ke,Ke)),M.pipe((0,Uc.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sf=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new si(Zone.current)),this.insideAngular=M.run(()=>new si(Zone.current,rf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ai(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Ta(I){return ai(),function Fo(I){return function(M){return(M=M.lift(new oi(I.ngZone))).pipe((0,fn.R)(I.outsideAngular),(0,gu.Q)(I.insideAngular))}}(ai())(I)}},2090:(it,we,P)=>{P.d(we,{$s:()=>Ze,BH:()=>on,G6:()=>Se,L:()=>ce,LL:()=>Yt,Pz:()=>Xt,Sg:()=>At,UG:()=>$e,US:()=>se,ZB:()=>B,ZR:()=>ct,aH:()=>st,b$:()=>De,eu:()=>Re,hl:()=>Ve,jU:()=>tt,m9:()=>xt,ne:()=>ms,pd:()=>vn,r3:()=>gs,ru:()=>de,tV:()=>ue,uI:()=>Ie,vZ:()=>an,w1:()=>Oe,xO:()=>Ki,xb:()=>br,z$:()=>ke,zI:()=>V,zd:()=>fi});const re=function(j){const L=[];let q=0;for(let pe=0;pe<j.length;pe++){let X=j.charCodeAt(pe);X<128?L[q++]=X:X<2048?(L[q++]=X>>6|192,L[q++]=63&X|128):55296==(64512&X)&&pe+1<j.length&&56320==(64512&j.charCodeAt(pe+1))?(X=65536+((1023&X)<<10)+(1023&j.charCodeAt(++pe)),L[q++]=X>>18|240,L[q++]=X>>12&63|128,L[q++]=X>>6&63|128,L[q++]=63&X|128):(L[q++]=X>>12|224,L[q++]=X>>6&63|128,L[q++]=63&X|128)}return L},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,L){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let X=0;X<j.length;X+=3){const Je=j[X],Rt=X+1<j.length,Gt=Rt?j[X+1]:0,wn=X+2<j.length,ft=wn?j[X+2]:0;let $n=(15&Gt)<<2|ft>>6,yo=63&ft;wn||(yo=64,Rt||($n=64)),pe.push(q[Je>>2],q[(3&Je)<<4|Gt>>4],q[$n],q[yo])}return pe.join("")},encodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(j):this.encodeByteArray(re(j),L)},decodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(j):function(j){const L=[];let q=0,pe=0;for(;q<j.length;){const X=j[q++];if(X<128)L[pe++]=String.fromCharCode(X);else if(X>191&&X<224){const Je=j[q++];L[pe++]=String.fromCharCode((31&X)<<6|63&Je)}else if(X>239&&X<365){const wn=((7&X)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;L[pe++]=String.fromCharCode(55296+(wn>>10)),L[pe++]=String.fromCharCode(56320+(1023&wn))}else{const Je=j[q++],Rt=j[q++];L[pe++]=String.fromCharCode((15&X)<<12|(63&Je)<<6|63&Rt)}}return L.join("")}(this.decodeStringToByteArray(j,L))},decodeStringToByteArray(j,L){this.init_();const q=L?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let X=0;X<j.length;){const Je=q[j.charAt(X++)],Gt=X<j.length?q[j.charAt(X)]:0;++X;const ft=X<j.length?q[j.charAt(X)]:64;++X;const Lt=X<j.length?q[j.charAt(X)]:64;if(++X,null==Je||null==Gt||null==ft||null==Lt)throw Error();pe.push(Je<<2|Gt>>4),64!==ft&&(pe.push(Gt<<4&240|ft>>2),64!==Lt&&pe.push(ft<<6&192|Lt))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ce=function(j){return function(j){const L=re(j);return se.encodeByteArray(L,!0)}(j).replace(/\./g,"")},ue=function(j){try{return se.decodeString(j,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function B(j,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return L}for(const q in L)!L.hasOwnProperty(q)||!W(q)||(j[q]=B(j[q],L[q]));return j}function W(j){return"__proto__"!==j}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function $e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function de(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Oe(){const j=ke();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Se(){return!$e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){try{return"object"==typeof indexedDB}catch{return!1}}function Re(){return new Promise((j,L)=>{try{let q=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(pe);X.onsuccess=()=>{X.result.close(),q||self.indexedDB.deleteDatabase(pe),j(!0)},X.onupgradeneeded=()=>{q=!1},X.onerror=()=>{var Je;L((null===(Je=X.error)||void 0===Je?void 0:Je.message)||"")}}catch(q){L(q)}})}function V(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ee=()=>{try{return function ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=j&&ue(j[1]);return L&&JSON.parse(L)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},st=()=>{var j;return null===(j=ee())||void 0===j?void 0:j.config},Xt=j=>{var L;return null===(L=ee())||void 0===L?void 0:L[`_${j}`]};class on{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,q)=>{this.resolve=L,this.reject=q})}wrapCallback(L){return(q,pe)=>{q?this.reject(q):this.resolve(pe),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(q):L(q,pe))}}}function At(j,L){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=L||"demo-project",X=j.iat||0,Je=j.sub||j.user_id;if(!Je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Rt=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:X,exp:X+3600,auth_time:X,sub:Je,user_id:Je,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Rt)),""].join(".")}class ct extends Error{constructor(L,q,pe){super(q),this.code=L,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}}class Yt{constructor(L,q,pe){this.service=L,this.serviceName=q,this.errors=pe}create(L,...q){const pe=q[0]||{},X=`${this.service}/${L}`,Je=this.errors[L],Rt=Je?function ur(j,L){return j.replace(Ir,(q,pe)=>{const X=L[pe];return null!=X?String(X):`<${pe}?>`})}(Je,pe):"Error";return new ct(X,`${this.serviceName}: ${Rt} (${X}).`,pe)}}const Ir=/\{\$([^}]+)}/g;function gs(j,L){return Object.prototype.hasOwnProperty.call(j,L)}function br(j){for(const L in j)if(Object.prototype.hasOwnProperty.call(j,L))return!1;return!0}function an(j,L){if(j===L)return!0;const q=Object.keys(j),pe=Object.keys(L);for(const X of q){if(!pe.includes(X))return!1;const Je=j[X],Rt=L[X];if(Lr(Je)&&Lr(Rt)){if(!an(Je,Rt))return!1}else if(Je!==Rt)return!1}for(const X of pe)if(!q.includes(X))return!1;return!0}function Lr(j){return null!==j&&"object"==typeof j}function Ki(j){const L=[];for(const[q,pe]of Object.entries(j))Array.isArray(pe)?pe.forEach(X=>{L.push(encodeURIComponent(q)+"="+encodeURIComponent(X))}):L.push(encodeURIComponent(q)+"="+encodeURIComponent(pe));return L.length?"&"+L.join("&"):""}function fi(j){const L={};return j.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[X,Je]=pe.split("=");L[decodeURIComponent(X)]=decodeURIComponent(Je)}}),L}function vn(j){const L=j.indexOf("?");if(!L)return"";const q=j.indexOf("#",L);return j.substring(L,q>0?q:void 0)}function ms(j,L){const q=new Dt(j,L);return q.subscribe.bind(q)}class Dt{constructor(L,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{L(this)}).catch(pe=>{this.error(pe)})}next(L){this.forEachObserver(q=>{q.next(L)})}error(L){this.forEachObserver(q=>{q.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,q,pe){let X;if(void 0===L&&void 0===q&&void 0===pe)throw new Error("Missing Observer.");X=function gt(j,L){if("object"!=typeof j||null===j)return!1;for(const q of L)if(q in j&&"function"==typeof j[q])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:q,complete:pe},void 0===X.next&&(X.next=Zi),void 0===X.error&&(X.error=Zi),void 0===X.complete&&(X.complete=Zi);const Je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),Je}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,L)}sendOne(L,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{q(this.observers[L])}catch(pe){typeof console<"u"&&console.error&&console.error(pe)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zi(){}function Ze(j,L=1e3,q=2){const pe=L*Math.pow(q,j),X=Math.round(.5*pe*(Math.random()-.5)*2);return Math.min(144e5,pe+X)}function xt(j){return j&&j._delegate?j._delegate:j}},7487:(it,we,P)=>{var f=P(4650);let Q=null;function O(){return Q}class ie{}const se=new f.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ce(){return(0,f.LFG)(U)}()},providedIn:"platform"}),n})();const ue=new f.OlP("Location Initialized");let U=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){B()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){B()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function W(){return new U((0,f.LFG)(se))}()},providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $e(n){return n&&"?"!==n[0]?"?"+n:n}let tt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(De)},providedIn:"root"}),n})();const de=new f.OlP("appBaseHref");let De=(()=>{class n extends tt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+$e(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+$e(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+$e(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(de,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ee=(()=>{class n extends tt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+$e(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+$e(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(de,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Oe=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ve(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ie(Se(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$e(r))}normalize(t){return n.stripTrailingSlash(function ve(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,Se(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=$e,n.joinWithSlash=ke,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(f.LFG(tt))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ae(){return new Oe((0,f.LFG)(tt))}()},providedIn:"root"}),n})();function Se(n){return n.replace(/\/index.html$/,"")}class Vr{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qi=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Vr(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),xn(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{xn(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function xn(n,e){n.context.$implicit=e.item}let dn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zs("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zs("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class vo{constructor(){this.$implicit=null,this.ngIf=null}}function zs(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let yi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function pc(n){return"server"===n}let vs=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new la((0,f.LFG)(se),window)}),n})();class la{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Wa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ys(this.window.history)||Ys(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ys(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Yh extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ws extends Yh{static makeCurrent(){!function re(n){Q||(Q=n)}(new ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function su(){return ni=ni||document.querySelector("base"),ni?ni.getAttribute("href"):null}();return null==t?null:function bc(n){vi=vi||document.createElement("a"),vi.setAttribute("href",n);const e=vi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ni=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function hr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let vi,ni=null;const ed=new f.OlP("TRANSITION_ID"),_a=[{provide:f.ip1,useFactory:function Mo(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[ed,se,f.zs3],multi:!0}];let Tc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const wa=new f.OlP("EventManagerPlugins");let Fi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(wa),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Sc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let td=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Es=(()=>{class n extends td{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,o.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ac),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ac))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Ac(n){O().remove(n)}const mn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xo=/%COMP%/g;function No(n,e){return e.flat(100).map(t=>t.replace(xo,n))}function es(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ds=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new eo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Mc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new Oo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=No(r.id,r.styles);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Fi),f.LFG(Es),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class eo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mn[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(xr(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xr(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=mn[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=mn[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,es(r)):this.eventManager.addEventListener(e,t,es(r))}}function xr(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Mc extends eo{constructor(e,t,r,o){super(e),this.component=r;const u=No(o+"-"+r.id,r.styles);t.addStyles(u),this.contentAttr=function au(n){return"_ngcontent-%COMP%".replace(xo,n)}(o+"-"+r.id),this.hostAttr=function uu(n){return"_nghost-%COMP%".replace(xo,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Oo extends eo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=No(o.id,o.styles);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let to=(()=>{class n extends Sc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ea=["alt","control","meta","shift"],hu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let rd=(()=>{class n extends Sc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Ea.forEach(C=>{const A=r.indexOf(C);A>-1&&(r.splice(A,1),l+=C+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let o=hu[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Ea.forEach(l=>{l!==o&&(0,xc[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Li=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Ia(){ws.makeCurrent()},multi:!0},{provide:se,useFactory:function Oc(){return(0,f.RDi)(document),document},deps:[]}]),ii=new f.OlP(""),Jh=[{provide:f.rWj,useClass:class ri{addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Pc=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function wi(){return new f.qLn},deps:[]},{provide:wa,useClass:to,multi:!0,deps:[se,f.R0b,f.Lbi]},{provide:wa,useClass:rd,multi:!0,deps:[se]},{provide:Ds,useClass:Ds,deps:[Fi,Es,f.AFp]},{provide:f.FYo,useExisting:Ds},{provide:td,useExisting:Es},{provide:Es,useClass:Es,deps:[se]},{provide:Fi,useClass:Fi,deps:[wa,f.R0b]},{provide:class Qs{},useClass:Tc,deps:[]},[]];let kc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:ed,useExisting:f.AFp},_a]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ii,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Pc,...Jh],imports:[yi,f.hGG]}),n})(),Po=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Cs(){return new Po((0,f.LFG)(se))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Vt=P(8996),Ui=P(7669);function Ke(...n){const e=(0,Ui.yG)(n);return(0,Vt.D)(n,e)}var si=P(7579);class oi extends si.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ai=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ei=P(9751);const{isArray:rs}=Array,{getPrototypeOf:rg,prototype:hd,keys:Ta}=Object;function Fo(n){if(1===n.length){const e=n[0];if(rs(e))return{args:e,keys:null};if(function Bc(n){return n&&"object"==typeof n&&rg(n)===hd}(e)){const t=Ta(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var bs=P(4671),I=P(4004);const{isArray:b}=Array;function F(n){return(0,I.U)(e=>function M(n,e){return b(e)?n(...e):n(e)}(n,e))}function K(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Y=P(5403),be=P(9672);function Ye(...n){const e=(0,Ui.yG)(n),t=(0,Ui.jO)(n),{args:r,keys:o}=Fo(n);if(0===r.length)return(0,Vt.D)([],e);const u=new Ei.y(function nt(n,e,t=bs.y){return r=>{Xe(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let w=0;w<o;w++)Xe(e,()=>{const C=(0,Vt.D)(n[w],e);let A=!1;C.subscribe((0,Y.x)(r,N=>{u[w]=N,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>K(o,l):bs.y));return t?u.pipe(F(t)):u}function Xe(n,e,t){n?(0,be.f)(t,n,e):e()}var Et=P(8189);function pr(...n){return function It(){return(0,Et.J)(1)}()((0,Vt.D)(n,(0,Ui.yG)(n)))}var Tn=P(8421);function Lo(n){return new Ei.y(e=>{(0,Tn.Xf)(n()).subscribe(e)})}var jc=P(9635),Ts=P(576);function gr(n,e){const t=(0,Ts.m)(n)?n:()=>n,r=o=>o.error(t());return new Ei.y(e?o=>e.schedule(r,0,o):r)}var mr=P(515),Ss=P(727),Rr=P(4482);function af(){return(0,Rr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Y.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class uf extends Ei.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ss.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Y.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ss.w0.EMPTY)}return e}refCount(){return af()(this)}}function Qn(n,e){return(0,Rr.e)((t,r)=>{let o=null,u=0,l=!1;const m=()=>l&&!o&&r.complete();t.subscribe((0,Y.x)(r,w=>{o?.unsubscribe();let C=0;const A=u++;(0,Tn.Xf)(n(w,A)).subscribe(o=(0,Y.x)(r,N=>r.next(e?e(w,N,A,C++):N),()=>{o=null,m()}))},()=>{l=!0,m()}))})}function vu(n){return n<=0?()=>mr.E:(0,Rr.e)((e,t)=>{let r=0;e.subscribe((0,Y.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function cf(...n){const e=(0,Ui.yG)(n);return(0,Rr.e)((t,r)=>{(e?pr(n,t,e):pr(n,t)).subscribe(r)})}function Bi(n,e){return(0,Rr.e)((t,r)=>{let o=0;t.subscribe((0,Y.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Hr=P(5577);function no(n){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,Y.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function ly(n=D0){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,Y.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function D0(){return new ai}function is(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bi((o,u)=>n(o,u,r)):bs.y,vu(1),t?no(e):ly(()=>new ai))}function _u(n,e){return(0,Ts.m)(e)?(0,Hr.z)(n,e,1):(0,Hr.z)(n,1)}var Gr=P(8505);function Sa(n){return(0,Rr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Y.x)(t,void 0,void 0,l=>{u=(0,Tn.Xf)(n(l,Sa(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function C0(n,e,t,r,o){return(u,l)=>{let m=t,w=e,C=0;u.subscribe((0,Y.x)(l,A=>{const N=C++;w=m?n(w,A,N):(m=!0,A),r&&l.next(w)},o&&(()=>{m&&l.next(w),l.complete()})))}}function fd(n,e){return(0,Rr.e)(C0(n,e,arguments.length>=2,!0))}function $c(n){return n<=0?()=>mr.E:(0,Rr.e)((e,t)=>{let r=[];e.subscribe((0,Y.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function lf(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bi((o,u)=>n(o,u,r)):bs.y,$c(1),t?no(e):ly(()=>new ai))}function pd(n){return(0,Rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const $t="primary",zr=Symbol("RouteTitle");class dy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function wu(n){return new dy(n)}function hy(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ui(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!og(n[o],e[o]))return!1;return!0}function og(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function gd(n){return Array.prototype.concat.apply([],n)}function ag(n){return n.length>0?n[n.length-1]:null}function yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function As(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Vt.D)(Promise.resolve(n)):Ke(n)}const vr=!1,md={exact:function Eu(n,e,t){if(!ro(n.segments,e.segments)||!Hc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Eu(n.children[r],e.children[r],t))return!1;return!0},subset:hf},yd={exact:function Nr(n,e){return ui(n,e)},subset:function cg(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>og(n[t],e[t]))},ignored:()=>!0};function vd(n,e,t){return md[t.paths](n.root,e.root,t.matrixParams)&&yd[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function hf(n,e,t){return ff(n,e,e.segments,t)}function ff(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ro(o,t)||e.hasChildren()||!Hc(o,t,r))}if(n.segments.length===t.length){if(!ro(n.segments,t)||!Hc(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!hf(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ro(n.segments,o)&&Hc(n.segments,o,r)&&n.children[$t])&&ff(n.children[$t],e,u,r)}}function Hc(n,e,t){return e.every((r,o)=>yd[t](n[o].parameters,r.parameters))}class Iu{constructor(e=new St([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wu(this.queryParams)),this._queryParamMap}toString(){return py.serialize(this)}}class St{constructor(e,t){this.segments=e,this.children=t,this.parent=null,yr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ms(this)}}class Gc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=wu(this.parameters)),this._parameterMap}toString(){return gf(this)}}function ro(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new zc},providedIn:"root"}),n})();class zc{parse(e){const t=new Kc(e);return new Iu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${qc(e.root,!0)}`,r=function Wc(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Vo(t)}=${Vo(o)}`).join("&"):`${Vo(t)}=${Vo(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function pf(n){return encodeURI(n)}(e.fragment)}`:""}`}}const py=new zc;function Ms(n){return n.segments.map(e=>gf(e)).join("/")}function qc(n,e){if(!n.hasChildren())return Ms(n);if(e){const t=n.children[$t]?qc(n.children[$t],!1):"",r=[];return yr(n.children,(o,u)=>{u!==$t&&r.push(`${u}:${qc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function fy(n,e){let t=[];return yr(n.children,(r,o)=>{o===$t&&(t=t.concat(e(r,o)))}),yr(n.children,(r,o)=>{o!==$t&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===$t?[qc(n.children[$t],!1)]:[`${o}:${qc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[$t]?`${Ms(n)}/${t[0]}`:`${Ms(n)}/(${t.join("//")})`}}function dg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vo(n){return dg(n).replace(/%3B/gi,";")}function _d(n){return dg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function so(n){return decodeURIComponent(n)}function wd(n){return so(n.replace(/\+/g,"%20"))}function gf(n){return`${_d(n.path)}${function hg(n){return Object.keys(n).map(e=>`;${_d(e)}=${_d(n[e])}`).join("")}(n.parameters)}`}const gy=/^[^\/()?;=#]+/;function Ed(n){const e=n.match(gy);return e?e[0]:""}const mf=/^[^=?&#]+/,my=/^[^&#]+/;class Kc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new St([],{}):new St([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[$t]=new St(e,t)),r}parseSegment(){const e=Ed(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,vr);return this.capture(e),new Gc(so(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ed(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Ed(this.remaining);o&&(r=o,this.capture(r))}e[so(t)]=so(r)}parseQueryParam(e){const t=function yf(n){const e=n.match(mf);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function yy(n){const e=n.match(my);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=wd(t),u=wd(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ed(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new f.vHH(4010,vr);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=$t);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[$t]:new St([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,vr)}}function Zc(n){return n.segments.length>0?new St([],{[$t]:n}):n}function Yc(n){const e={};for(const r of Object.keys(n.children)){const u=Yc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function vf(n){if(1===n.numberOfChildren&&n.children[$t]){const e=n.children[$t];return new St(n.segments.concat(e.segments),e.children)}return n}(new St(n.segments,e))}function Uo(n){return n instanceof Iu}function Du(n,e,t,r,o){if(0===t.length)return Qc(e.root,e.root,e.root,r,o);const u=function wf(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new pg(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return yr(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new pg(t,e,r)}(t);return u.toRoot()?Qc(e.root,e.root,new St([],{}),r,o):function l(w){const C=function Xc(n,e,t,r){if(n.isAbsolute)return new Bo(e.root,!0,0);if(-1===r)return new Bo(t,t===e.root,0);return function Dd(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new f.vHH(4005,!1);o=r.segments.length}return new Bo(r,!1,o-u)}(t,r+(Cu(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=C.processChildren?Tu(C.segmentGroup,C.index,u.commands):jo(C.segmentGroup,C.index,u.commands);return Qc(e.root,C.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function Cu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function bu(n){return"object"==typeof n&&null!=n&&n.outlets}function Qc(n,e,t,r,o){let l,u={};r&&yr(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),l=n===e?t:Jc(n,e,t);const m=Zc(Yc(l));return new Iu(m,u,o)}function Jc(n,e,t){const r={};return yr(n.children,(o,u)=>{r[u]=o===e?t:Jc(o,e,t)}),new St(n.segments,r)}class pg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Cu(r[0]))throw new f.vHH(4003,!1);const o=r.find(bu);if(o&&o!==ag(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bo{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function jo(n,e,t){if(n||(n=new St([],{})),0===n.segments.length&&n.hasChildren())return Tu(n,e,t);const r=function qr(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(bu(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!Td(w,C,l))return u;r+=2}else{if(!Td(w,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new St(n.segments.slice(0,r.pathIndex),{});return u.children[$t]=new St(n.segments.slice(r.pathIndex),n.children),Tu(u,0,o)}return r.match&&0===o.length?new St(n.segments,{}):r.match&&!n.hasChildren()?oo(n,e,t):r.match?Tu(n,0,o):oo(n,e,t)}function Tu(n,e,t){if(0===t.length)return new St(n.segments,{});{const r=function Cd(n){return bu(n[0])?n[0].outlets:{[$t]:n}}(t),o={};return yr(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=jo(n.children[l],e,u))}),yr(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new St(n.segments,o)}}function oo(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(bu(u)){const w=bd(u.outlets);return new St(r,w)}if(0===o&&Cu(t[0])){r.push(new Gc(n.segments[e].path,Su(t[0]))),o++;continue}const l=bu(u)?u.outlets[$t]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&Cu(m)?(r.push(new Gc(l,Su(m))),o+=2):(r.push(new Gc(l,{})),o++)}return new St(r,{})}function bd(n){const e={};return yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=oo(new St([],{}),0,t))}),e}function Su(n){const e={};return yr(n,(t,r)=>e[r]=`${t}`),e}function Td(n,e,t){return n==t.path&&ui(e,t.parameters)}class ji{constructor(e,t){this.id=e,this.url=t}}class Ef extends ji{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $o extends ji{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sd extends ji{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xs extends ji{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class If extends ji{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ad extends ji{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Df extends ji{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ma extends ji{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gg extends ji{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ci{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mg{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cf{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bf{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ao{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Au{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let xd=(()=>{class n{createUrlTree(t,r,o,u,l,m){return Du(t||r.root,o,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),yg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(e){return xd.\u0275fac(e)},providedIn:"root"}),n})();class vg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Tf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Tf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=y(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return y(e,this._root).map(t=>t.value)}}function Tf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Tf(n,t);if(r)return r}return null}function y(n,e){if(n===e.value)return[e];for(const t of e.children){const r=y(n,t);if(r.length)return r.unshift(e),r}return[]}class h{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function g(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _ extends vg{constructor(e,t){super(e),this.snapshot=t,ot(this,e)}toString(){return this.snapshot.toString()}}function S(n,e){const t=function R(n,e){const l=new We([],{},{},"",{},$t,e,null,n.root,-1,{});return new mt("",new h(l,[]))}(n,e),r=new oi([new Gc("",{})]),o=new oi({}),u=new oi({}),l=new oi({}),m=new oi(""),w=new H(r,o,l,m,u,$t,e,t.root);return w.snapshot=t.root,new _(new h(w,[]),t)}class H{constructor(e,t,r,o,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,I.U)(C=>C[zr]))??Ke(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,I.U)(e=>wu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,I.U)(e=>wu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function le(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Be(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class We{constructor(e,t,r,o,u,l,m,w,C,A,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=A,this._resolve=N}get title(){return this.data?.[zr]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mt extends vg{constructor(e,t){super(t),this.url=e,ot(this,t)}toString(){return Gn(this._root)}}function ot(n,e){e.value._routerState=n,e.children.forEach(t=>ot(n,t))}function Gn(n){const e=n.children.length>0?` { ${n.children.map(Gn).join(", ")} } `:"";return`${n.value}${e}`}function Ii(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ui(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ui(e.params,t.params)||n.params.next(t.params),function sg(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ui(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ui(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function xu(n,e){const t=ui(n.params,e.params)&&function lg(n,e){return ro(n,e)&&n.every((t,r)=>ui(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||xu(n.parent,e.parent))}function uo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Rs(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return uo(n,r,o);return uo(n,r)})}(n,e,t);return new h(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>uo(n,m)),l}}const r=function Ru(n){return new H(new oi(n.url),new oi(n.params),new oi(n.queryParams),new oi(n.fragment),new oi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>uo(n,u));return new h(r,o)}}const Nu="ngNavigationCancelingError";function Rd(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Uo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Nd(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Nd(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Nu]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Sf(n){return wg(n)&&Uo(n.url)}function wg(n){return n&&n[Nu]}class b0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new co,this.attachRef=null}}let co=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new b0,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ou=!1;let T0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=$t,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(co),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,Ou);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,Ou);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,Ou);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,Ou);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new AS(t,m,o.injector);if(r&&function S0(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(l);this.activated=o.createComponent(C,o.length,w)}else this.activated=o.createComponent(l,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),n})();class AS{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===H?this.route:e===co?this.childContexts:this.parent.get(e,t)}}let Ey=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[T0],encapsulation:2}),n})();function A0(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function by(n){const e=n.children&&n.children.map(by),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=Ey),t}function Ns(n){return n.outlet||$t}function Ty(n,e){const t=n.filter(r=>Ns(r)===e);return t.push(...n.filter(r=>Ns(r)!==e)),t}function Od(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class fD{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ii(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=g(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),yr(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=g(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=g(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=g(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Au(u.value.snapshot))}),e.children.length&&this.forwardEvent(new bf(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Ii(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Ii(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=Od(o.snapshot),w=m?.get(f._Vd)??null;l.attachRef=null,l.route=o,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class M0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Eg{constructor(e,t){this.component=e,this.route=t}}function x0(n,e,t){const r=n._root;return xa(r,e?e._root:null,t,[r.value])}function Af(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function xa(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=g(e);return n.children.forEach(l=>{(function Sy(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function R0(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ro(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ro(n.url,e.url)||!ui(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xu(n,e)||!ui(n.queryParams,e.queryParams);default:return!xu(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new M0(r)):(u.data=l.data,u._resolvedData=l._resolvedData),xa(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Eg(m.outlet.component,l))}else l&&Pd(e,m,o),o.canActivateChecks.push(new M0(r)),xa(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),yr(u,(l,m)=>Pd(l,t.getContext(m),o)),o}function Pd(n,e,t){const r=g(n),o=n.value;yr(r,(u,l)=>{Pd(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Eg(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function kd(n){return"function"==typeof n}function Mf(n){return n instanceof ai||"EmptyError"===n?.name}const xf=Symbol("INITIAL_VALUE");function el(){return Qn(n=>Ye(n.map(e=>e.pipe(vu(1),cf(xf)))).pipe((0,I.U)(e=>{for(const t of e)if(!0!==t){if(t===xf)return xf;if(!1===t||t instanceof Iu)return t}return!0}),Bi(e=>e!==xf),vu(1)))}function Cg(n){return(0,jc.z)((0,Gr.b)(e=>{if(Uo(e))throw Rd(0,e)}),(0,I.U)(e=>!0===e))}const Ry={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ny(n,e,t,r,o){const u=Pu(n,e,t);return u.matched?function vD(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?Ke(o.map(l=>{const m=Af(l,n);return As(function OS(n){return n&&kd(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(el(),Cg()):Ke(!0)}(r=A0(e,r),e,t).pipe((0,I.U)(l=>!0===l?u:{...Ry})):Ke(u)}function Pu(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ry}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||hy)(t,n,e);if(!o)return{...Ry};const u={};yr(o.posParams,(m,w)=>{u[w]=m.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function bg(n,e,t,r){if(t.length>0&&function Oy(n,e,t){return t.some(r=>Rf(n,e,r)&&Ns(r)!==$t)}(n,t,r)){const u=new St(e,function wD(n,e,t,r){const o={};o[$t]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ns(u)!==$t){const l=new St([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[Ns(u)]=l}return o}(n,e,r,new St(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function ED(n,e,t){return t.some(r=>Rf(n,e,r))}(n,t,r)){const u=new St(n.segments,function _D(n,e,t,r,o){const u={};for(const l of r)if(Rf(n,t,l)&&!o[Ns(l)]){const m=new St([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[Ns(l)]=m}return{...o,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new St(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function Rf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function F0(n,e,t,r){return!!(Ns(n)===r||r!==$t&&Rf(e,t,n))&&("**"===n.path||Pu(e,n,t).matched)}function Py(n,e,t){return 0===e.length&&!n.children[t]}const ky=!1;class Tg{constructor(e){this.segmentGroup=e||null}}class Fd{constructor(e){this.urlTree=e}}function Nf(n){return gr(new Tg(n))}function rl(n){return gr(new Fd(n))}class DD{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=bg(this.urlTree.root,[],[],this.config).segmentGroup,t=new St(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,$t).pipe((0,I.U)(u=>this.createUrlTree(Yc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Sa(u=>{if(u instanceof Fd)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Tg?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,$t).pipe((0,I.U)(o=>this.createUrlTree(Yc(o),e.queryParams,e.fragment))).pipe(Sa(o=>{throw o instanceof Tg?this.noMatchError(o):o}))}noMatchError(e){return new f.vHH(4002,ky)}createUrlTree(e,t,r){const o=Zc(e);return new Iu(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,I.U)(u=>new St([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Vt.D)(o).pipe(_u(u=>{const l=r.children[u],m=Ty(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,I.U)(w=>({segment:w,outlet:u})))}),fd((u,l)=>(u[l.outlet]=l.segment,u),{}),lf())}expandSegment(e,t,r,o,u,l){return(0,Vt.D)(r).pipe(_u(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,l).pipe(Sa(C=>{if(C instanceof Tg)return Ke(null);throw C}))),is(m=>!!m),Sa((m,w)=>{if(Mf(m))return Py(t,o,u)?Ke(new St([],{})):Nf(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,l,m){return F0(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):Nf(t):Nf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?rl(u):this.lineralizeSegments(r,u).pipe((0,Hr.z)(l=>{const m=new St(l,{});return this.expandSegment(e,m,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:A}=Pu(t,o,u);if(!m)return Nf(t);const N=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?rl(N):this.lineralizeSegments(o,N).pipe((0,Hr.z)($=>this.expandSegment(e,t,r,$.concat(C),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=A0(r,e),r.loadChildren?(r._loadedRoutes?Ke({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,I.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new St(o,{})))):Ke(new St(o,{}))):Ny(t,r,o,e).pipe(Qn(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,Hr.z)(A=>{const N=A.injector??e,$=A.routes,{segmentGroup:te,slicedSegments:he}=bg(t,m,w,$),Pe=new St(te.segments,te.children);if(0===he.length&&Pe.hasChildren())return this.expandChildren(N,$,Pe).pipe((0,I.U)(Bt=>new St(m,Bt)));if(0===$.length&&0===he.length)return Ke(new St(m,{}));const je=Ns(r)===u;return this.expandSegment(N,Pe,$,he,je?$t:u,!0).pipe((0,I.U)(zt=>new St(m.concat(zt.segments),zt.children)))})):Nf(t)))}getChildConfig(e,t,r){return t.children?Ke({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ke({routes:t._loadedRoutes,injector:t._loadedInjector}):function k0(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?Ke(!0):Ke(o.map(l=>{const m=Af(l,n);return As(function pD(n){return n&&kd(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(el(),Cg())}(e,t,r).pipe((0,Hr.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Gr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function ID(n){return gr(Nd(ky,3))}())):Ke({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Ke(r);if(o.numberOfChildren>1||!o.children[$t])return gr(new f.vHH(4e3,ky));o=o.children[$t]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Iu(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return yr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return yr(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,o)}),new St(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new f.vHH(4001,ky);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class U0{}class Ly{constructor(e,t,r,o,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=bg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,$t).pipe((0,I.U)(t=>{if(null===t)return null;const r=new We([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new h(r,t),u=new mt(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=le(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,Vt.D)(Object.keys(r.children)).pipe(_u(o=>{const u=r.children[o],l=Ty(t,o);return this.processSegmentGroup(e,l,u,o)}),fd((o,u)=>o&&u?(o.push(...u),o):null),function df(n,e=!1){return(0,Rr.e)((t,r)=>{let o=0;t.subscribe((0,Y.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),no(null),lf(),(0,I.U)(o=>{if(null===o)return null;const u=j0(o);return function bD(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,Vt.D)(t).pipe(_u(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),is(l=>!!l),Sa(l=>{if(Mf(l))return Py(r,o,u)?Ke([]):Ke(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!F0(t,r,o,u))return Ke(null);let l;if("**"===t.path){const m=o.length>0?ag(o).parameters:{},w=H0(r)+o.length;l=Ke({snapshot:new We(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,G0(t),Ns(t),t.component??t._loadedComponent??null,t,$0(r),w,z0(t)),consumedSegments:[],remainingSegments:[]})}else l=Ny(r,t,o,e).pipe((0,I.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:A})=>{if(!m)return null;const N=H0(r)+w.length;return{snapshot:new We(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,G0(t),Ns(t),t.component??t._loadedComponent??null,t,$0(r),N,z0(t)),consumedSegments:w,remainingSegments:C}}));return l.pipe(Qn(m=>{if(null===m)return Ke(null);const{snapshot:w,consumedSegments:C,remainingSegments:A}=m;e=t._injector??e;const N=t._loadedInjector??e,$=function Vy(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:te,slicedSegments:he}=bg(r,C,A,$.filter(je=>void 0===je.redirectTo));if(0===he.length&&te.hasChildren())return this.processChildren(N,$,te).pipe((0,I.U)(je=>null===je?null:[new h(w,je)]));if(0===$.length&&0===he.length)return Ke([new h(w,[])]);const Pe=Ns(t)===u;return this.processSegment(N,$,te,he,Pe?$t:u).pipe((0,I.U)(je=>null===je?null:[new h(w,je)]))}))}}function Pf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function j0(n){const e=[],t=new Set;for(const r of n){if(!Pf(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=j0(r.children);e.push(new h(r.value,o))}return e.filter(r=>!t.has(r))}function $0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function H0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function G0(n){return n.data||{}}function z0(n){return n.resolve||{}}function Uy(n){return"string"==typeof n.title||null===n.title}function q0(n){return Qn(e=>{const t=n(e);return t?(0,Vt.D)(t).pipe((0,I.U)(()=>e)):Ke(e)})}const Vd=new f.OlP("ROUTES");let Sg=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ke(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=As(t.loadComponent()).pipe((0,I.U)(K0),(0,Gr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),pd(()=>{this.componentLoaders.delete(t)})),o=new uf(r,()=>new si.x).pipe(af());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ke({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,I.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,A=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=gd(w.get(Vd,[],f.XFs.Self|f.XFs.Optional)));return{routes:C.map(by),injector:w}}),pd(()=>{this.childrenLoaders.delete(r)})),l=new uf(u,()=>new si.x).pipe(af());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return As(t()).pipe((0,I.U)(K0),(0,Hr.z)(o=>o instanceof f.YKP||Array.isArray(o)?Ke(o):(0,Vt.D)(this.compiler.compileModuleAsync(o))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function K0(n){return function MD(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let jy=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new si.x,this.configLoader=(0,f.f3M)(Sg),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(io),this.rootContexts=(0,f.f3M)(co),this.navigationId=0,this.configLoader.onLoadEndListener=o=>this.events.next(new mg(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new ci(o))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new oi({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Bi(r=>0!==r.id),(0,I.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Qn(r=>{let o=!1,u=!1;return Ke(r).pipe((0,Gr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Qn(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||w)&&t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return $y(l.source)&&(t.browserUrlTree=l.extractedUrl),Ke(l).pipe(Qn(A=>{const N=this.transitions?.getValue();return this.events.next(new Ef(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),N!==this.transitions?.getValue()?mr.E:Promise.resolve(A)}),function CD(n,e,t,r){return Qn(o=>function L0(n,e,t,r,o){return new DD(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,I.U)(u=>({...o,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Gr.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function Ld(n,e,t,r,o){return(0,Hr.z)(u=>function Fy(n,e,t,r,o,u,l="emptyOnly"){return new Ly(n,e,t,r,o,l,u).recognize().pipe(Qn(m=>null===m?function B0(n){return new Ei.y(e=>e.error(n))}(new U0):Ke(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,o).pipe((0,I.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Gr.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const $=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl($,A)}t.browserUrlTree=A.urlAfterRedirects}const N=new If(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(N)}));if(w&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:N,extractedUrl:$,source:te,restoredState:he,extras:Pe}=l,je=new Ef(N,this.urlSerializer.serialize($),te,he);this.events.next(je);const Ht=S($,t.rootComponentType).snapshot;return Ke(r={...l,targetSnapshot:Ht,urlAfterRedirects:$,extras:{...Pe,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=l.rawUrl,l.resolve(null),mr.E}),(0,Gr.b)(l=>{const m=new Ad(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,I.U)(l=>r={...l,guards:x0(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function tl(n,e){return(0,Hr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?Ke({...t,guardsResult:!0}):function mD(n,e,t,r){return(0,Vt.D)(n).pipe((0,Hr.z)(o=>function nl(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Ke(u.map(m=>{const w=Od(e)??o,C=Af(m,w);return As(function Ay(n){return n&&kd(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(is())})).pipe(el()):Ke(!0)}(o.component,o.route,t,e,r)),is(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Hr.z)(m=>m&&function NS(n){return"boolean"==typeof n}(m)?function My(n,e,t,r){return(0,Vt.D)(e).pipe(_u(o=>pr(function yD(n,e){return null!==n&&e&&e(new Cf(n)),Ke(!0)}(o.route.parent,r),function Ig(n,e){return null!==n&&e&&e(new ao(n)),Ke(!0)}(o.route,r),function Dg(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function RS(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Lo(()=>Ke(l.guards.map(w=>{const C=Od(l.node)??t,A=Af(w,C);return As(function O0(n){return n&&kd(n.canActivateChild)}(A)?A.canActivateChild(r,n):C.runInContext(()=>A(r,n))).pipe(is())})).pipe(el())));return Ke(u).pipe(el())}(n,o.path,t),function xy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ke(!0);const o=r.map(u=>Lo(()=>{const l=Od(e)??t,m=Af(u,l);return As(function N0(n){return n&&kd(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(is())}));return Ke(o).pipe(el())}(n,o.route,t))),is(o=>!0!==o,!0))}(r,u,n,e):Ke(m)),(0,I.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Gr.b)(l=>{if(r.guardsResult=l.guardsResult,Uo(l.guardsResult))throw Rd(0,l.guardsResult);const m=new Df(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),Bi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3,t),!1)),q0(l=>{if(l.guards.canActivateChecks.length)return Ke(l).pipe((0,Gr.b)(m=>{const w=new Ma(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),Qn(m=>{let w=!1;return Ke(m).pipe(function Ra(n,e){return(0,Hr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Ke(t);let u=0;return(0,Vt.D)(o).pipe(_u(l=>function SD(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!Uy(o)&&(u[zr]=o.title),function AD(n,e,t,r){const o=function kS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return Ke({});const u={};return(0,Vt.D)(o).pipe((0,Hr.z)(l=>function FS(n,e,t,r){const o=Od(e)??r,u=Af(n,o);return As(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(is(),(0,Gr.b)(m=>{u[l]=m}))),$c(1),function ig(n){return(0,I.U)(()=>n)}(u),Sa(l=>Mf(l)?mr.E:gr(l)))}(u,n,e,r).pipe((0,I.U)(l=>(n._resolvedData=l,n.data=le(n,t).resolve,o&&Uy(o)&&(n.data[zr]=o.title),null)))}(l.route,r,n,e)),(0,Gr.b)(()=>u++),$c(1),(0,Hr.z)(l=>u===o.length?Ke(t):mr.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Gr.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2,t))}}))}),(0,Gr.b)(m=>{const w=new gg(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),q0(l=>{const m=w=>{const C=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Gr.b)(A=>{w.component=A}),(0,I.U)(()=>{})));for(const A of w.children)C.push(...m(A));return C};return Ye(m(l.targetSnapshot.root)).pipe(no(),vu(1))}),q0(()=>t.afterPreactivation()),(0,I.U)(l=>{const m=function _g(n,e,t){const r=uo(n,e._root,t?t._root:void 0);return new _(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,Gr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,I.U)(r=>(new fD(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,Gr.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new $o(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),pd(()=>{o||u||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Sa(l=>{if(u=!0,wg(l)){Sf(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new Sd(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),Sf(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),C={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||$y(r.source)};t.scheduleNavigation(w,"imperative",null,C,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new xs(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return mr.E}))}))}cancelNavigationTransition(t,r,o,u){const l=new Sd(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(l),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $y(n){return"imperative"!==n}let Z0=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===$t);return r}getResolvedTitleForRoute(t){return t.data[zr]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(xD)},providedIn:"root"}),n})(),xD=(()=>{class n extends Z0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Po))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Y0)},providedIn:"root"}),n})();class ND{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Y0=(()=>{class n extends ND{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ag=new f.OlP("",{providedIn:"root",factory:()=>({})});let PD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(kt)},providedIn:"root"}),n})(),kt=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Q0(n){throw n}function J0(n,e,t){return e.parse("/")}const kD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $i=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(Ag,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Q0,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||J0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ke(void 0),this.urlHandlingStrategy=(0,f.f3M)(PD),this.routeReuseStrategy=(0,f.f3M)(RD),this.urlCreationStrategy=(0,f.f3M)(yg),this.titleStrategy=(0,f.f3M)(Z0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=gd((0,f.f3M)(Vd,{optional:!0})??[]),this.navigationTransitions=(0,f.f3M)(jy),this.urlSerializer=(0,f.f3M)(io),this.location=(0,f.f3M)(Oe),this.rootComponentType=null,this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Iu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=S(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(t.state){const m={...t.state};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(by),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,C=w?this.currentUrlTree.fragment:l;let A=null;switch(m){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,t,A,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Uo(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function LD(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...kD}:!1===r?{...FD}:r,Uo(t))return vd(this.currentUrlTree,t,o);const u=this.parseUrl(t);return vd(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,C,A;return l?(m=l.resolve,w=l.reject,C=l.promise):C=new Promise((N,$)=>{m=N,w=$}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),A=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===o?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kf=(()=>{class n{constructor(t,r,o,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new si.x;const w=l.nativeElement.tagName;this.isAnchorElement="A"===w||"AREA"===w,this.isAnchorElement?this.subscription=t.events.subscribe(C=>{C instanceof $o&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,u=this.el.nativeElement;null!==r?o.setAttribute(u,t,r):o.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($i),f.Y36(H),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(tt))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})();class BD{}let il=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Bi(t=>t instanceof $o),_u(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Vt.D)(o).pipe((0,Et.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ke(null);const u=o.pipe((0,Hr.z)(l=>null===l?Ke(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Vt.D)([u,l]).pipe((0,Et.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG($i),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(BD),f.LFG(Sg))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gy=new f.OlP("");let Mg=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ef?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $o&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Mu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Mu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Ff(n,e){return{\u0275kind:n,\u0275providers:e}}function ew(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get($i),o=n.get(sl);1===n.get(zy)&&r.initialNavigation(),n.get(qy,null,f.XFs.Optional)?.setUpPreloading(),n.get(Gy,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const sl=new f.OlP("",{factory:()=>new si.x}),zy=new f.OlP("",{providedIn:"root",factory:()=>1});const qy=new f.OlP("");function WD(n){return Ff(0,[{provide:qy,useExisting:il},{provide:BD,useExisting:n}])}const nw=new f.OlP("ROUTER_FORROOT_GUARD"),rw=[Oe,{provide:io,useClass:zc},$i,co,{provide:H,useFactory:function HD(n){return n.routerState.root},deps:[$i]},Sg,[]];function KD(){return new f.PXZ("Router",$i)}let Wy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[rw,[],{provide:Vd,multi:!0,useValue:t},{provide:nw,useFactory:Zy,deps:[[$i,new f.FiY,new f.tp0]]},{provide:Ag,useValue:r||{}},r?.useHash?{provide:tt,useClass:Ee}:{provide:tt,useClass:De},{provide:Gy,useFactory:()=>{const n=(0,f.f3M)(vs),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(Ag),r=(0,f.f3M)(jy),o=(0,f.f3M)(io);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Mg(o,r,n,e,t)}},r?.preloadingStrategy?WD(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:KD},r?.initialNavigation?ZD(r):[],[{provide:YD,useFactory:ew},{provide:f.tb,multi:!0,useExisting:YD}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Vd,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(nw,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Ey]}),n})();function Zy(n){return"guarded"}function ZD(n){return["disabled"===n.initialNavigation?Ff(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)($i);return()=>{e.setUpLocationChangeListener()}}},{provide:zy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ff(2,[{provide:zy,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(ue,Promise.resolve());return()=>t.then(()=>new Promise(o=>{const u=e.get($i),l=e.get(sl);(function r(o){e.get($i).events.pipe(Bi(l=>l instanceof $o||l instanceof Sd||l instanceof xs),(0,I.U)(l=>l instanceof $o||l instanceof Sd&&(0===l.code||1===l.code)&&null),Bi(l=>null!==l),vu(1)).subscribe(()=>{o()})})(()=>{o(!0)}),u.afterPreactivation=()=>(o(!0),l.closed?Ke(void 0):l),u.initialNavigation()}))}}]).\u0275providers:[]]}const YD=new f.OlP("");class sw{}var ow=P(4986),Wr=P(2122);function Yy(){return(0,Rr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Y.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Bd(n,e){return n===e}var at,ss=P(2011),Qy=(P(9169),P(3942)),ge=P(5861),Fu=P(9681),jd=P(4859),Ho=P(1877),en=P(2090),aw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lo={},Jy=Jy||{},Mt=aw||self;function Og(){}function Vf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $d(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Xy="closure_uid_"+(1e9*Math.random()>>>0),os=0;function uw(n,e,t){return n.call.apply(n.bind,arguments)}function XD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Di(n,e,t){return(Di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?uw:XD).apply(null,arguments)}function Hd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Or(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function Lu(){this.s=this.s,this.o=this.o}Lu.prototype.s=!1,Lu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function JD(n){Object.prototype.hasOwnProperty.call(n,Xy)&&n[Xy]||(n[Xy]=++os)}(this)},Lu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Pg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function lw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Vf(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function li(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}li.prototype.h=function(){this.defaultPrevented=!0};var ev=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Mt.addEventListener("test",Og,e),Mt.removeEventListener("test",Og,e)}catch{}return n}();function kg(n){return/^[\s\xa0]*$/.test(n)}var dw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function tv(n,e){return n<e?-1:n>e?1:0}function Fg(){var n=Mt.navigator;return n&&(n=n.userAgent)?n:""}function Go(n){return-1!=Fg().indexOf(n)}function Ps(n){return Ps[" "](n),n}Ps[" "]=Og;var Vg,n,tC=Go("Opera"),Gd=Go("Trident")||Go("MSIE"),rv=Go("Edge"),iv=rv||Gd,hw=Go("Gecko")&&!(-1!=Fg().toLowerCase().indexOf("webkit")&&!Go("Edge"))&&!(Go("Trident")||Go("MSIE"))&&!Go("Edge"),nC=-1!=Fg().toLowerCase().indexOf("webkit")&&!Go("Edge");function Lg(){var n=Mt.document;return n?n.documentMode:void 0}e:{var sv="",zd=(n=Fg(),hw?/rv:([^\);]+)(\)|;)/.exec(n):rv?/Edge\/([\d\.]+)/.exec(n):Gd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):nC?/WebKit\/(\S+)/.exec(n):tC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(zd&&(sv=zd?zd[1]:""),Gd){var Uf=Lg();if(null!=Uf&&Uf>parseFloat(sv)){Vg=String(Uf);break e}}Vg=sv}var Ug={};var fw=Mt.document&&Gd&&(Lg()||parseInt(Vg,10))||void 0;function qd(n,e){if(li.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(hw){e:{try{Ps(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:pw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qd.X.h.call(this)}}Or(qd,li);var pw={2:"touch",3:"pen",4:"mouse"};qd.prototype.h=function(){qd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Wd="closure_listenable_"+(1e6*Math.random()|0),ov=0;function Na(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++ov,this.ba=this.ea=!1}function ol(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Kd(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Zd(n){const e={};for(const t in n)e[t]=n[t];return e}const gw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function av(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<gw.length;u++)t=gw[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function jf(n){this.src=n,this.g={},this.h=0}function uv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=cw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(ol(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function cv(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}jf.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=cv(n,e,r,o);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new Na(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var al="closure_lm_"+(1e6*Math.random()|0),lv={};function iC(n,e,t,r,o){if(r&&r.once)return yw(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)iC(n,e[u],t,r,o);return null}return t=hv(t),n&&n[Wd]?n.N(e,t,$d(r)?!!r.capture:!!r,o):mw(n,e,t,!1,r,o)}function mw(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=$d(o)?!!o.capture:!!o,m=Bg(n);if(m||(n[al]=m=new jf(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function sC(){const e=oC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ev||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(_w(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function yw(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)yw(n,e[u],t,r,o);return null}return t=hv(t),n&&n[Wd]?n.O(e,t,$d(r)?!!r.capture:!!r,o):mw(n,e,t,!0,r,o)}function vw(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)vw(n,e[u],t,r,o);else r=$d(r)?!!r.capture:!!r,t=hv(t),n&&n[Wd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=cv(u=n.g[e],t,r,o))&&(ol(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Bg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=cv(e,t,r,o)),(t=-1<n?e[n]:null)&&dv(t))}function dv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Wd])uv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(_w(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Bg(e))?(uv(t,n),0==t.h&&(t.src=null,e[al]=null)):ol(n)}}}function _w(n){return n in lv?lv[n]:lv[n]="on"+n}function oC(n,e){if(n.ba)n=!0;else{e=new qd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&dv(n),n=t.call(r,e)}return n}function Bg(n){return(n=n[al])instanceof jf?n:null}var $f="__closure_events_fn_"+(1e9*Math.random()>>>0);function hv(n){return"function"==typeof n?n:(n[$f]||(n[$f]=function(e){return n.handleEvent(e)}),n[$f])}function ir(){Lu.call(this),this.i=new jf(this),this.P=this,this.I=null}function Kr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new li(e,n);else if(e instanceof li)e.target=e.target||n;else{var o=e;av(e=new li(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=jg(l,r,!0,e)&&o}if(o=jg(l=e.g=n,r,!0,e)&&o,o=jg(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=jg(l=e.g=t[u],r,!1,e)&&o}function jg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,w=l.ha||l.src;l.ea&&uv(n.i,l),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Or(ir,Lu),ir.prototype[Wd]=!0,ir.prototype.removeEventListener=function(n,e,t,r){vw(this,n,e,t,r)},ir.prototype.M=function(){if(ir.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ol(t[r]);delete n.g[e],n.h--}}this.I=null},ir.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ir.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var fv=Mt.JSON.stringify;function aC(){var n=Hf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var gv,ww=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new cC,n=>n.reset());class cC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ew(n){Mt.setTimeout(()=>{throw n},0)}function pv(n,e){gv||function $S(){var n=Mt.Promise.resolve(void 0);gv=function(){n.then(ul)}}(),$g||(gv(),$g=!0),Hf.add(n,e)}var $g=!1,Hf=new class uC{constructor(){this.h=this.g=null}add(e,t){const r=ww.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ul(){for(var n;n=aC();){try{n.h.call(n.g)}catch(t){Ew(t)}var e=ww;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}$g=!1}function mv(n,e){ir.call(this),this.h=n||1,this.g=e||Mt,this.j=Di(this.lb,this),this.l=Date.now()}function cl(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function yv(n,e,t){if("function"==typeof n)t&&(n=Di(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Di(n.handleEvent,n)}return 2147483647<Number(e)?-1:Mt.setTimeout(n,e||0)}function Iw(n){n.g=yv(()=>{n.g=null,n.i&&(n.i=!1,Iw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Or(mv,ir),(at=mv.prototype).ca=!1,at.R=null,at.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Kr(this,"tick"),this.ca&&(cl(this),this.start()))}},at.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){mv.X.M.call(this),cl(this),delete this.g};class vv extends Lu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Iw(this)}M(){super.M(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gf(n){Lu.call(this),this.h=n,this.g={}}Or(Gf,Lu);var ho=[];function Yd(n,e,t,r){Array.isArray(t)||(t&&(ho[0]=t.toString()),t=ho);for(var o=0;o<t.length;o++){var u=iC(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Zr(n){Kd(n.g,function(e,t){this.g.hasOwnProperty(t)&&dv(e)},n),n.g={}}function zo(){this.g=!0}function Vu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Jd(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return fv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Gf.prototype.M=function(){Gf.X.M.call(this),Zr(this)},Gf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zo.prototype.Aa=function(){this.g=!1},zo.prototype.info=function(){};var Fs={},ll=null;function Oa(){return ll=ll||new ir}function dl(n){li.call(this,Fs.Pa,n)}function qo(n){const e=Oa();Kr(e,new dl(e))}function hl(n,e){li.call(this,Fs.STAT_EVENT,n),this.stat=e}function sr(n){const e=Oa();Kr(e,new hl(e,n))}function _v(n,e){li.call(this,Fs.Qa,n),this.size=e}function Xd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){n()},e)}Fs.Pa="serverreachability",Or(dl,li),Fs.STAT_EVENT="statevent",Or(hl,li),Fs.Qa="timingevent",Or(_v,li);var zf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},wv={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Gg(){}function Iv(){}Gg.prototype.h=null;var Cv,eh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function zg(){li.call(this,"d")}function Dv(){li.call(this,"c")}function qf(){}function Wf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Gf(this),this.O=bv,this.T=new mv(n=iv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Dw}function Dw(){this.i=null,this.g="",this.h=!1}Or(zg,li),Or(Dv,li),Or(qf,Gg),qf.prototype.g=function(){return new XMLHttpRequest},qf.prototype.i=function(){return{}},Cv=new qf;var bv=45e3,Kf={},qg={};function th(n,e,t){n.K=1,n.v=nh(Wo(e)),n.s=t,n.P=!0,Zf(n,null)}function Zf(n,e){n.F=Date.now(),fl(n),n.A=Wo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Qg(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Dw,n.g=jv(n.l,t?e:null,!n.s),0<n.N&&(n.L=new vv(Di(n.La,n,n.g),n.N)),Yd(n.S,n.g,"readystatechange",n.ib),e=n.H?Zd(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),qo(),function Hg(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var A=C[0];C=C[1];var N=A.split("_");l=2<=N.length&&"type"==N[1]?l+(A+"=")+C+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Wg(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Cw(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Tv(n,t),o==qg){4==e&&(n.o=4,sr(14),r=!1),Vu(n.j,n.m,null,"[Incomplete Response]");break}if(o==Kf){n.o=4,sr(15),Vu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Vu(n.j,n.m,o,null),Kg(n,o)}Wg(n)&&o!=qg&&o!=Kf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,sr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),rm(e),e.K=!0,sr(11))):(Vu(n.j,n.m,t,"[Invalid Chunked Response]"),Uu(n),pl(n))}function Tv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?qg:(t=Number(e.substring(t,r)),isNaN(t)?Kf:(r+=1)+t>e.length?qg:(e=e.substr(r,t),n.C=r+t,e))}function fl(n){n.V=Date.now()+n.O,Sv(n,n.O)}function Sv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xd(Di(n.gb,n),e)}function Yf(n){n.B&&(Mt.clearTimeout(n.B),n.B=null)}function pl(n){0==n.l.G||n.I||Lv(n.l,n)}function Uu(n){Yf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,cl(n.T),Zr(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Kg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Nv(t.h,n)))if(!n.J&&Nv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;gl(t),Hu(t)}nm(t),sr(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Xd(Di(t.cb,t),6e3));if(1>=Fw(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Gu(t,11)}else if((n.J||t.g==n)&&gl(t),!kg(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const A=C[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=C[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const $=C[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const te=n.g;if(te){const he=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(he){var u=r.h;u.g||-1==he.indexOf("spdy")&&-1==he.indexOf("quic")&&-1==he.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Xg(u,u.h),u.h=null))}if(r.D){const Pe=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Pe&&(r.za=Pe,Sn(r.F,r.D,Pe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=Bv(r,r.H?r.ka:null,r.V),l.J){Lw(r.h,l);var m=l,w=r.J;w&&m.setTimeout(w),m.B&&(Yf(m),fl(m)),r.g=l}else qw(r);0<t.i.length&&tp(t)}else"stop"!=C[0]&&"close"!=C[0]||Gu(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Gu(t,7):ep(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}qo()}catch{}}function Tw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Vf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function bw(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Vf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Av(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Vf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(at=Wf.prototype).setTimeout=function(n){this.O=n},at.ib=function(n){n=n.target;const e=this.L;e&&3==Zo(n)?e.l():this.La(n)},at.La=function(n){try{if(n==this.g)e:{const A=Zo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||iv||this.g&&(this.h.h||this.g.fa()||Pv(this.g)))){this.I||4!=A||7==e||qo(),Yf(this);var t=this.g.aa();this.Y=t;t:if(Wg(this)){var r=Pv(this.g);n="";var o=r.length,u=4==Zo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Uu(this),pl(this);var l="";break t}this.h.i=new Mt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function ks(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kg(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,sr(12),Uu(this),pl(this);break e}Vu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Kg(this,t)}this.P?(Cw(this,A,l),iv&&this.i&&3==A&&(Yd(this.S,this.T,"tick",this.hb),this.T.start())):(Vu(this.j,this.m,l,null),Kg(this,l)),4==A&&Uu(this),this.i&&!this.I&&(4==A?Lv(this.l,this):(this.i=!1,fl(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,sr(12)):(this.o=0,sr(13)),Uu(this),pl(this)}}}catch{}},at.hb=function(){if(this.g){var n=Zo(this.g),e=this.g.fa();this.C<e.length&&(Yf(this),Cw(this,n,e),this.i&&4!=n&&fl(this))}},at.cancel=function(){this.I=!0,Uu(this)},at.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Qd(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(qo(),sr(17)),Uu(this),this.o=2,pl(this)):Sv(this,this.V-n)};var Mv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bu(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Bu){this.h=void 0!==e?e:n.h,Zg(this,n.j),this.s=n.s,this.g=n.g,Yg(this,n.m),this.l=n.l,e=n.i;var t=new ju;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Aw(this,t),this.o=n.o}else n&&(t=String(n).match(Mv))?(this.h=!!e,Zg(this,t[1]||"",!0),this.s=rh(t[2]||""),this.g=rh(t[3]||"",!0),Yg(this,t[4]),this.l=rh(t[5]||"",!0),Aw(this,t[6]||"",!0),this.o=rh(t[7]||"")):(this.h=!!e,this.i=new ju(null,this.h))}function Wo(n){return new Bu(n)}function Zg(n,e,t){n.j=t?rh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Yg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Aw(n,e,t){e instanceof ju?(n.i=e,function Rv(n,e){e&&!n.j&&(Ci(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Pw(this,r),Qg(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ih(e,Nw)),n.i=new ju(e,n.h))}function Sn(n,e,t){n.i.set(e,t)}function nh(n){return Sn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ih(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Mw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Mw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Bu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ih(e,xv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ih(e,xv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ih(t,"/"==t.charAt(0)?Rw:xw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ih(t,Ow)),n.join("")};var xv=/[#\/\?@]/g,xw=/[#\?:]/g,Rw=/[#\?]/g,Nw=/[#\?@]/g,Ow=/#/g;function ju(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ci(n){n.g||(n.g=new Map,n.h=0,n.i&&function Sw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Pw(n,e){Ci(n),e=Ls(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function kw(n,e){return Ci(n),e=Ls(n,e),n.g.has(e)}function Qg(n,e,t){Pw(n,e),0<t.length&&(n.i=null,n.g.set(Ls(n,e),Pg(t)),n.h+=t.length)}function Ls(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Jg(n){this.l=n||HS,n=Mt.PerformanceNavigationTiming?0<(n=Mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ga&&Mt.g.Ga()&&Mt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=ju.prototype).add=function(n,e){Ci(this),this.i=null,n=Ls(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){Ci(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},at.oa=function(){Ci(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},at.W=function(n){Ci(this);let e=[];if("string"==typeof n)kw(this,n)&&(e=e.concat(this.g.get(Ls(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},at.set=function(n,e){return Ci(this),this.i=null,kw(this,n=Ls(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var HS=10;function dC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Fw(n){return n.h?1:n.g?n.g.size:0}function Nv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Xg(n,e){n.g?n.g.add(e):n.h=e}function Lw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function or(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Pg(n.i)}function em(){}function hC(){this.g=new em}function fC(n,e,t){const r=t||"";try{Tw(n,function(o,u){let l=o;$d(o)&&(l=fv(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function tm(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function sh(n){this.l=n.ac||null,this.j=n.jb||!1}function Qf(n,e){ir.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=$u,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jg.prototype.cancel=function(){if(this.i=or(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},em.prototype.stringify=function(n){return Mt.JSON.stringify(n,void 0)},em.prototype.parse=function(n){return Mt.JSON.parse(n,void 0)},Or(sh,Gg),sh.prototype.g=function(){return new Qf(this.l,this.j)},sh.prototype.i=function(n){return function(){return n}}({}),Or(Qf,ir);var $u=0;function Uw(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Jf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,oh(n)}function oh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=Qf.prototype).open=function(n,e){if(this.readyState!=$u)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,oh(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Mt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jf(this)),this.readyState=$u},at.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,oh(this)),this.g&&(this.readyState=3,oh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Mt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Uw(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},at.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Jf(this):oh(this),3==this.readyState&&Uw(this)}},at.Va=function(n){this.g&&(this.response=this.responseText=n,Jf(this))},at.Ua=function(n){this.g&&(this.response=n,Jf(this))},at.ga=function(){this.g&&Jf(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Qf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var pC=Mt.JSON.parse;function Ln(n){ir.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=gC,this.K=this.L=!1}Or(Ln,ir);var gC="",Bw=/^https?$/i,Ov=["POST","PUT"];function jw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$w(n),Hi(n)}function $w(n){n.D||(n.D=!0,Kr(n,"complete"),Kr(n,"error"))}function fo(n){if(n.h&&typeof Jy<"u"&&(!n.C[1]||4!=Zo(n)||2!=n.aa()))if(n.v&&4==Zo(n))yv(n.Ha,0,n);else if(Kr(n,"readystatechange"),4==Zo(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Mv)[1]||null;if(!o&&Mt.self&&Mt.self.location){var u=Mt.self.location.protocol;o=u.substr(0,u.length-1)}r=!Bw.test(o?o.toLowerCase():"")}t=r}if(t)Kr(n,"complete"),Kr(n,"success");else{n.m=6;try{var l=2<Zo(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",$w(n)}}finally{Hi(n)}}}function Hi(n,e){if(n.g){Vs(n);const t=n.g,r=n.C[0]?Og:null;n.g=null,n.C=null,e||Kr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Vs(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Mt.clearTimeout(n.A),n.A=null)}function Zo(n){return n.g?n.g.readyState:0}function Pv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case gC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Hw(n){let e="";return Kd(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function kv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Hw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Sn(n,e,t))}function Xf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Gw(n){this.Ca=0,this.i=[],this.j=new zo,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Xf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Xf("baseRetryDelayMs",5e3,n),this.bb=Xf("retryDelaySeedMs",1e4,n),this.$a=Xf("forwardChannelMaxRetries",2,n),this.ta=Xf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Jg(n&&n.concurrentRequestLimit),this.Fa=new hC,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ep(n){if(zw(n),3==n.G){var e=n.U++,t=Wo(n.F);Sn(t,"SID",n.I),Sn(t,"RID",e),Sn(t,"TYPE","terminate"),ah(n,t),(e=new Wf(n,n.j,e,void 0)).K=2,e.v=nh(Wo(t)),t=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(t=Mt.navigator.sendBeacon(e.v.toString(),"")),!t&&Mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=jv(e.l,null),e.g.da(e.v)),e.F=Date.now(),fl(e)}Uv(n)}function Hu(n){n.g&&(rm(n),n.g.cancel(),n.g=null)}function zw(n){Hu(n),n.u&&(Mt.clearTimeout(n.u),n.u=null),gl(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Mt.clearTimeout(n.m),n.m=null)}function tp(n){dC(n.h)||n.m||(n.m=!0,pv(n.Ja,n),n.C=0)}function Fv(n,e){var t;t=e?e.m:n.U++;const r=Wo(n.F);Sn(r,"SID",n.I),Sn(r,"RID",t),Sn(r,"AID",n.T),ah(n,r),n.o&&n.s&&kv(r,n.o,n.s),t=new Wf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=np(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Xg(n.h,t),th(t,r,e)}function ah(n,e){n.ia&&Kd(n.ia,function(t,r){Sn(e,r,t)}),n.l&&Tw({},function(t,r){Sn(e,r,t)})}function np(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Di(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const A=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{fC(A,l,"req"+C+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function qw(n){n.g||n.u||(n.Z=1,pv(n.Ia,n),n.A=0)}function nm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Xd(Di(n.Ia,n),Vv(n,n.A)),n.A++,0))}function rm(n){null!=n.B&&(Mt.clearTimeout(n.B),n.B=null)}function im(n){n.g=new Wf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Wo(n.sa);Sn(e,"RID","rpc"),Sn(e,"SID",n.I),Sn(e,"CI",n.L?"0":"1"),Sn(e,"AID",n.T),Sn(e,"TYPE","xmlhttp"),ah(n,e),n.o&&n.s&&kv(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=nh(Wo(e)),t.s=null,t.P=!0,Zf(t,n)}function gl(n){null!=n.v&&(Mt.clearTimeout(n.v),n.v=null)}function Lv(n,e){var t=null;if(n.g==e){gl(n),rm(n),n.g=null;var r=2}else{if(!Nv(n.h,e))return;t=e.D,Lw(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Kr(r=Oa(),new _v(r,t)),tp(n)}else qw(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function mC(n,e){return!(Fw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Xd(Di(n.Ja,n,e),Vv(n,n.C)),n.C++,0)))}(n,e)||2==r&&nm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Gu(n,5);break;case 4:Gu(n,10);break;case 3:Gu(n,6);break;default:Gu(n,2)}}function Vv(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Gu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Di(n.kb,n);t||(t=new Bu("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||Zg(t,"https"),nh(t)),function Vw(n,e){const t=new zo;if(Mt.Image){const r=new Image;r.onload=Hd(tm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Hd(tm,t,r,"TestLoadImage: error",!1,e),r.onabort=Hd(tm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hd(tm,t,r,"TestLoadImage: timeout",!1,e),Mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else sr(2);n.G=0,n.l&&n.l.va(e),Uv(n),zw(n)}function Uv(n){if(n.G=0,n.la=[],n.l){const e=or(n.h);(0!=e.length||0!=n.i.length)&&(lw(n.la,e),lw(n.la,n.i),n.h.i.length=0,Pg(n.i),n.i.length=0),n.l.ua()}}function Bv(n,e,t){var r=t instanceof Bu?Wo(t):new Bu(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Yg(r,r.m);else{var o=Mt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Bu(null,void 0);r&&Zg(u,r),e&&(u.g=e),o&&Yg(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Sn(r,t,e),Sn(r,"VER",n.ma),ah(n,r),r}function jv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ln(t&&n.Da&&!n.ra?new sh({jb:!0}):n.ra)).Ka(n.H),e}function $v(){}function rp(){if(Gd&&!(10<=Number(fw)))throw Error("Environmental error: no available transport.")}function as(n,e){ir.call(this),this.g=new Gw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!kg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new uh(this)}function Ww(n){zg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Kw(){Dv.call(this),this.status=1}function uh(n){this.g=n}(at=Ln.prototype).Ka=function(n){this.L=n},at.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Cv.g(),this.C=function Ev(n){return n.h||(n.h=n.i())}(this.u?this.u:Cv),this.g.onreadystatechange=Di(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void jw(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Mt.FormData&&n instanceof Mt.FormData,!(0<=cw(Ov,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Vs(this),0<this.B&&((this.K=function Ko(n){return Gd&&function jS(){return function nv(n){var e=Ug;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=dw(String(Vg)).split("."),t=dw("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=tv(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||tv(0==o[2].length,0==u[2].length)||tv(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Di(this.qa,this)):this.A=yv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){jw(this,u)}},at.qa=function(){typeof Jy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kr(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Kr(this,"complete"),Kr(this,"abort"),Hi(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hi(this,!0)),Ln.X.M.call(this)},at.Ha=function(){this.s||(this.F||this.v||this.l?fo(this):this.fb())},at.fb=function(){fo(this)},at.aa=function(){try{return 2<Zo(this)?this.g.status:-1}catch{return-1}},at.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},at.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),pC(e)}},at.Ea=function(){return this.m},at.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=Gw.prototype).ma=8,at.G=1,at.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Wf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Zd(u),av(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=np(this,o,e),Sn(t=Wo(this.F),"RID",n),Sn(t,"CVER",22),this.D&&Sn(t,"X-HTTP-Session-Id",this.D),ah(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(Hw(u)))+"&"+e:this.o&&kv(t,this.o,u)),Xg(this.h,o),this.Ya&&Sn(t,"TYPE","init"),this.O?(Sn(t,"$req",e),Sn(t,"SID","null"),o.Z=!0,th(o,t,null)):th(o,t,e),this.G=2}}else 3==this.G&&(n?Fv(this,n):0==this.i.length||dC(this.h)||Fv(this))},at.Ia=function(){if(this.u=null,im(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Xd(Di(this.eb,this),n)}},at.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,sr(10),Hu(this),im(this))},at.cb=function(){null!=this.v&&(this.v=null,Hu(this),nm(this),sr(19))},at.kb=function(n){n?(this.j.info("Successfully pinged google.com"),sr(2)):(this.j.info("Failed to ping google.com"),sr(1))},(at=$v.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Ra=function(){},rp.prototype.g=function(n,e){return new as(n,e)},Or(as,ir),as.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;sr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Bv(n,null,n.V),tp(n)},as.prototype.close=function(){ep(this.g)},as.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=fv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&tp(e)},as.prototype.M=function(){this.g.l=null,delete this.j,ep(this.g),delete this.g,as.X.M.call(this)},Or(Ww,zg),Or(Kw,Dv),Or(uh,$v),uh.prototype.xa=function(){Kr(this.g,"a")},uh.prototype.wa=function(n){Kr(this.g,new Ww(n))},uh.prototype.va=function(n){Kr(this.g,new Kw)},uh.prototype.ua=function(){Kr(this.g,"b")},rp.prototype.createWebChannel=rp.prototype.g,as.prototype.send=as.prototype.u,as.prototype.open=as.prototype.m,as.prototype.close=as.prototype.close,zf.NO_ERROR=0,zf.TIMEOUT=8,zf.HTTP_ERROR=6,wv.COMPLETE="complete",Iv.EventType=eh,eh.OPEN="a",eh.CLOSE="b",eh.ERROR="c",eh.MESSAGE="d",ir.prototype.listen=ir.prototype.N,Ln.prototype.listenOnce=Ln.prototype.O,Ln.prototype.getLastError=Ln.prototype.Oa,Ln.prototype.getLastErrorCode=Ln.prototype.Ea,Ln.prototype.getStatus=Ln.prototype.aa,Ln.prototype.getResponseJson=Ln.prototype.Sa,Ln.prototype.getResponseText=Ln.prototype.fa,Ln.prototype.send=Ln.prototype.da,Ln.prototype.setWithCredentials=Ln.prototype.Ka;var yC=lo.createWebChannelTransport=function(){return new rp},vC=lo.getStatEventTarget=function(){return Oa()},Hv=lo.ErrorCode=zf,_C=lo.EventType=wv,wC=lo.Event=Fs,Zw=lo.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},EC=lo.FetchXmlHttpFactory=sh,sm=lo.WebChannel=Iv,IC=lo.XhrIo=Ln;const Yw="@firebase/firestore";class Pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let ch="9.15.0";const zu=new Ho.Yd("@firebase/firestore");function Gv(){return zu.logLevel}function xe(n,...e){if(zu.logLevel<=Ho.in.DEBUG){const t=e.map(om);zu.debug(`Firestore (${ch}): ${n}`,...t)}}function zn(n,...e){if(zu.logLevel<=Ho.in.ERROR){const t=e.map(om);zu.error(`Firestore (${ch}): ${n}`,...t)}}function qu(n,...e){if(zu.logLevel<=Ho.in.WARN){const t=e.map(om);zu.warn(`Firestore (${ch}): ${n}`,...t)}}function om(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Qe(n="Unexpected state"){const e=`FIRESTORE (${ch}) INTERNAL ASSERTION FAILED: `+n;throw zn(e),new Error(e)}function rt(n,e){n||Qe()}function Ge(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends en.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class An{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Xw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pr.UNAUTHENTICATED))}shutdown(){}}class lh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GS{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let l=new An;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new An,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=l;e.enqueueRetryable((0,ge.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new An)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt("string"==typeof r.accessToken),new Xw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new Pr(e)}}class zv{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(rt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class zS{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new zv(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eE{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,xe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt("string"==typeof t.token),this.A=t.token,new qv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _t(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class tE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=_t(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function dh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function ml(n){return n+"\0"}class Pn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ut(e)}static min(){return new ut(new Pn(0,0))}static max(){return new ut(new Pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Wu{constructor(e,t,r){void 0===t?t=0:t>e.length&&Qe(),void 0===r?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Wu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pt extends Wu{construct(e,t,r){return new pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new pt(t)}static emptyPath(){return new pt([])}}const qS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends Wu{construct(e,t,r){return new Vn(e,t,r)}static isValidIdentifier(e){return qS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Te(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Te(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Te(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new Te(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(t)}static emptyPath(){return new Vn([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(pt.fromString(e))}static fromName(e){return new He(pt.fromString(e).popFirst(5))}static empty(){return new He(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new pt(e.slice()))}}class am{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function um(n){return n.fields.find(e=>2===e.kind)}function Ku(n){return n.fields.filter(e=>2!==e.kind)}am.UNKNOWN_ID=-1;class ip{constructor(e,t){this.fieldPath=e,this.kind=t}}class sp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sp(0,us.min())}}function rE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=ut.fromTimestamp(1e9===r?new Pn(t+1,0):new Pn(t,r));return new us(o,He.empty(),e)}function hh(n){return new us(n.readTime,n.key,-1)}class us{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new us(ut.min(),He.empty(),-1)}static max(){return new us(ut.max(),He.empty(),-1)}}function Wv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const iE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class op{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Pa(n){return cm.apply(this,arguments)}function cm(){return cm=(0,ge.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==iE)throw n;xe("LocalStore","Unexpectedly lost primary lease")}),cm.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},w=>r(w))}),l=!0,u===o&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(o=>o?oe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(A=>{l[C]=A,++m,m===u&&r(l)},A=>o(A))}})}static doWhile(e,t){return new oe((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class lm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new An,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new up(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=dm(r.target.error);this.P.reject(new up(e,o))}}static open(e,t,r,o){try{return new lm(t,e.transaction(o,r))}catch(u){throw new up(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bC(t)}}class bi{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===bi.D((0,en.z$)())&&zn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xe("SimpleDb","Removing database:",e),Yu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,en.hl)())return!1;if(bi.N())return!0;const e=(0,en.z$)(),t=bi.D(e),r=0<t&&t<10,o=bi.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(xe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new up(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new Te(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Te(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new up(e,m))},u.onupgradeneeded=l=>{xe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{xe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ge.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=lm.open(u.db,e,l?"readonly":"readwrite",r),C=o(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),oe.reject(A))).toPromise();return C.catch(()=>{}),yield w.v,C}catch(w){const C=w,A="FirebaseError"!==C.name&&m<3;if(xe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",A),u.close(),!A)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ap{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Yu(this.q.delete())}}class up extends Te{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zu(n){return"IndexedDbTransactionError"===n.name}class bC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(xe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Yu(r)}add(e){return xe("SimpleDb","ADD",this.store.name,e,e),Yu(this.store.add(e))}get(e){return Yu(this.store.get(e)).next(t=>(void 0===t&&(t=null),xe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xe("SimpleDb","DELETE",this.store.name,e),Yu(this.store.delete(e))}count(){return xe("SimpleDb","COUNT",this.store.name),Yu(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new oe((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}Y(e,t){xe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,l,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new oe((r,o)=>{t.onerror=u=>{const l=dm(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}H(e,t){const r=[];return new oe((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const w=new ap(m),C=t(m.primaryKey,m.value,w);if(C instanceof oe){const A=C.catch(N=>(w.done(),oe.reject(N)));r.push(A)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Yu(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=dm(r.target.error);t(o)}})}let Kv=!1;function dm(n){const e=bi.D((0,en.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kv||(Kv=!0,setTimeout(()=>{throw r},0)),r}}return n}class TC{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;xe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{xe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Zu(r)?xe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Pa(r)}yield t.nt(6e4)}))}}class sE{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return oe.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return xe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(o,u)).next(m=>(xe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=hh(u);Wv(l,r)>0&&(r=l)}),new us(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let cs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class SC{constructor(e,t,r,o,u,l,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class yl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}function AC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function MC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function hm(n){return null==n}function fm(n){return 0===n&&1/n==-1/0}function Zv(n){return"number"==typeof n&&Number.isInteger(n)&&!fm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const xC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ka(n){if(rt(!!n),"string"==typeof n){let e=0;const t=xC.exec(n);if(rt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dn(n.seconds),nanos:Dn(n.nanos)}}function Dn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function vl(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function Yv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function oE(n){const e=n.mapValue.fields.__previous_value__;return Yv(e)?oE(e):e}function cp(n){const e=ka(n.mapValue.fields.__local_write_time__.timestampValue);return new Pn(e.seconds,e.nanos)}const Qu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lp={nullValue:"NULL_VALUE"};function _l(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yv(n)?4:uE(n)?9007199254740991:10:Qe()}function Yo(n,e){if(n===e)return!0;const t=_l(n);if(t!==_l(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cp(n).isEqual(cp(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=ka(r.timestampValue),l=ka(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,vl(n.bytesValue).isEqual(vl(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Dn(r.geoPointValue.latitude)===Dn(o.geoPointValue.latitude)&&Dn(r.geoPointValue.longitude)===Dn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Dn(r.integerValue)===Dn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Dn(r.doubleValue),l=Dn(o.doubleValue);return u===l?fm(u)===fm(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return dh(n.arrayValue.values||[],e.arrayValue.values||[],Yo);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(AC(u)!==AC(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!Yo(u[m],l[m])))return!1;return!0}(n,e);default:return Qe()}var o}function Fa(n,e){return void 0!==(n.values||[]).find(t=>Yo(t,e))}function Ju(n,e){if(n===e)return 0;const t=_l(n),r=_l(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=Dn(o.integerValue||o.doubleValue),m=Dn(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return Qv(n.timestampValue,e.timestampValue);case 4:return Qv(cp(n),cp(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=vl(o),m=vl(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const C=Nt(l[w],m[w]);if(0!==C)return C}return Nt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Nt(Dn(o.latitude),Dn(u.latitude));return 0!==l?l:Nt(Dn(o.longitude),Dn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const C=Ju(l[w],m[w]);if(C)return C}return Nt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Qu.mapValue&&u===Qu.mapValue)return 0;if(o===Qu.mapValue)return 1;if(u===Qu.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let A=0;A<m.length&&A<C.length;++A){const N=Nt(m[A],C[A]);if(0!==N)return N;const $=Ju(l[m[A]],w[C[A]]);if(0!==$)return $}return Nt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function Qv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=ka(n),r=ka(e),o=Nt(t.seconds,r.seconds);return 0!==o?o:Nt(t.nanos,r.nanos)}function ph(n){return gm(n)}function gm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=ka(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?vl(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=gm(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${gm(r.fields[m])}`;return u+"}"}(n.mapValue):Qe();var e}function wl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mm(n){return!!n&&"integerValue"in n}function dp(n){return!!n&&"arrayValue"in n}function ym(n){return!!n&&"nullValue"in n}function aE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hp(n){return!!n&&"mapValue"in n}function gh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function RC(n){return"nullValue"in n?lp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wl(yl.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Qe()}function NC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wl(yl.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Qu:Qe()}function vm(n,e){const t=Ju(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function cE(n,e){const t=Ju(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class La{constructor(e,t){this.position=e,this.inclusive=t}}function lE(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?He.comparator(He.fromName(l.referenceValue),t.key):Ju(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function dE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yo(n.position[t],e.position[t]))return!1;return!0}class hE{}class Qt extends hE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new OC(e,t,r):"array-contains"===t?new n_(e,r):"in"===t?new r_(e,r):"not-in"===t?new i_(e,r):"array-contains-any"===t?new FC(e,r):new Qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new PC(e,r):new kC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ju(t,this.value)):null!==t&&_l(this.value)===_l(t)&&this.matchesComparison(Ju(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class cn extends hE{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new cn(e,t)}matches(e){return mh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function mh(n){return"and"===n.op}function Jv(n){return"or"===n.op}function fE(n){return Xv(n)&&mh(n)}function Xv(n){for(const e of n.filters)if(e instanceof cn)return!1;return!0}function e_(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+ph(n.value);{const e=n.filters.map(t=>e_(t)).join(",");return`${n.op}(${e})`}}function pE(n,e){return n instanceof Qt?(t=n,(r=e)instanceof Qt&&t.op===r.op&&t.field.isEqual(r.field)&&Yo(t.value,r.value)):n instanceof cn?function(t,r){return r instanceof cn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&pE(u,r.filters[l]),!0)}(n,e):void Qe();var t,r}function gE(n,e){const t=n.filters.concat(e);return cn.create(t,n.op)}function t_(n){return n instanceof Qt?`${(e=n).field.canonicalString()} ${e.op} ${ph(e.value)}`:n instanceof cn?function(e){return e.op.toString()+" {"+e.getFilters().map(t_).join(" ,")+"}"}(n):"Filter";var e}class OC extends Qt{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.matchesComparison(t)}}class PC extends Qt{constructor(e,t){super(e,"in",t),this.keys=_m(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kC extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=_m(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function _m(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class n_ extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dp(t)&&Fa(t.arrayValue,this.value)}}class r_ extends Qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fa(this.value.arrayValue,t)}}class i_ extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Fa(this.value.arrayValue,t)}}class FC extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Fa(this.value.arrayValue,r))}}class yh{constructor(e,t="asc"){this.field=e,this.dir=t}}function s_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class qn{constructor(e,t){this.comparator=e,this.root=t||Wn.EMPTY}insert(e,t){return new qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fp(this.root,e,this.comparator,!1)}getReverseIterator(){return new fp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fp(this.root,e,this.comparator,!0)}}class fp{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wn{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Wn.RED,this.left=o??Wn.EMPTY,this.right=u??Wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Wn(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Wn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1,Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Wn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mE(this.data.getIterator())}getIteratorFrom(e){return new mE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class mE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pp(n){return n.hasNext()?n.getNext():void 0}class Gi{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new Gi([])}unionWith(e){let t=new ln(Vn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Gi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gh(t)}setAll(e){let t=Vn.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=gh(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());hp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];hp(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){fh(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new wr(gh(this.value))}}function yE(n){const e=[];return fh(n.fields,(t,r)=>{const o=new Vn([t]);if(hp(r)){const u=yE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new Gi(e)}class yn{constructor(e,t,r,o,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new yn(e,0,ut.min(),ut.min(),ut.min(),wr.empty(),0)}static newFoundDocument(e,t,r,o){return new yn(e,1,t,ut.min(),r,o,0)}static newNoDocument(e,t){return new yn(e,2,t,ut.min(),ut.min(),wr.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,ut.min(),ut.min(),wr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ut.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class LC{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.ft=null}}function wm(n,e=null,t=[],r=[],o=null,u=null,l=null){return new LC(n,e,t,r,o,u,l)}function Va(n){const e=Ge(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>e_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),hm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ph(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ph(r)).join(",")),e.ft=t}return e.ft}function vh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!s_(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dE(n.startAt,e.startAt)&&dE(n.endAt,e.endAt)}function gp(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function mp(n,e){return n.filters.filter(t=>t instanceof Qt&&t.field.isEqual(e))}function o_(n,e,t){let r=lp,o=!0;for(const u of mp(n,e)){let l=lp,m=!0;switch(u.op){case"<":case"<=":l=RC(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=lp}vm({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];vm({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function vE(n,e,t){let r=Qu,o=!0;for(const u of mp(n,e)){let l=Qu,m=!0;switch(u.op){case">=":case">":l=NC(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Qu}cE({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];cE({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Ua{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.dt=null,this._t=null}}function _E(n,e,t,r,o,u,l,m){return new Ua(n,e,t,r,o,u,l,m)}function _h(n){return new Ua(n)}function a_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function wE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function yp(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function u_(n){return null!==n.collectionGroup}function El(n){const e=Ge(n);if(null===e.dt){e.dt=[];const t=yp(e),r=wE(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new yh(t)),e.dt.push(new yh(Vn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new yh(Vn.keyField(),u))}}}return e.dt}function zi(n){const e=Ge(n);if(!e._t)if("F"===e.limitType)e._t=wm(e.path,e.collectionGroup,El(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of El(e))t.push(new yh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new La(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new La(e.startAt.position,e.startAt.inclusive):null;e._t=wm(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function c_(n,e){e.getFirstInequalityField(),yp(n);const t=n.filters.concat([e]);return new Ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Em(n,e,t){return new Ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vp(n,e){return vh(zi(n),zi(e))&&n.limitType===e.limitType}function EE(n){return`${Va(zi(n))}|lt:${n.limitType}`}function l_(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>t_(r)).join(", ")}]`),hm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ph(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ph(r)).join(",")),`Target(${t})`}(zi(n))}; limitType=${n.limitType})`}function d_(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):He.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of El(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=lE(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,El(t),r)||t.endAt&&!function(o,u,l){const m=lE(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,El(t),r)));var t,r}function IE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DE(n){return(e,t)=>{let r=!1;for(const o of El(n)){const u=VC(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function VC(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),w=l.data.field(o);return null!==m&&null!==w?Ju(m,w):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}function CE(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fm(e)?"-0":e}}function bE(n){return{integerValue:""+n}}function TE(n,e){return Zv(e)?bE(e):CE(n,e)}class Xu{constructor(){this._=void 0}}function SE(n,e,t){return n instanceof Il?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof ec?ME(n,e):n instanceof Dl?UC(n,e):function(r,o){const u=h_(r,o),l=xE(u)+xE(r.gt);return mm(u)&&mm(r.gt)?bE(l):CE(r.yt,l)}(n,e)}function AE(n,e,t){return n instanceof ec?ME(n,e):n instanceof Dl?UC(n,e):t}function h_(n,e){return n instanceof wh?mm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Il extends Xu{}class ec extends Xu{constructor(e){super(),this.elements=e}}function ME(n,e){const t=RE(e);for(const r of n.elements)t.some(o=>Yo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Dl extends Xu{constructor(e){super(),this.elements=e}}function UC(n,e){let t=RE(e);for(const r of n.elements)t=t.filter(o=>!Yo(o,r));return{arrayValue:{values:t}}}class wh extends Xu{constructor(e,t){super(),this.yt=e,this.gt=t}}function xE(n){return Dn(n.integerValue||n.doubleValue)}function RE(n){return dp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _p{constructor(e,t){this.field=e,this.transform=t}}class wp{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ls{}function NE(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Cl(n.key,kn.none()):new Ih(n.key,n.data,kn.none());{const t=n.data,r=wr.empty();let o=new ln(Vn.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Us(n.key,r,new Gi(o.toArray()),kn.none())}}function f_(n,e,t){n instanceof Ih?function(r,o,u){const l=r.value.clone(),m=PE(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Us?function(r,o,u){if(!Eh(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=PE(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(Ep(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ba(n,e,t,r){return n instanceof Ih?function(o,u,l,m){if(!Eh(o.precondition,u))return l;const w=o.value.clone(),C=kE(o.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Us?function(o,u,l,m){if(!Eh(o.precondition,u))return l;const w=kE(o.fieldTransforms,m,u),C=u.data;return C.setAll(Ep(o)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,Eh(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function jC(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=h_(r.transform,o||null);null!=u&&(null===t&&(t=wr.empty()),t.set(r.field,u))}return t||null}function OE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&dh(t,r,(o,u)=>function BC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ec&&r instanceof ec||t instanceof Dl&&r instanceof Dl?dh(t.elements,r.elements,Yo):t instanceof wh&&r instanceof wh?Yo(t.gt,r.gt):t instanceof Il&&r instanceof Il);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ih extends ls{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Us extends ls{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Ep(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function PE(n,e,t){const r=new Map;rt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,AE(l,m,t[o]))}return r}function kE(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,SE(u,l,e))}return r}class Cl extends ls{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Im extends ls{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class p_{constructor(e){this.count=e}}var Jn,Jt;function Dm(n){switch(n){default:return Qe();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function g_(n){if(void 0===n)return zn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Jn.OK:return ae.OK;case Jn.CANCELLED:return ae.CANCELLED;case Jn.UNKNOWN:return ae.UNKNOWN;case Jn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Jn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Jn.INTERNAL:return ae.INTERNAL;case Jn.UNAVAILABLE:return ae.UNAVAILABLE;case Jn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Jn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Jn.NOT_FOUND:return ae.NOT_FOUND;case Jn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Jn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Jn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Jn.ABORTED:return ae.ABORTED;case Jn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Jn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Jn.DATA_LOSS:return ae.DATA_LOSS;default:return Qe()}}(Jt=Jn||(Jn={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class Qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){fh(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return MC(this.inner)}size(){return this.innerSize}}const m_=new qn(He.comparator);function qi(){return m_}const FE=new qn(He.comparator);function Ip(...n){let e=FE;for(const t of n)e=e.insert(t.key,t);return e}function LE(n){let e=FE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function po(){return Dh()}function Cm(){return Dh()}function Dh(){return new Qo(n=>n.toString(),(n,e)=>n.isEqual(e))}const $C=new qn(He.comparator),VE=new ln(He.comparator);function Ut(...n){let e=VE;for(const t of n)e=e.add(t);return e}const HC=new ln(Nt);function Dp(){return HC}class Ch{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Cp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ch(ut.min(),o,Dp(),qi(),Ut())}}class Cp{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Cp(r,t,Ut(),Ut(),Ut())}}class bp{constructor(e,t,r,o){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=o}}class UE{constructor(e,t){this.targetId=e,this.Et=t}}class di{constructor(e,t,r=_r.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class bl{constructor(){this.At=0,this.Rt=zC(),this.bt=_r.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Ut(),t=Ut(),r=Ut();return this.Rt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Qe()}}),new Cp(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=zC()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class GC{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=qi(),this.qt=BE(),this.Ut=new ln(Nt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,o)=>{this.zt(o)&&t(o)})}Jt(e){const t=e.targetId,r=e.Et.count,o=this.Yt(t);if(o){const u=o.target;if(gp(u))if(0===r){const l=new He(u.path);this.Qt(t,l,yn.newNoDocument(l,ut.min()))}else rt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,l)=>{const m=this.Yt(l);if(m){if(u.current&&gp(m.target)){const w=new He(m.target.path);null!==this.Lt.get(w)||this.te(l,w)||this.Qt(l,w,yn.newNoDocument(w,e))}u.St&&(t.set(l,u.Ct()),u.xt())}});let r=Ut();this.qt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const C=this.Yt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Lt.forEach((u,l)=>l.setReadTime(e));const o=new Ch(e,t,this.Ut,this.Lt,r);return this.Lt=qi(),this.qt=BE(),this.Ut=new ln(Nt),o}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const o=this.Wt(e);this.te(e,t)?o.Nt(t,1):o.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new bl,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new ln(Nt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||xe("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new bl),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function BE(){return new qn(He.comparator)}function zC(){return new qn(He.comparator)}const WS={asc:"ASCENDING",desc:"DESCENDING"},jE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$E={and:"AND",or:"OR"};class Tp{constructor(e,t){this.databaseId=e,this.wt=t}}function bh(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bm(n,e){return n.wt?e.toBase64():e.toUint8Array()}function qC(n,e){return bh(n,e.toTimestamp())}function Kn(n){return rt(!!n),ut.fromTimestamp(function(e){const t=ka(e);return new Pn(t.seconds,t.nanos)}(n))}function y_(n,e){return(t=n,new pt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function HE(n){const e=pt.fromString(n);return rt(QE(e)),e}function Sp(n,e){return y_(n.databaseId,e.path)}function Bs(n,e){const t=HE(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(Sm(t))}function Tm(n,e){return y_(n.databaseId,e)}function v_(n){const e=HE(n);return 4===e.length?pt.emptyPath():Sm(e)}function tc(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Sm(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function WC(n,e,t){return{name:Sp(n,e),fields:t.value.mapValue.fields}}function __(n,e,t){const r=Bs(n,e.name),o=Kn(e.updateTime),u=e.createTime?Kn(e.createTime):ut.min(),l=new wr({mapValue:{fields:e.fields}}),m=yn.newFoundDocument(r,o,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Jo(n,e){let t;if(e instanceof Ih)t={update:WC(n,e.key,e.value)};else if(e instanceof Cl)t={delete:Sp(n,e.key)};else if(e instanceof Us)t={update:WC(n,e.key,e.data),updateMask:YE(e.fieldMask)};else{if(!(e instanceof Im))return Qe();t={verify:Sp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Il)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ec)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Dl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wh)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw Qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:qC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Qe()),t;var o}function w_(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?kn.updateTime(Kn(o.updateTime)):void 0!==o.exists?kn.exists(o.exists):kn.none():kn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(rt("REQUEST_TIME"===l.setToServerValue),m=new Il):"appendMissingElements"in l?m=new ec(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Dl(l.removeAllFromArray.values||[]):"increment"in l?m=new wh(u,l.increment):Qe();const w=Vn.fromServerFormat(l.fieldPath);return new _p(w,m)}(n,o)):[];var o;if(e.update){const o=Bs(n,e.update.name),u=new wr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Gi((e.updateMask.fieldPaths||[]).map(C=>Vn.fromServerFormat(C)));return new Us(o,u,l,t,r)}return new Ih(o,u,t,r)}if(e.delete){const o=Bs(n,e.delete);return new Cl(o,t)}if(e.verify){const o=Bs(n,e.verify);return new Im(o,t)}return Qe()}function Am(n,e){return{documents:[Tm(n,e.path)]}}function qE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Tm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Tm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0!==w.length)return E_(cn.create(w,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Tl((A=C).field),direction:ZC(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(C=e.limit,n.wt||hm(C)?C:{value:C});var C,m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function WE(n){let e=v_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){rt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const N=KE(A);return N instanceof cn&&fE(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new yh(Th((N=A).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(A){let N;return N="object"==typeof A?A.value:A,hm(N)?null:N}(t.limit));let w=null;var A;t.startAt&&(w=new La((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new La(A.values||[],!A.before)}(t.endAt)),_E(e,o,l,u,m,"F",w,C)}function KE(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Th(e.unaryFilter.field);return Qt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Th(e.unaryFilter.field);return Qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Th(e.unaryFilter.field);return Qt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Th(e.unaryFilter.field);return Qt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}(n):void 0!==n.fieldFilter?Qt.create(Th((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return cn.create(e.compositeFilter.filters.map(t=>KE(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Qe()}}(e.compositeFilter.op))}(n):Qe();var e}function ZC(n){return WS[n]}function YC(n){return jE[n]}function ZE(n){return $E[n]}function Tl(n){return{fieldPath:n.canonicalString()}}function Th(n){return Vn.fromServerFormat(n.fieldPath)}function E_(n){return n instanceof Qt?function(e){if("=="===e.op){if(aE(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NAN"}};if(ym(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(aE(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NOT_NAN"}};if(ym(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(e.field),op:YC(e.op),value:e.value}}}(n):n instanceof cn?function(e){const t=e.getFilters().map(r=>E_(r));return 1===t.length?t[0]:{compositeFilter:{op:ZE(e.op),filters:t}}}(n):Qe()}function YE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ti(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=XE(e)),e=JE(n.get(t),e);return XE(e)}function JE(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function XE(n){return n+"\x01\x01"}function go(n){const e=n.length;if(rt(e>=2),2===e)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&Qe(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:Qe()}u=l+2}return new pt(r)}const I_=["userId","batchId"];function Ap(n,e){return[n,Ti(e)]}function D_(n,e,t){return[n,Ti(e),t]}const QC={},JC=["prefixPath","collectionGroup","readTime","documentId"],ZS=["prefixPath","collectionGroup","documentId"],eI=["collectionGroup","readTime","prefixPath","documentId"],YS=["canonicalId","targetId"],QS=["targetId","path"],JS=["path","targetId"],XS=["collectionId","parent"],eA=["indexId","uid"],tA=["uid","sequenceNumber"],nA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rA=["indexId","uid","orderedDocumentKey"],Mm=["userId","collectionPath","documentId"],iA=["userId","collectionPath","largestBatchId"],tI=["userId","collectionGroup","largestBatchId"],Mp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nI=[...Mp,"documentOverlays"],C_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],XC=C_,b_=[...XC,"indexConfiguration","indexState","indexEntries"];class xm extends op{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function kr(n,e){const t=Ge(n);return bi.M(t.se,e)}class Rm{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&f_(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ba(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ba(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Cm();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const w=NE(l,m);null!==w&&r.set(o.key,w),l.isValidDocument()||l.convertToNoDocument(ut.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ut())}isEqual(e){return this.batchId===e.batchId&&dh(this.mutations,e.mutations,(t,r)=>OE(t,r))&&dh(this.baseMutations,e.baseMutations,(t,r)=>OE(t,r))}}class rI{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){rt(e.mutations.length===r.length);let o=$C;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new rI(e,t,r,o)}}class iI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nc{constructor(e,t,r,o,u=ut.min(),l=ut.min(),m=_r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new nc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class sI{constructor(e){this.ie=e}}function oI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:T_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Sp(o=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:bh(o,u.version.toTimestamp()),createTime:bh(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Sh(e.version)};else{if(!e.isUnknownDocument())return Qe();r.unknownDocument={path:t.path.toArray(),version:Sh(e.version)}}var o,u;return r}function T_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Sh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ah(n){const e=new Pn(n.seconds,n.nanoseconds);return ut.fromTimestamp(e)}function Sl(n,e){const t=(e.baseMutations||[]).map(u=>w_(n.ie,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>w_(n.ie,u)),o=Pn.fromMillis(e.localWriteTimeMs);return new Rm(e.batchId,o,t,r)}function xp(n){const e=Ah(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ah(n.lastLimboFreeSnapshotVersion):ut.min();let r;var o;return void 0!==n.query.documents?(rt(1===(o=n.query).documents.length),r=zi(_h(v_(o.documents[0])))):r=zi(WE(n.query)),new nc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function aI(n,e){const t=Sh(e.snapshotVersion),r=Sh(e.lastLimboFreeSnapshotVersion);let o;o=gp(e.target)?Am(n.ie,e.target):qE(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Va(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function uI(n){const e=WE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Em(e,e.limit,"L"):e}function S_(n,e){return new iI(e.largestBatchId,w_(n.ie,e.overlayMutation))}function A_(n,e){const t=e.path.lastSegment();return[n,Ti(e.path.popLast()),t]}function M_(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Sh(r.readTime),documentKey:Ti(r.documentKey.path),largestBatchId:r.largestBatchId}}class sA{getBundleMetadata(e,t){return js(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Ah(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return js(e).put({bundleId:(r=t).id,createTime:Sh(Kn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return cI(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:uI(o.bundledQuery),readTime:Ah(o.readTime)};var o})}saveNamedQuery(e,t){return cI(e).put({name:(r=t).name,readTime:Sh(Kn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function js(n){return kr(n,"bundles")}function cI(n){return kr(n,"namedQueries")}class Mh{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Mh(e,t.uid||"")}getOverlay(e,t){return Rp(e).get(A_(this.userId,t)).next(r=>r?S_(this.yt,r):null)}getOverlays(e,t){const r=po();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new iI(t,l);o.push(this.oe(e,m))}),oe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(Ti(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Rp(e).Y("collectionPathOverlayIndex",m))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=po(),u=Ti(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Rp(e).W("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const C=S_(this.yt,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=po();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rp(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,C,A)=>{const N=S_(this.yt,C);u.size()<o||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):A.done()}).next(()=>u)}oe(e,t){return Rp(e).put(function(r,o,u){const[l,m,w]=A_(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Jo(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function Rp(n){return kr(n,"documentOverlays")}class xh{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Dn(e.integerValue));else if("doubleValue"in e){const r=Dn(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),fm(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(vl(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?uE(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Qe()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const o of Object.keys(r))this.de(o,t),this.ce(r[o],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const o of r)this.ce(o,t)}me(e,t){this.he(t,37),He.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function $s(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function lI(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=$s(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}xh.Ie=new xh;class x_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const o=t.codePointAt(0);this.Ee(240|o>>>18),this.Ee(128|63&o>>>12),this.Ee(128|63&o>>>6),this.Ee(128|63&o)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const o=t.codePointAt(0);this.be(240|o>>>18),this.be(128|63&o>>>12),this.be(128|63&o>>>6),this.be(128|63&o)}}this.Pe()}Se(e){const t=this.De(e),r=lI(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}xe(e){const t=this.De(e),r=lI(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class eb{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class tb{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Al{constructor(){this.$e=new x_,this.Be=new eb(this.$e),this.Le=new tb(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class rc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new rc(this.indexId,this.documentKey,this.arrayValue,r)}}function ja(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=dI(n.arrayValue,e.arrayValue),0!==t?t:(t=dI(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function dI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){rt(e.collectionGroup===this.collectionId);const t=um(e);if(void 0!==t&&!this.We(t))return!1;const r=Ku(e);let o=0,u=0;for(;o<r.length&&this.We(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Qe){const l=r[o];if(!this.ze(this.Qe,l)||!this.He(this.Ke[u++],l))return!1;++o}for(;o<r.length;++o){const l=r[o];if(u>=this.Ke.length||!this.He(this.Ke[u++],l))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function R_(n){var e,t;if(rt(n instanceof Qt||n instanceof cn),n instanceof Qt){if(n instanceof r_){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Qt.create(n.field,"==",u)))||[];return cn.create(o,"or")}return n}const r=n.filters.map(o=>R_(o));return cn.create(r,n.op)}function nb(n){if(0===n.getFilters().length)return[];const e=Xo(R_(n));return rt(Pm(e)),Om(e)||N_(e)?[e]:e.getFilters()}function Om(n){return n instanceof Qt}function N_(n){return n instanceof cn&&fE(n)}function Pm(n){return Om(n)||N_(n)||function(e){if(e instanceof cn&&Jv(e)){for(const t of e.getFilters())if(!Om(t)&&!N_(t))return!1;return!0}return!1}(n)}function Xo(n){if(rt(n instanceof Qt||n instanceof cn),n instanceof Qt)return n;if(1===n.filters.length)return Xo(n.filters[0]);const e=n.filters.map(r=>Xo(r));let t=cn.create(e,n.op);return t=Hs(t),Pm(t)?t:(rt(t instanceof cn),rt(mh(t)),rt(t.filters.length>1),t.filters.reduce((r,o)=>km(r,o)))}function km(n,e){let t;return rt(n instanceof Qt||n instanceof cn),rt(e instanceof Qt||e instanceof cn),t=n instanceof Qt?e instanceof Qt?cn.create([n,e],"and"):Fm(n,e):e instanceof Qt?Fm(e,n):function(r,o){if(rt(r.filters.length>0&&o.filters.length>0),mh(r)&&mh(o))return gE(r,o.getFilters());const u=Jv(r)?r:o,l=Jv(r)?o:r,m=u.filters.map(w=>km(w,l));return cn.create(m,"or")}(n,e),Hs(t)}function Fm(n,e){if(mh(e))return gE(e,n.getFilters());{const t=e.filters.map(r=>km(n,r));return cn.create(t,"or")}}function Hs(n){if(rt(n instanceof Qt||n instanceof cn),n instanceof Qt)return n;const e=n.getFilters();if(1===e.length)return Hs(e[0]);if(Xv(n))return n;const t=e.map(o=>Hs(o)),r=[];return t.forEach(o=>{o instanceof Qt?r.push(o):o instanceof cn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:cn.create(r,n.op)}class rb{constructor(){this.Je=new fI}addToCollectionParentIndex(e,t){return this.Je.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(us.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(us.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class fI{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new ln(pt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new ln(pt.comparator)).toArray()}}const Lm=new Uint8Array(0);class ib{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new fI,this.Xe=new Qo(r=>Va(r),(r,o)=>vh(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:Ti(o)};return pI(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[ml(t),""],!1,!0);return pI(e).W(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(go(l.parent))}return r})}addFieldIndex(e,t){const r=Op(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=Vm(e);return u.next(m=>{l.put(M_(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Op(e),o=Vm(e),u=Np(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Np(e);let o=!0;const u=new Map;return oe.forEach(this.Ze(t),l=>this.tn(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=Ut();const m=[];return oe.forEach(u,(w,C)=>{var A;xe("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Bt=>`${Bt.fieldPath}:${Bt.kind}`).join(",")}`} to execute ${Va(t)}`);const N=function(Bt,jt){const Ft=um(jt);if(void 0===Ft)return null;for(const qt of mp(Bt,Ft.fieldPath))switch(qt.op){case"array-contains-any":return qt.value.arrayValue.values||[];case"array-contains":return[qt.value]}return null}(C,w),$=function(Bt,jt){const Ft=new Map;for(const qt of Ku(jt))for(const Yr of mp(Bt,qt.fieldPath))switch(Yr.op){case"==":case"in":Ft.set(qt.fieldPath.canonicalString(),Yr.value);break;case"not-in":case"!=":return Ft.set(qt.fieldPath.canonicalString(),Yr.value),Array.from(Ft.values())}return null}(C,w),te=function(Bt,jt){const Ft=[];let qt=!0;for(const Yr of Ku(jt)){const w0=0===Yr.kind?o_(Bt,Yr.fieldPath,Bt.startAt):vE(Bt,Yr.fieldPath,Bt.startAt);Ft.push(w0.value),qt&&(qt=w0.inclusive)}return new La(Ft,qt)}(C,w),he=function(Bt,jt){const Ft=[];let qt=!0;for(const Yr of Ku(jt)){const w0=0===Yr.kind?vE(Bt,Yr.fieldPath,Bt.endAt):o_(Bt,Yr.fieldPath,Bt.endAt);Ft.push(w0.value),qt&&(qt=w0.inclusive)}return new La(Ft,qt)}(C,w),Pe=this.en(w,C,te),je=this.en(w,C,he),Ht=this.nn(w,C,$),zt=this.sn(w.indexId,N,Pe,te.inclusive,je,he.inclusive,Ht);return oe.forEach(zt,Bt=>r.J(Bt,t.limit).next(jt=>{jt.forEach(Ft=>{const qt=He.fromSegments(Ft.documentKey);l.has(qt)||(l=l.add(qt),m.push(qt))})}))}).next(()=>m)}return oe.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:nb(cn.create(e.filters,"and")).map(r=>wm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,o,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),A=[];for(let N=0;N<w;++N){const $=t?this.rn(t[N/C]):Lm,te=this.on(e,$,r[N%C],o),he=this.un(e,$,u[N%C],l),Pe=m.map(je=>this.on(e,$,je,!0));A.push(...this.createRange(te,he,Pe))}return A}on(e,t,r,o){const u=new rc(e,He.empty(),t,r);return o?u:u.Ue()}un(e,t,r,o){const u=new rc(e,He.empty(),t,r);return o?u.Ue():u}tn(e,t){const r=new hI(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.je(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const o=this.Ze(t);return oe.forEach(o,u=>this.tn(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new ln(Vn.comparator),C=!1;for(const A of m.filters)for(const N of A.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?C=!0:w=w.add(N.field));for(const A of m.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(C?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}cn(e,t){const r=new Al;for(const o of Ku(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.qe(o.kind);xh.Ie.ue(u,l)}return r.Fe()}rn(e){const t=new Al;return xh.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new Al;return xh.Ie.ue(wl(this.databaseId,t),r.qe(function(o){const u=Ku(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let o=[];o.push(new Al);let u=0;for(const l of Ku(e)){const m=r[u++];for(const w of o)if(this.hn(t,l.fieldPath)&&dp(m))o=this.ln(o,l,m);else{const C=w.qe(l.kind);xh.Ie.ue(m,C)}}return this.fn(o)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const w=new Al;w.seed(m.Fe()),xh.Ie.ue(l,w.qe(t.kind)),u.push(w)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof Qt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Op(e),o=Vm(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return oe.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{l.push(function(C,A){const N=A?new sp(A.sequenceNumber,new us(Ah(A.readTime),new He(go(A.documentKey)),A.largestBatchId)):sp.empty(),$=C.fields.map(([te,he])=>new ip(Vn.fromServerFormat(te),he));return new am(C.indexId,C.collectionGroup,$,N)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Nt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Op(e),u=Vm(e);return this.dn(e).next(l=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>oe.forEach(m,w=>u.put(M_(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),oe.forEach(m,w=>this._n(e,o,w).next(C=>{const A=this.wn(u,w);return C.isEqual(A)?oe.resolve():this.mn(e,u,w,C,A)}))))})}gn(e,t,r,o){return Np(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,o){return Np(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const o=Np(e);let u=new ln(ja);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,m)=>{u=u.add(new rc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}wn(e,t){let r=new ln(ja);const o=this.cn(t,e);if(null==o)return r;const u=um(t);if(null!=u){const l=e.data.field(u.fieldPath);if(dp(l))for(const m of l.arrayValue.values||[])r=r.add(new rc(t.indexId,e.key,this.rn(m),o))}else r=r.add(new rc(t.indexId,e.key,Lm,o));return r}mn(e,t,r,o,u){xe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,C,A,N){const $=m.getIterator(),te=w.getIterator();let he=pp($),Pe=pp(te);for(;he||Pe;){let je=!1,Ht=!1;if(he&&Pe){const zt=C(he,Pe);zt<0?Ht=!0:zt>0&&(je=!0)}else null!=he?Ht=!0:je=!0;je?(A(Pe),Pe=pp(te)):Ht?(N(he),he=pp($)):(he=pp($),Pe=pp(te))}}(o,u,ja,m=>{l.push(this.gn(e,t,r,m))},m=>{l.push(this.yn(e,t,r,m))}),oe.waitFor(l)}dn(e){let t=1;return Vm(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>ja(l,m)).filter((l,m,w)=>!m||0!==ja(l,w[m-1]));const o=[];o.push(e);for(const l of r){const m=ja(l,e),w=ja(l,t);if(0===m)o[0]=e.Ue();else if(m>0&&w<0)o.push(l),o.push(l.Ue());else if(w>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.pn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,Lm,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,Lm,[]]))}return u}pn(e,t){return ja(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(O_)}getMinOffset(e,t){return oe.mapArray(this.Ze(t),r=>this.tn(e,r).next(o=>o||Qe())).next(O_)}}function pI(n){return kr(n,"collectionParents")}function Np(n){return kr(n,"indexEntries")}function Op(n){return kr(n,"indexConfiguration")}function Vm(n){return kr(n,"indexState")}function O_(n){rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Wv(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new us(e.readTime,e.documentKey,t)}const gI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Si{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Si(e,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sb(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:l},(A,N,$)=>(m++,$.delete()));u.push(w.next(()=>{rt(1===m)}));const C=[];for(const A of t.mutations){const N=D_(e,A.key.path,t.batchId);u.push(o.delete(N)),C.push(A.key)}return oe.waitFor(u).next(()=>C)}function Rh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Qe();e=n.noDocument}return JSON.stringify(e).length}Si.DEFAULT_COLLECTION_PERCENTILE=10,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Si.DEFAULT=new Si(41943040,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Si.DISABLED=new Si(-1,0,0);class Pp{constructor(e,t,r,o){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static re(e,t,r,o){rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Pp(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).Z({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Ml(e),l=$a(e);return l.add({}).next(m=>{rt("number"==typeof m);const w=new Rm(m,t,r,o),C=function($,te,he){const Pe=he.baseMutations.map(Ht=>Jo($.ie,Ht)),je=he.mutations.map(Ht=>Jo($.ie,Ht));return{userId:te,batchId:he.batchId,localWriteTimeMs:he.localWriteTime.toMillis(),baseMutations:Pe,mutations:je}}(this.yt,this.userId,w),A=[];let N=new ln(($,te)=>Nt($.canonicalString(),te.canonicalString()));for(const $ of o){const te=D_(this.userId,$.key.path,m);N=N.add($.key.path.popLast()),A.push(l.put(C)),A.push(u.put(te,QC))}return N.forEach($=>{A.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),oe.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return $a(e).get(t).next(r=>r?(rt(r.userId===this.userId),Sl(this.yt,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return $a(e).Z({index:"userMutationsIndex",range:o},(l,m,w)=>{m.userId===this.userId&&(rt(m.batchId>=r),u=Sl(this.yt,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $a(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).W("userMutationsIndex",t).next(r=>r.map(o=>Sl(this.yt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ap(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Ml(e).Z({range:o},(l,m,w)=>{const[C,A,N]=l,$=go(A);if(C===this.userId&&t.path.isEqual($))return $a(e).get(N).next(te=>{if(!te)throw Qe();rt(te.userId===this.userId),u.push(Sl(this.yt,te))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Nt);const o=[];return t.forEach(u=>{const l=Ap(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=Ml(e).Z({range:m},(C,A,N)=>{const[$,te,he]=C,Pe=go(te);$===this.userId&&u.path.isEqual(Pe)?r=r.add(he):N.done()});o.push(w)}),oe.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Ap(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new ln(Nt);return Ml(e).Z({range:l},(w,C,A)=>{const[N,$,te]=w,he=go($);N===this.userId&&r.isPrefixOf(he)?he.length===o&&(m=m.add(te)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push($a(e).get(u).next(l=>{if(null===l)throw Qe();rt(l.userId===this.userId),r.push(Sl(this.yt,l))}))}),oe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return sb(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Ml(e).Z({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=go(u[1]);o.push(w)}else m.done()}).next(()=>{rt(0===o.length)})})}containsKey(e,t){return P_(e,this.userId,t)}Rn(e){return k_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function P_(n,e,t){const r=Ap(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Ml(n).Z({range:u,X:!0},(m,w,C)=>{const[A,N,$]=m;A===e&&N===o&&(l=!0),C.done()}).next(()=>l)}function $a(n){return kr(n,"mutations")}function Ml(n){return kr(n,"documentMutations")}function k_(n){return kr(n,"mutationQueues")}class ea{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ea(0)}static vn(){return new ea(-1)}}class Um{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new ea(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>ut.fromTimestamp(new Pn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xl(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return xl(e).Z((l,m)=>{const w=xp(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>oe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return xl(e).Z((r,o)=>{const u=xp(o);t(u)})}Vn(e){return mI(e).get("targetGlobalKey").next(t=>(rt(null!==t),t))}Sn(e,t){return mI(e).put("targetGlobalKey",t)}Dn(e,t){return xl(e).put(aI(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Va(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return xl(e).Z({range:o,index:"queryTargetsIndex"},(l,m,w)=>{const C=xp(m);vh(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=ic(e);return t.forEach(l=>{const m=Ti(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(o)}removeMatchingKeys(e,t,r){const o=ic(e);return oe.forEach(t,u=>{const l=Ti(u.path);return oe.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ic(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ic(e);let u=Ut();return o.Z({range:r,X:!0},(l,m,w)=>{const C=go(l[1]),A=new He(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Ti(t.path),o=IDBKeyRange.bound([r],[ml(r)],!1,!0);let u=0;return ic(e).Z({index:"documentTargetsIndex",X:!0,range:o},([l,m],w,C)=>{0!==l&&(u++,C.done())}).next(()=>u>0)}ne(e,t){return xl(e).get(t).next(r=>r?xp(r):null)}}function xl(n){return kr(n,"targets")}function mI(n){return kr(n,"targetGlobal")}function ic(n){return kr(n,"targetDocuments")}function ob([n,e],[t,r]){const o=Nt(n,t);return 0===o?Nt(e,r):o}class oA{constructor(e){this.xn=e,this.buffer=new ln(ob),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ob(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Zu(r)?xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Pa(r)}yield t.Fn(3e5)}))}}class yI{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(cs.at);const r=new oA(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(gI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gI):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,o,u,l,m,w,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,l=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),Gv()<=Ho.in.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-A}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class ab{constructor(e,t){this.db=e,this.garbageCollector=new yI(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return Bm(e,r)}removeReference(e,t,r){return Bm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Bm(e,t)}Gn(e,t){return function(r,o){let u=!1;return k_(r).tt(l=>P_(r,l,o).next(m=>(m&&(u=!0),oe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(l,m)=>{if(m<=t){const w=this.Gn(e,l).next(C=>{if(!C)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,ut.min()),ic(e).delete([0,Ti(l.path)])))});o.push(w)}}).next(()=>oe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Bm(e,t)}Kn(e,t){const r=ic(e);let o,u=cs.at;return r.Z({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:C})=>{0===l?(u!==cs.at&&t(new He(go(o)),u),u=C,o=w):u=cs.at}).next(()=>{u!==cs.at&&t(new He(go(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Bm(n,e){return ic(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ti(e.path),sequenceNumber:r}));var r}class vI{constructor(){this.changes=new Qo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uA{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Nh(e).put(r)}removeEntry(e,t,r){return Nh(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],T_(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=yn.newInvalidDocument(t);return Nh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(kp(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:yn.newInvalidDocument(t)};return Nh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(kp(t))},(o,u)=>{r={document:this.jn(t,u),size:Rh(u)}}).next(()=>r)}getEntries(e,t){let r=qi();return this.zn(e,t,(o,u)=>{const l=this.jn(o,u);r=r.insert(o,l)}).next(()=>r)}Hn(e,t){let r=qi(),o=new qn(He.comparator);return this.zn(e,t,(u,l)=>{const m=this.jn(u,l);r=r.insert(u,m),o=o.insert(u,Rh(l))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let o=new ln(_I);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(kp(o.first()),kp(o.last())),l=o.getIterator();let m=l.getNext();return Nh(e).Z({index:"documentKeyIndex",range:u},(w,C,A)=>{const N=He.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&_I(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,C),m=l.hasNext()?l.getNext():null),m?A.j(kp(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),T_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nh(e).W(IDBKeyRange.bound(o,u,!0)).next(l=>{let m=qi();for(const w of l){const C=this.jn(He.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=qi();const l=Fp(t,r),m=Fp(t,us.max());return Nh(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,C,A)=>{const N=this.jn(He.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new cA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return cb(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}Qn(e,t){return cb(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Nm(n,e){let t;if(e.document)t=__(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),o=Ah(e.noDocument.readTime);t=yn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qe();{const r=He.fromSegments(e.unknownDocument.path),o=Ah(e.unknownDocument.version);t=yn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Pn(r[0],r[1]);return ut.fromTimestamp(o)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(ut.min()))return r}return yn.newInvalidDocument(e)}}function ub(n){return new uA(n)}class cA extends vI{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Qo(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new ln((u,l)=>Nt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=oI(this.Yn.yt,l);o=o.add(u.path.popLast());const C=Rh(w);r+=C-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=oI(this.Yn.yt,l.convertToNoDocument(ut.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function cb(n){return kr(n,"remoteDocumentGlobal")}function Nh(n){return kr(n,"remoteDocumentsV14")}function kp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Fp(n,e){const t=e.documentKey.path.toArray();return[n,T_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _I(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Nt(t[u],r[u]),o)return o;return o=Nt(t.length,r.length),o||(o=Nt(t[t.length-2],r[r.length-2]),o||Nt(t[t.length-1],r[r.length-1]))}class lb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class F_{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Ba(r.mutation,o,Gi.empty(),Pn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ut()){const o=po();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Ip();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=po();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ut()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=qi();const l=Dh(),m=Dh();return t.forEach((w,C)=>{const A=r.get(C.key);o.has(C.key)&&(void 0===A||A.mutation instanceof Us)?u=u.insert(C.key,C):void 0!==A&&(l.set(C.key,A.mutation.getFieldMask()),Ba(A.mutation,C,A.mutation.getFieldMask(),Pn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,A)=>l.set(C,A)),t.forEach((C,A)=>{var N;return m.set(C,new lb(A,null!==(N=l.get(C))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Dh();let o=new qn((l,m)=>l-m),u=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let A=r.get(w)||Gi.empty();A=m.applyToLocalView(C,A),r.set(w,A);const N=(o.get(m.batchId)||Ut()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,A=w.value,N=Cm();A.forEach($=>{if(!u.has($)){const te=NE(t.get($),r.get($));null!==te&&N.set($,te),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,C,N))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return He.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):u_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):oe.resolve(po());let m=-1,w=u;return l.next(C=>oe.forEach(C,(A,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(A)?oe.resolve():this.remoteDocumentCache.getEntry(e,A).next($=>{w=w.insert(A,$)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,Ut())).next(A=>({batchId:m,changes:LE(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next(r=>{let o=Ip();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Ip();return this.indexManager.getCollectionParents(e,o).next(l=>oe.forEach(l,m=>{const w=(C=t,A=m.child(o),new Ua(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const C=w.getKey();null===o.get(C)&&(o=o.insert(C,yn.newInvalidDocument(C)))});let l=Ip();return o.forEach((m,w)=>{const C=u.get(m);void 0!==C&&Ba(C.mutation,w,Gi.empty(),Pn.now()),d_(t,w)&&(l=l.insert(m,w))}),l})}}class Rl{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Kn(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:uI(r.bundledQuery),readTime:Kn(r.readTime)}),oe.resolve();var r}}class wI{constructor(){this.overlays=new qn(He.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=po();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.oe(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const o=po(),u=t.length+1,l=new He(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new qn((C,A)=>C-A);const l=this.overlays.getIterator();for(;l.hasNext();){const C=l.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=po(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const m=po(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,A)=>m.set(C,A)),!(m.size()>=o)););return oe.resolve(m)}oe(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new iI(t,r));let u=this.es.get(t);void 0===u&&(u=Ut(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class Lp{constructor(){this.ns=new ln(ar.ss),this.rs=new ln(ar.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ar(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ar(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new He(new pt([])),r=new ar(t,e),o=new ar(t,e+1),u=[];return this.rs.forEachInRange([r,o],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new He(new pt([])),r=new ar(t,e),o=new ar(t,e+1);let u=Ut();return this.rs.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new ar(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ar{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return He.comparator(e.key,t.key)||Nt(e._s,t._s)}static os(e,t){return Nt(e._s,t._s)||He.comparator(e.key,t.key)}}class db{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ln(ar.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const l=new Rm(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.gs=this.gs.add(new ar(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ar(t,0),o=new ar(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],l=>{const m=this.ys(l._s);u.push(m)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Nt);return t.forEach(o=>{const u=new ar(o,0),l=new ar(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],m=>{r=r.add(m._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const l=new ar(new He(u),0);let m=new ln(Nt);return this.gs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w._s)),!0)},l),oe.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){rt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,o=>{const u=new ar(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ar(t,0),o=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class L_{constructor(e){this.Es=e,this.docs=new qn(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let r=qi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():yn.newInvalidDocument(o))}),oe.resolve(r)}getAllFromCollection(e,t,r){let o=qi();const u=new He(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:m,value:{document:w}}=l.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Wv(hh(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Qe()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new V_(this)}getSize(e){return oe.resolve(this.size)}}class V_ extends vI{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class jm{constructor(e){this.persistence=e,this.Rs=new Qo(t=>Va(t),vh),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Lp,this.targetCount=0,this.vs=ea.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new ea(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),oe.waitFor(u).next(()=>o)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class hb{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new cs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new jm(this),this.indexManager=new rb,this.remoteDocumentCache=new L_(r=>this.referenceDelegate.xs(r)),this.yt=new sI(t),this.Ns=new Rl(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new db(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const o=new lA(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class lA extends op{constructor(e){super(),this.currentSequenceNumber=e}}class U_{constructor(e){this.persistence=e,this.Fs=new Lp,this.$s=null}static Bs(e){return new U_(e)}get Ls(){if(this.$s)return this.$s;throw Qe()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const o=He.fromPath(r);return this.qs(e,o).next(u=>{u||t.removeEntry(o,ut.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class dA{constructor(e){this.yt=e}$(e,t,r,o){const u=new lm("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I_,{unique:!0}),m.createObjectStore("documentMutations"),B_(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),B_(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ut.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").W().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I_,{unique:!0});const A=w.store("mutations"),N=C.map($=>A.put($));return oe.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Us(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(l=l.next(()=>this.Gs(u))),r<8&&o>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.js(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:Mm});w.createIndex("collectionPathOverlayIndex",iA,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",tI,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:JC});w.createIndex("documentKeyIndex",ZS),w.createIndex("collectionGroupIndex",eI)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:eA}).createIndex("sequenceNumberIndex",tA,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:nA}).createIndex("documentKeyIndex",rA,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=Rh(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>oe.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(m=>oe.forEach(m,w=>{rt(w.userId===u.userId);const C=Sl(this.yt,w);return sb(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((l,m)=>{const w=new pt(l),C=[0,Ti(w)];u.push(t.get(C).next(A=>A?oe.resolve():t.put({targetId:0,path:Ti(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:XS});const r=t.store("collectionParents"),o=new fI,u=l=>{if(o.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:Ti(w)})}};return t.store("remoteDocuments").Z({X:!0},(l,m)=>{const w=new pt(l);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,m,w],C)=>{const A=go(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=xp(o),l=aI(this.yt,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(C=l,C.document?new He(pt.fromString(C.document.name).popFirst(5)):C.noDocument?He.fromSegments(C.noDocument.path):C.unknownDocument?He.fromSegments(C.unknownDocument.path):Qe()).path.toArray();var C;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(A))}).next(()=>oe.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=ub(this.yt),u=new hb(U_.Bs,this.yt.ie);return r.W().next(l=>{const m=new Map;return l.forEach(w=>{var C;let A=null!==(C=m.get(w.userId))&&void 0!==C?C:Ut();Sl(this.yt,w).keys().forEach(N=>A=A.add(N)),m.set(w.userId,A)}),oe.forEach(m,(w,C)=>{const A=new Pr(C),N=Mh.re(this.yt,A),$=u.getIndexManager(A),te=Pp.re(A,this.yt,$,u.referenceDelegate);return new F_(o,te,N,$).recalculateAndSaveOverlaysForDocumentKeys(new xm(t,cs.at),w).next()})})}}function B_(n){n.createObjectStore("targetDocuments",{keyPath:QS}).createIndex("documentTargetsIndex",JS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",YS,{unique:!0}),n.createObjectStore("targetGlobal")}const j_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $_{constructor(e,t,r,o,u,l,m,w,C,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=m,this.Js=C,this.Ys=A,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=$=>Promise.resolve(),!$_.C())throw new Te(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ab(this,o),this.ii=t+"main",this.yt=new sI(w),this.ri=new bi(this.ii,this.Xs,new dA(this.yt)),this.Cs=new Um(this.referenceDelegate,this.yt),this.remoteDocumentCache=ub(this.yt),this.Ns=new sA,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&zn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(ae.FAILED_PRECONDITION,j_);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new cs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ge.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$m(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Zu(e))return xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Vp(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return $m(e).delete(this.clientId)}yi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=kr(r,"clientMetadata");return o.W().next(u=>{const l=e.Ii(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return oe.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):Vp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Te(ae.FAILED_PRECONDITION,j_);return!1}}return!(!this.networkEnabled||!this.inForeground)||$m(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const l=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||l&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&xe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new xm(t,cs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>$m(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Pp.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ib(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Mh.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){xe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?b_:14===l?XC:13===l?C_:12===l?nI:11===l?Mp:void Qe();var l;let m;return this.ri.runTransaction(e,o,u,w=>(m=new xm(w,this.Ss?this.Ss.next():cs.at),"readwrite-primary"===t?this.fi(m).next(C=>!!C||this.di(m)).next(C=>{if(!C)throw zn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Te(ae.FAILED_PRECONDITION,iE);return r(m)}).next(C=>this.wi(m).next(()=>C)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return Vp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(ae.FAILED_PRECONDITION,j_)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vp(e).put("owner",t)}static C(){return bi.C()}_i(e){const t=Vp(e);return t.get("owner").next(r=>this.mi(r)?(xe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(zn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,en.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return xe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){zn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vp(n){return kr(n,"owner")}function $m(n){return kr(n,"clientMetadata")}function Hm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Gm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Ut(),o=Ut();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gm(e,t.fromCache,r,o)}}class H_{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(a_(t))return oe.resolve(null);let r=zi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Em(t,null,"F"),r=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Ut(...u);return this.Ni.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.Fi(t,m);return this.$i(t,C,l,w.readTime)?this.ki(e,Em(t,null,"F")):this.Bi(e,C,t,w)}))})))}Oi(e,t,r,o){return a_(t)||o.isEqual(ut.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,o)?this.Mi(e,t):(Gv()<=Ho.in.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),l_(t)),this.Bi(e,l,t,rE(o,-1)))})}Fi(e,t){let r=new ln(DE(e));return t.forEach((o,u)=>{d_(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return Gv()<=Ho.in.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",l_(t)),this.Ni.getDocumentsMatchingQuery(e,t,us.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class fb{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.yt=o,this.qi=new qn(Nt),this.Ui=new Qo(u=>Va(u),vh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F_(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function EI(n,e,t,r){return new fb(n,e,t,r)}function G_(n,e){return Up.apply(this,arguments)}function Up(){return Up=(0,ge.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=Ut();for(const C of o){l.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}for(const C of u){m.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(C=>({ji:C,removedBatchIds:l,addedBatchIds:m}))})})}),Up.apply(this,arguments)}function hA(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,C){const A=w.batch,N=A.keys();let $=oe.resolve();return N.forEach(te=>{$=$.next(()=>C.getEntry(m,te)).next(he=>{const Pe=w.docVersions.get(te);rt(null!==Pe),he.version.compareTo(Pe)<0&&(A.applyToRemoteDocument(he,w),he.isValidDocument()&&(he.setReadTime(w.commitVersion),C.addEntry(he)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Ut();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function z_(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function q_(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.qi;const m=[];e.targetChanges.forEach((A,N)=>{const $=o.get(N);if(!$)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,N)));let te=$.withSequenceNumber(u.currentSequenceNumber);var he,Pe,je;e.targetMismatches.has(N)?te=te.withResumeToken(_r.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):A.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(A.resumeToken,r)),o=o.insert(N,te),Pe=te,je=A,(0===(he=$).resumeToken.approximateByteSize()||Pe.snapshotVersion.toMicroseconds()-he.snapshotVersion.toMicroseconds()>=3e8||je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,te))});let w=qi(),C=Ut();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(II(u,l,e.documentUpdates).next(A=>{w=A.Wi,C=A.zi})),!r.isEqual(ut.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return oe.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.qi=o,u))}function II(n,e,t){let r=Ut(),o=Ut();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=qi();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(ut.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):xe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{Wi:l,zi:o}})}function pb(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bp(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,oe.resolve(o)):t.Cs.allocateTargetId(r).next(l=>(o=new nc(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qi.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function jp(n,e,t){return W_.apply(this,arguments)}function W_(){return W_=(0,ge.Z)(function*(n,e,t){const r=Ge(n),o=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Zu(l))throw l;xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(o.target)}),W_.apply(this,arguments)}function zm(n,e,t){const r=Ge(n);let o=ut.min(),u=Ut();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,C){const A=Ge(m),N=A.Ui.get(C);return void 0!==N?oe.resolve(A.qi.get(N)):A.Cs.getTargetData(w,C)}(r,l,zi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?o:ut.min(),t?u:Ut())).next(m=>(mb(r,IE(e),m),{documents:m,Hi:u})))}function DI(n,e){const t=Ge(n),r=Ge(t.Cs),o=t.qi.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(l=>l?l.target:null))}function gb(n,e){const t=Ge(n),r=t.Ki.get(e)||ut.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,rE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(mb(t,e,o),o))}function mb(n,e,t){let r=n.Ki.get(e)||ut.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function CI(){return CI=(0,ge.Z)(function*(n,e,t,r){const o=Ge(n);let u=Ut(),l=qi();for(const C of t){const A=e.Ji(C.metadata.name);C.document&&(u=u.add(A));const N=e.Yi(C);N.setReadTime(e.Xi(C.metadata.readTime)),l=l.insert(A,N)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield Bp(o,(C=r,zi(_h(pt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>II(C,m,l).next(A=>(m.apply(C),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.Cs.addMatchingKeys(C,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,A.Wi,A.zi)).next(()=>A.Wi)))}),CI.apply(this,arguments)}function pA(n,e){return K_.apply(this,arguments)}function K_(){return K_=(0,ge.Z)(function*(n,e,t=Ut()){const r=yield Bp(n,zi(uI(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Kn(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(_r.EMPTY_BYTE_STRING,l);return o.qi=o.qi.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),K_.apply(this,arguments)}function yb(n,e){return`firestore_clients_${n}_${e}`}function vb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function bI(n,e){return`firestore_targets_${n}_${e}`}class Z_{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Te(o.error.code,o.error.message))),l?new Z_(e,t,o.state,u):(zn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Te(r.error.code,r.error.message))),u?new qm(e,r.state,o):(zn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Y_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Dp();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=Zv(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new Y_(e,u):(zn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class i{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new i(t.clientId,t.onlineState):(zn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class s{constructor(){this.activeTargetIds=Dp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new qn(Nt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=yb(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new s),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(yb(e.persistenceKey,o));if(u){const l=Y_.Zi(o,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(bI(this.persistenceKey,e));if(r){const o=qm.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bI(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xe("SharedClientState","READ",e,t),t}setItem(e,t){xe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(xe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void zn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let l=cs.at;if(null!=u)try{const m=JSON.parse(u);rt("number"==typeof m),l=m}catch(m){zn("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==cs.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new Z_(this.currentUser,e,t,r),u=vb(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=vb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=bI(this.persistenceKey,e),u=new qm(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Y_.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return Z_.Zi(new Pr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return qm.Zi(o,t)}yr(e){return i.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),l=[],m=[];return u.forEach(w=>{o.has(w)||l.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(l,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Dp();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class c{constructor(){this.Lr=new s,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new s,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class d{Ur(e){}shutdown(){}}class p{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const v={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class E{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class D extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const l=this.ho(e,t);xe("RestConnection","Sending: ",l,r);const m={};return this.lo(m,o,u),this.fo(e,l,m,r).then(w=>(xe("RestConnection","Received: ",w),w),w=>{throw qu("RestConnection",`${e} failed with error: `,w,"url: ",l,"request:",r),w})}_o(e,t,r,o,u,l){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ch,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${v[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,l)=>{const m=new IC;m.setWithCredentials(!0),m.listenOnce(_C.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Hv.NO_ERROR:const C=m.getResponseJson();xe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case Hv.TIMEOUT:xe("Connection",'RPC "'+e+'" timed out'),l(new Te(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Hv.HTTP_ERROR:const A=m.getStatus();if(xe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){let N=m.getResponseJson();Array.isArray(N)&&(N=N[0]);const $=N?.error;if($&&$.status&&$.message){const te=function(he){const Pe=he.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Pe)>=0?Pe:ae.UNKNOWN}($.status);l(new Te(te,$.message))}else l(new Te(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new Te(ae.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{xe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=yC(),l=vC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new EC({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");xe("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let A=!1,N=!1;const $=new E({Hr:he=>{N?xe("Connection","Not sending because WebChannel is closed:",he):(A||(xe("Connection","Opening WebChannel transport."),C.open(),A=!0),xe("Connection","WebChannel sending:",he),C.send(he))},Jr:()=>C.close()}),te=(he,Pe,je)=>{he.listen(Pe,Ht=>{try{je(Ht)}catch(zt){setTimeout(()=>{throw zt},0)}})};return te(C,sm.EventType.OPEN,()=>{N||xe("Connection","WebChannel transport opened.")}),te(C,sm.EventType.CLOSE,()=>{N||(N=!0,xe("Connection","WebChannel transport closed"),$.io())}),te(C,sm.EventType.ERROR,he=>{N||(N=!0,qu("Connection","WebChannel transport errored:",he),$.io(new Te(ae.UNAVAILABLE,"The operation could not be completed")))}),te(C,sm.EventType.MESSAGE,he=>{var Pe;if(!N){const je=he.data[0];rt(!!je);const Ht=je,zt=Ht.error||(null===(Pe=Ht[0])||void 0===Pe?void 0:Pe.error);if(zt){xe("Connection","WebChannel received error:",zt);const Bt=zt.status;let jt=function(qt){const Yr=Jn[qt];if(void 0!==Yr)return g_(Yr)}(Bt),Ft=zt.message;void 0===jt&&(jt=ae.INTERNAL,Ft="Unknown error status: "+Bt+" with message "+zt.message),N=!0,$.io(new Te(jt,Ft)),C.close()}else xe("Connection","WebChannel received:",je),$.ro(je)}}),te(l,wC.STAT_EVENT,he=>{he.stat===Zw.PROXY?xe("Connection","Detected buffering proxy"):he.stat===Zw.NOPROXY&&xe("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.so()},0),$}}function T(){return typeof window<"u"?window:null}function x(){return typeof document<"u"?document:null}function k(n){return new Tp(n,!0)}class G{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class J{constructor(e,t,r,o,u,l,m,w){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new G(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ge.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ge.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(zn(t.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Te(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ge.Z)(function*(){e.state=0,e.start()}))}Qo(e){return xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class me extends J{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function GE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Qe(),o=e.targetChange.targetIds||[],u=function(w,C){return w.wt?(rt(void 0===C||"string"==typeof C),_r.fromBase64String(C||"")):(rt(void 0===C||C instanceof Uint8Array),_r.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const C=void 0===w.code?ae.UNKNOWN:g_(w.code);return new Te(C,w.message||"")}(l);t=new di(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Bs(n,r.document.name),u=Kn(r.document.updateTime),l=r.document.createTime?Kn(r.document.createTime):ut.min(),m=new wr({mapValue:{fields:r.document.fields}}),w=yn.newFoundDocument(o,u,l,m);t=new bp(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,o=Bs(n,r.document),u=r.readTime?Kn(r.readTime):ut.min(),l=yn.newNoDocument(o,u);t=new bp([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=Bs(n,r.document);t=new bp([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Qe();{const r=e.filter,u=new p_(r.count||0);t=new UE(r.targetId,u)}}var w;return t}(this.yt,e),r=function(o){if(!("targetChange"in o))return ut.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?ut.min():u.readTime?Kn(u.readTime):ut.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=tc(this.yt),t.addTarget=function(o,u){let l;const m=u.target;return l=gp(m)?{documents:Am(o,m)}:{query:qE(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=bm(o,u.resumeToken):u.snapshotVersion.compareTo(ut.min())>0&&(l.readTime=bh(o,u.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function KS(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=tc(this.yt),t.removeTarget=e,this.Bo(t)}}class Le extends J{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function zE(n,e){return n&&n.length>0?(rt(void 0!==e),n.map(t=>function(r,o){let u=Kn(r.updateTime?r.updateTime:o);return u.isEqual(ut.min())&&(u=Kn(o)),new wp(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Kn(e.commitTime);return this.listener.Zo(r,t)}return rt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=tc(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jo(this.yt,r))};this.Bo(t)}}class ze extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=o,this.nu=!1}su(){if(this.nu)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ae.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(ae.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class Me{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(zn(t),this.ou=!1):xe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Ot{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(m=>{r.enqueueAndForget((0,ge.Z)(function*(){var w;Nl(l)&&(xe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ge.Z)(function*(C){const A=Ge(C);A._u.add(4),yield $p(A),A.gu.set("Unknown"),A._u.delete(4),yield pn(A)}),function(C){return w.apply(this,arguments)})(l))}))}),this.gu=new Me(r,o)}}function pn(n){return Un.apply(this,arguments)}function Un(){return Un=(0,ge.Z)(function*(n){if(Nl(n))for(const e of n.wu)yield e(!0)}),Un.apply(this,arguments)}function $p(n){return _b.apply(this,arguments)}function _b(){return _b=(0,ge.Z)(function*(n){for(const e of n.wu)yield e(!1)}),_b.apply(this,arguments)}function TI(n,e){const t=Ge(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Ib(t)?Eb(t):Km(t).ko()&&wb(t,e))}function Q_(n,e){const t=Ge(n),r=Km(t);t.du.delete(e),r.ko()&&gA(t,e),0===t.du.size&&(r.ko()?r.Fo():Nl(t)&&t.gu.set("Unknown"))}function wb(n,e){n.yu.Ot(e.targetId),Km(n).zo(e)}function gA(n,e){n.yu.Ot(e),Km(n).Ho(e)}function Eb(n){n.yu=new GC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Km(n).start(),n.gu.uu()}function Ib(n){return Nl(n)&&!Km(n).No()&&n.du.size>0}function Nl(n){return 0===Ge(n)._u.size}function mA(n){n.yu=void 0}function _R(n){return Db.apply(this,arguments)}function Db(){return Db=(0,ge.Z)(function*(n){n.du.forEach((e,t)=>{wb(n,e)})}),Db.apply(this,arguments)}function wR(n,e){return Cb.apply(this,arguments)}function Cb(){return Cb=(0,ge.Z)(function*(n,e){mA(n),Ib(n)?(n.gu.hu(e),Eb(n)):n.gu.set("Unknown")}),Cb.apply(this,arguments)}function ER(n,e,t){return bb.apply(this,arguments)}function bb(){return bb=(0,ge.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof di&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield SI(n,r)}else if(e instanceof bp?n.yu.Kt(e):e instanceof UE?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(ut.min()))try{const r=yield z_(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.yu.Zt(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.du.get(w);C&&o.du.set(w,C.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const w=o.du.get(m);if(!w)return;o.du.set(m,w.withResumeToken(_r.EMPTY_BYTE_STRING,w.snapshotVersion)),gA(o,m);const C=new nc(w.target,m,1,w.sequenceNumber);wb(o,C)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){xe("RemoteStore","Failed to raise snapshot:",r),yield SI(n,r)}var r}),bb.apply(this,arguments)}function SI(n,e,t){return Tb.apply(this,arguments)}function Tb(){return Tb=(0,ge.Z)(function*(n,e,t){if(!Zu(e))throw e;n._u.add(1),yield $p(n),n.gu.set("Offline"),t||(t=()=>z_(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){xe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield pn(n)}))}),Tb.apply(this,arguments)}function yA(n,e){return e().catch(t=>SI(n,t,e))}function Wm(n){return Sb.apply(this,arguments)}function Sb(){return Sb=(0,ge.Z)(function*(n){const e=Ge(n),t=Oh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;IR(e);)try{const o=yield pb(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,DR(e,o)}catch(o){yield SI(e,o)}vA(e)&&_A(e)}),Sb.apply(this,arguments)}function IR(n){return Nl(n)&&n.fu.length<10}function DR(n,e){n.fu.push(e);const t=Oh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function vA(n){return Nl(n)&&!Oh(n).No()&&n.fu.length>0}function _A(n){Oh(n).start()}function CR(n){return Ab.apply(this,arguments)}function Ab(){return Ab=(0,ge.Z)(function*(n){Oh(n).eu()}),Ab.apply(this,arguments)}function bR(n){return Mb.apply(this,arguments)}function Mb(){return Mb=(0,ge.Z)(function*(n){const e=Oh(n);for(const t of n.fu)e.Xo(t.mutations)}),Mb.apply(this,arguments)}function TR(n,e,t){return xb.apply(this,arguments)}function xb(){return xb=(0,ge.Z)(function*(n,e,t){const r=n.fu.shift(),o=rI.from(r,e,t);yield yA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Wm(n)}),xb.apply(this,arguments)}function SR(n,e){return Rb.apply(this,arguments)}function Rb(){return Rb=(0,ge.Z)(function*(n,e){var t;e&&Oh(n).Yo&&(yield(t=(0,ge.Z)(function*(r,o){if(Dm(u=o.code)&&u!==ae.ABORTED){const l=r.fu.shift();Oh(r).Mo(),yield yA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield Wm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),vA(n)&&_A(n)}),Rb.apply(this,arguments)}function wA(n,e){return Nb.apply(this,arguments)}function Nb(){return Nb=(0,ge.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),xe("RemoteStore","RemoteStore received new credentials");const r=Nl(t);t._u.add(3),yield $p(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield pn(t)}),Nb.apply(this,arguments)}function Ob(n,e){return Pb.apply(this,arguments)}function Pb(){return Pb=(0,ge.Z)(function*(n,e){const t=Ge(n);e?(t._u.delete(2),yield pn(t)):e||(t._u.add(2),yield $p(t),t.gu.set("Unknown"))}),Pb.apply(this,arguments)}function Km(n){return n.pu||(n.pu=function(e,t,r){const o=Ge(e);return o.su(),new me(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:_R.bind(null,n),Zr:wR.bind(null,n),Wo:ER.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.pu.Mo(),Ib(n)?Eb(n):n.gu.set("Unknown")):(yield n.pu.stop(),mA(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Oh(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ge(e);return o.su(),new Le(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:CR.bind(null,n),Zr:SR.bind(null,n),tu:bR.bind(null,n),Zo:TR.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Mo(),yield Wm(n)):(yield n.Iu.stop(),n.fu.length>0&&(xe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class kb{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new kb(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zm(n,e){if(zn("AsyncQueue",`${e}: ${n}`),Zu(n))return new Te(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Ym{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Ip(),this.sortedSet=new qn(this.comparator)}static emptySet(e){return new Ym(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ym)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ym;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class EA{constructor(){this.Tu=new qn(He.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Qe():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qm{constructor(e,t,r,o,u,l,m,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Qm(e,t,Ym.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class AR{constructor(){this.Au=void 0,this.listeners=[]}}class MR{constructor(){this.queries=new Qo(e=>EE(e),vp),this.onlineState="Unknown",this.Ru=new Set}}function Fb(n,e){return Lb.apply(this,arguments)}function Lb(){return Lb=(0,ge.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new AR),o)try{u.Au=yield t.onListen(r)}catch(l){const m=Zm(l,`Initialization of query '${l_(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&Bb(t)}),Lb.apply(this,arguments)}function Vb(n,e){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,ge.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Ub.apply(this,arguments)}function xR(n,e){const t=Ge(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.Pu(o)&&(r=!0);l.Au=o}}r&&Bb(t)}function RR(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function Bb(n){n.Ru.forEach(e=>{e.next()})}class jb{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Qm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class NR{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class IA{constructor(e){this.yt=e}Ji(e){return Bs(this.yt,e)}Yi(e){return e.metadata.exists?__(this.yt,e.document,!1):yn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Kn(e)}}class OR{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=DA(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=pt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new IA(this.yt);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||Ut()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function fA(n,e,t,r){return CI.apply(this,arguments)}(e.localStore,new IA(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield pA(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function DA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class CA{constructor(e){this.key=e}}class bA{constructor(e){this.key=e}}class TA{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ut(),this.mutatedKeys=Ut(),this.Gu=DE(e),this.Qu=new Ym(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new EA,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const $=o.get(A),te=d_(this.query,N)?N:null,he=!!$&&this.mutatedKeys.has($.key),Pe=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let je=!1;$&&te?$.data.isEqual(te.data)?he!==Pe&&(r.track({type:3,doc:te}),je=!0):this.Hu($,te)||(r.track({type:2,doc:te}),je=!0,(w&&this.Gu(te,w)>0||C&&this.Gu(te,C)<0)&&(m=!0)):!$&&te?(r.track({type:0,doc:te}),je=!0):$&&!te&&(r.track({type:1,doc:$}),je=!0,(w||C)&&(m=!0)),je&&(te?(l=l.add(te),u=Pe?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:l,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((C,A)=>function(N,$){const te=he=>{switch(he){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return te(N)-te($)}(C.type,A.type)||this.Gu(C.doc,A.doc)),this.Ju(r);const l=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.Uu;return this.Uu=m,0!==u.length||w?{snapshot:new Qm(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new EA,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ut(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new bA(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new CA(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Ut();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Qm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class PR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kR{constructor(e){this.key=e,this.nc=!1}}class FR{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Qo(m=>EE(m),vp),this.rc=new Map,this.oc=new Set,this.uc=new qn(He.comparator),this.cc=new Map,this.ac=new Lp,this.hc={},this.lc=new Map,this.fc=ea.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function LR(n,e){return $b.apply(this,arguments)}function $b(){return $b=(0,ge.Z)(function*(n,e){const t=dT(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const l=yield Bp(t.localStore,zi(e));t.isPrimaryClient&&TI(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield Hb(t,e,r,"current"===m,l.resumeToken)}return o}),$b.apply(this,arguments)}function Hb(n,e,t,r,o){return Gb.apply(this,arguments)}function Gb(){return Gb=(0,ge.Z)(function*(n,e,t,r,o){n._c=(N,$,te)=>{return(he=(0,ge.Z)(function*(Pe,je,Ht,zt){let Bt=je.view.Wu(Ht);Bt.$i&&(Bt=yield zm(Pe.localStore,je.query,!1).then(({documents:qt})=>je.view.Wu(qt,Bt)));const jt=zt&&zt.targetChanges.get(je.targetId),Ft=je.view.applyChanges(Bt,Pe.isPrimaryClient,jt);return eT(Pe,je.targetId,Ft.Xu),Ft.snapshot}),function(Pe,je,Ht,zt){return he.apply(this,arguments)})(n,N,$,te);var he};const u=yield zm(n.localStore,e,!0),l=new TA(e,u.Hi),m=l.Wu(u.documents),w=Cp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=l.applyChanges(m,n.isPrimaryClient,w);eT(n,t,C.Xu);const A=new PR(e,t,l);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),Gb.apply(this,arguments)}function VR(n,e){return zb.apply(this,arguments)}function zb(){return zb=(0,ge.Z)(function*(n,e){const t=Ge(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!vp(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield jp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Q_(t.remoteStore,r.targetId),Jm(t,r.targetId)}).catch(Pa))):(Jm(t,r.targetId),yield jp(t.localStore,r.targetId,!0))}),zb.apply(this,arguments)}function qb(){return qb=(0,ge.Z)(function*(n,e,t){const r=hT(n);try{const o=yield function(u,l){const m=Ge(u),w=Pn.now(),C=l.reduce(($,te)=>$.add(te.key),Ut());let A,N;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let te=qi(),he=Ut();return m.Gi.getEntries($,C).next(Pe=>{te=Pe,te.forEach((je,Ht)=>{Ht.isValidDocument()||(he=he.add(je))})}).next(()=>m.localDocuments.getOverlayedDocuments($,te)).next(Pe=>{A=Pe;const je=[];for(const Ht of l){const zt=jC(Ht,A.get(Ht.key).overlayedDocument);null!=zt&&je.push(new Us(Ht.key,zt,yE(zt.value.mapValue),kn.exists(!0)))}return m.mutationQueue.addMutationBatch($,w,je,l)}).next(Pe=>{N=Pe;const je=Pe.applyToLocalDocumentSet(A,he);return m.documentOverlayCache.saveOverlays($,Pe.batchId,je)})}).then(()=>({batchId:N.batchId,changes:LE(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let w=u.hc[u.currentUser.toKey()];w||(w=new qn(Nt)),w=w.insert(l,m),u.hc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Ol(r,o.changes),yield Wm(r.remoteStore)}catch(o){const u=Zm(o,"Failed to persist write");t.reject(u)}}),qb.apply(this,arguments)}function SA(n,e){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,ge.Z)(function*(n,e){const t=Ge(n);try{const r=yield q_(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.cc.get(u);l&&(rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.nc=!0:o.modifiedDocuments.size>0?rt(l.nc):o.removedDocuments.size>0&&(rt(l.nc),l.nc=!1))}),yield Ol(t,r,e)}catch(r){yield Pa(r)}}),Wb.apply(this,arguments)}function AA(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,l)=>{const m=l.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=Ge(u);m.onlineState=l;let w=!1;m.queries.forEach((C,A)=>{for(const N of A.listeners)N.bu(l)&&(w=!0)}),w&&Bb(m)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function BR(n,e,t){return Kb.apply(this,arguments)}function Kb(){return Kb=(0,ge.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let l=new qn(He.comparator);l=l.insert(u,yn.newNoDocument(u,ut.min()));const m=Ut().add(u),w=new Ch(ut.min(),new Map,new ln(Nt),l,m);yield SA(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),tT(r)}else yield jp(r.localStore,e,!1).then(()=>Jm(r,e,t)).catch(Pa)}),Kb.apply(this,arguments)}function jR(n,e){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,ge.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield hA(t.localStore,e);Xb(t,r,null),Jb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ol(t,o)}catch(o){yield Pa(o)}}),Zb.apply(this,arguments)}function $R(n,e,t){return Yb.apply(this,arguments)}function Yb(){return Yb=(0,ge.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,l){const m=Ge(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,l).next(A=>(rt(null!==A),C=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);Xb(r,e,t),Jb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ol(r,o)}catch(o){yield Pa(o)}}),Yb.apply(this,arguments)}function Qb(){return Qb=(0,ge.Z)(function*(n,e){const t=Ge(n);Nl(t.remoteStore)||xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ge(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=Zm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Qb.apply(this,arguments)}function Jb(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Xb(n,e,t){const r=Ge(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function Jm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||MA(n,r)})}function MA(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Q_(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),tT(n))}function eT(n,e,t){for(const r of t)r instanceof CA?(n.ac.addReference(r.key,e),GR(n,r)):r instanceof bA?(xe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||MA(n,r.key)):Qe()}function GR(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(xe("SyncEngine","New document in limbo: "+t),n.oc.add(r),tT(n))}function tT(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new He(pt.fromString(e)),r=n.fc.next();n.cc.set(r,new kR(t)),n.uc=n.uc.insert(t,r),TI(n.remoteStore,new nc(zi(_h(t.path)),r,2,cs.at))}}function Ol(n,e,t){return nT.apply(this,arguments)}function nT(){return nT=(0,ge.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],l=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{l.push(r._c(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const A=Gm.Ci(w.targetId,C);u.push(A)}}))}),yield Promise.all(l),r.sc.Wo(o),yield(m=(0,ge.Z)(function*(w,C){const A=Ge(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>oe.forEach(C,$=>oe.forEach($.Si,te=>A.persistence.referenceDelegate.addReference(N,$.targetId,te)).next(()=>oe.forEach($.Di,te=>A.persistence.referenceDelegate.removeReference(N,$.targetId,te)))))}catch(N){if(!Zu(N))throw N;xe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const $=N.targetId;if(!N.fromCache){const te=A.qi.get($),Pe=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);A.qi=A.qi.insert($,Pe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),nT.apply(this,arguments)}function zR(n,e){return rT.apply(this,arguments)}function rT(){return rT=(0,ge.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){xe("SyncEngine","User change. New user:",e.toKey());const r=yield G_(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(l=>{l.forEach(m=>{m.reject(new Te(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ol(t,r.ji)}var o}),rT.apply(this,arguments)}function qR(n,e){const t=Ge(n),r=t.cc.get(e);if(r&&r.nc)return Ut().add(r.key);{let o=Ut();const u=t.rc.get(e);if(!u)return o;for(const l of u){const m=t.ic.get(l);o=o.unionWith(m.view.ju)}return o}}function WR(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,ge.Z)(function*(n,e){const t=Ge(n),r=yield zm(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&eT(t,e.targetId,o.Xu),o}),iT.apply(this,arguments)}function KR(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,ge.Z)(function*(n,e){const t=Ge(n);return gb(t.localStore,e).then(r=>Ol(t,r))}),sT.apply(this,arguments)}function ZR(n,e,t,r){return oT.apply(this,arguments)}function oT(){return oT=(0,ge.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(l,m){const w=Ge(l),C=Ge(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Tn(A,m).next(N=>N?w.localDocuments.getDocuments(A,N):oe.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Wm(o.remoteStore):"acknowledged"===t||"rejected"===t?(Xb(o,e,r||null),Jb(o,e),m=e,Ge(Ge(o.localStore).mutationQueue).An(m)):Qe(),yield Ol(o,u)):xe("SyncEngine","Cannot apply mutation batch with id: "+e)}),oT.apply(this,arguments)}function aT(){return aT=(0,ge.Z)(function*(n,e){const t=Ge(n);if(dT(t),hT(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield xA(t,r.toArray());t.dc=!0,yield Ob(t.remoteStore,!0);for(const u of o)TI(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Jm(t,l),jp(t.localStore,l,!0))),Q_(t.remoteStore,l)}),yield o,yield xA(t,r),function(u){const l=Ge(u);l.cc.forEach((m,w)=>{Q_(l.remoteStore,w)}),l.ac.fs(),l.cc=new Map,l.uc=new qn(He.comparator)}(t),t.dc=!1,yield Ob(t.remoteStore,!1)}}),aT.apply(this,arguments)}function xA(n,e,t){return uT.apply(this,arguments)}function uT(){return uT=(0,ge.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const l of e){let m;const w=r.rc.get(l);if(w&&0!==w.length){m=yield Bp(r.localStore,zi(w[0]));for(const C of w){const A=r.ic.get(C),N=yield WR(r,A);N.snapshot&&u.push(N.snapshot)}}else{const C=yield DI(r.localStore,l);m=yield Bp(r.localStore,C),yield Hb(r,RA(C),l,!1,m.resumeToken)}o.push(m)}return r.sc.Wo(u),o}),uT.apply(this,arguments)}function RA(n){return _E(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function QR(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).vi()}function JR(n,e,t,r){return cT.apply(this,arguments)}function cT(){return cT=(0,ge.Z)(function*(n,e,t,r){const o=Ge(n);if(o.dc)return void xe("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield gb(o.localStore,IE(u[0])),m=Ch.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_r.EMPTY_BYTE_STRING);yield Ol(o,l,m);break}case"rejected":yield jp(o.localStore,e,!0),Jm(o,e,r);break;default:Qe()}}),cT.apply(this,arguments)}function XR(n,e,t){return lT.apply(this,arguments)}function lT(){return lT=(0,ge.Z)(function*(n,e,t){const r=dT(n);if(r.dc){for(const o of e){if(r.rc.has(o)){xe("SyncEngine","Adding an already active target "+o);continue}const u=yield DI(r.localStore,o),l=yield Bp(r.localStore,u);yield Hb(r,RA(u),l.targetId,!1,l.resumeToken),TI(r.remoteStore,l)}for(const o of t)r.rc.has(o)&&(yield jp(r.localStore,o,!1).then(()=>{Q_(r.remoteStore,o),Jm(r,o)}).catch(Pa))}}),lT.apply(this,arguments)}function dT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BR.bind(null,e),e.sc.Wo=xR.bind(null,e.eventManager),e.sc.wc=RR.bind(null,e.eventManager),e}function hT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$R.bind(null,e),e}class NA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.yt=k(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return EI(this.persistence,new H_,e.initialUser,this.yt)}yc(e){return new hb(U_.Bs,this.yt)}gc(e){return new c}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class OA extends NA{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield hT(r.Ac.syncEngine),yield Wm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return EI(this.persistence,new H_,e.initialUser,this.yt)}Tc(e,t){return new aA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new sE(t,this.persistence);return new TC(e.asyncQueue,r)}yc(e){const t=Hm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Si.withCacheSize(this.cacheSizeBytes):Si.DEFAULT;return new $_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,T(),x(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new c}}class tN extends OA{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof a&&(r.sharedClientState.syncEngine={Fr:ZR.bind(null,o),$r:JR.bind(null,o),Br:XR.bind(null,o),vi:QR.bind(null,o),Mr:KR.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ge.Z)(function*(l){yield function YR(n,e){return aT.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=T();if(!a.C(t))throw new Te(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Hm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new a(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class fT{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>AA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=zR.bind(null,r.syncEngine),yield Ob(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new MR}createDatastore(e){const t=k(e.databaseInfo.databaseId),r=new D(e.databaseInfo);return new ze(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>AA(this.syncEngine,m,0),l=p.C()?new p:new d,new Ot(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,w,C){const A=new FR(r,o,u,l,m,w);return C&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Ge(t);xe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield $p(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function pT(n,e,t){if(!t)throw new Te(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PA(n,e,t,r){if(!0===e&&!0===r)throw new Te(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kA(n){if(!He.isDocumentKey(n))throw new Te(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FA(n){if(He.isDocumentKey(n))throw new Te(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Qe()}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=AI(n);throw new Te(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function LA(n,e){if(e<=0)throw new Te(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const VA=new Map;class UA{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,PA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class J_{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Te(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new DC;switch(t.type){case"gapi":return new zS(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Te(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=VA.get(e);t&&(xe("ComponentProvider","Removing Datastore"),VA.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class Ai{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ai(this.firestore,e,this._query)}}class sc extends Ai{constructor(e,t,r){super(e,t,_h(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new He(e))}withConverter(e){return new sc(this.firestore,e,this._path)}}function jA(n,e,...t){if(n=(0,en.m9)(n),pT("collection","path",e),n instanceof J_){const r=pt.fromString(e,...t);return FA(r),new sc(n,null,r)}{if(!(n instanceof Bn||n instanceof sc))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return FA(r),new sc(n.firestore,null,r)}}function MI(n,e,...t){if(n=(0,en.m9)(n),1===arguments.length&&(e=tE.R()),pT("doc","path",e),n instanceof J_){const r=pt.fromString(e,...t);return kA(r),new Bn(n,null,new He(r))}{if(!(n instanceof Bn||n instanceof sc))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return kA(r),new Bn(n.firestore,n instanceof sc?n.converter:null,new He(r))}}function $A(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),(n instanceof Bn||n instanceof sc)&&(e instanceof Bn||e instanceof sc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gT(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),n instanceof Ai&&e instanceof Ai&&n.firestore===e.firestore&&vp(n._query,e._query)&&n.converter===e.converter}function HA(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class xI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class rN{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new An,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new NR(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ge.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class oN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Te(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ge.Z)(function*(u,l){const m=Ge(u),w=tc(m.yt)+"/documents",C={documents:l.map(te=>Sp(m.yt,te))},A=yield m._o("BatchGetDocuments",w,C,l.length),N=new Map;A.forEach(te=>{const he=function KC(n,e){return"found"in e?function(t,r){rt(!!r.found);const o=Bs(t,r.found.name),u=Kn(r.found.updateTime),l=r.found.createTime?Kn(r.found.createTime):ut.min(),m=new wr({mapValue:{fields:r.found.fields}});return yn.newFoundDocument(o,u,l,m)}(n,e):"missing"in e?function(t,r){rt(!!r.missing),rt(!!r.readTime);const o=Bs(t,r.missing),u=Kn(r.readTime);return yn.newNoDocument(o,u)}(n,e):Qe()}(m.yt,te);N.set(he.key.toString(),he)});const $=[];return l.forEach(te=>{const he=N.get(te.toString());rt(!!he),$.push(he)}),$}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=He.fromPath(o);e.mutations.push(new Im(u,e.precondition(u)))}),yield(r=(0,ge.Z)(function*(o,u){const l=Ge(o),m=tc(l.yt)+"/documents",w={writes:u.map(C=>Jo(l.yt,C))};yield l.ao("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qe();t=ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ut.min())?kn.exists(!1):kn.updateTime(t):kn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ut.min()))throw new Te(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kn.updateTime(t)}return kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class aN{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new G(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ge.Z)(function*(){const t=new oN(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!hm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Dm(t)}return!1}}class uN{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Pr.UNAUTHENTICATED,this.clientId=tE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ge.Z)(function*(m){xe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(xe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Zm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function GA(n,e){return mT.apply(this,arguments)}function mT(){return mT=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),xe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ge.Z)(function*(u){r.isEqual(u)||(yield G_(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),mT.apply(this,arguments)}function zA(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield vT(n);xe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>wA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>wA(e.remoteStore,u)),n.onlineComponents=e}),yT.apply(this,arguments)}function vT(n){return _T.apply(this,arguments)}function _T(){return _T=(0,ge.Z)(function*(n){return n.offlineComponents||(xe("FirestoreClient","Using default OfflineComponentProvider"),yield GA(n,new NA)),n.offlineComponents}),_T.apply(this,arguments)}function RI(n){return wT.apply(this,arguments)}function wT(){return wT=(0,ge.Z)(function*(n){return n.onlineComponents||(xe("FirestoreClient","Using default OnlineComponentProvider"),yield zA(n,new fT)),n.onlineComponents}),wT.apply(this,arguments)}function qA(n){return vT(n).then(e=>e.persistence)}function NI(n){return vT(n).then(e=>e.localStore)}function ET(n){return RI(n).then(e=>e.remoteStore)}function IT(n){return RI(n).then(e=>e.syncEngine)}function Xm(n){return DT.apply(this,arguments)}function DT(){return DT=(0,ge.Z)(function*(n){const e=yield RI(n),t=e.eventManager;return t.onListen=LR.bind(null,e.syncEngine),t.onUnlisten=VR.bind(null,e.syncEngine),t}),DT.apply(this,arguments)}function KA(n,e,t={}){const r=new An;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,l,m,w){const C=new xI({next:N=>{u.enqueueAndForget(()=>Vb(o,A));const $=N.docs.has(l);!$&&N.fromCache?w.reject(new Te(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&m&&"server"===m.source?w.reject(new Te(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new jb(_h(l.path),C,{includeMetadataChanges:!0,Nu:!0});return Fb(o,A)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}function ZA(n,e,t={}){const r=new An;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,l,m,w){const C=new xI({next:N=>{u.enqueueAndForget(()=>Vb(o,A)),N.fromCache&&"server"===m.source?w.reject(new Te(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new jb(l,C,{includeMetadataChanges:!0,Nu:!0});return Fb(o,A)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}class mN{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new G(this,"async_queue_retry"),this.Wc=()=>{const t=x();t&&xe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=x();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=x();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new An;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Zu(t))throw t;xe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,zn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=kb.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(o),o}zc(){this.Kc&&Qe()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function CT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class yN{constructor(){this._progressObserver={},this._taskCompletionResolver=new An,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class jn extends J_{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new mN,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||YA(this),this._firestoreClient.terminate()}}function Er(n){return n._firestoreClient||YA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function YA(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new SC(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new uN(n._authCredentials,n._appCheckCredentials,n._queue,r)}function QA(n,e,t){const r=new An;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield GA(n,t),yield zA(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===ae.FAILED_PRECONDITION||l.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;qu("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function JA(n){if(n._initialized||n._terminated)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class oc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oc(_r.fromBase64String(e))}catch(t){throw new Te(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oc(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hp{constructor(e){this._methodName=e}}class OI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const SN=/^__.*__$/;class AN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Us(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ih(e,this.data,t,this.fieldTransforms)}}class XA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class PI{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new PI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return LI(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(eM(this.sa)&&SN.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class MN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||k(e)}da(e,t,r,o=!1){return new PI({sa:e,methodName:t,fa:r,path:Vn.emptyPath(),oa:!1,la:o},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Gp(n){const e=n._freezeSettings(),t=k(n._databaseId);return new MN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kI(n,e,t,r,o,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,o);AT("Data must be an object, but it was:",l,r);const m=rM(r,l);let w,C;if(u.merge)w=new Gi(l.fieldMask),C=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const $=MT(e,N,t);if(!l.contains($))throw new Te(ae.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);sM(A,$)||A.push($)}w=new Gi(A),C=l.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=l.fieldTransforms;return new AN(new wr(m),w,C)}class X_ extends Hp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof X_}}function tM(n,e,t){return new PI({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class bT extends Hp{_toFieldTransform(e){return new _p(e.path,new Il)}isEqual(e){return e instanceof bT}}class xN extends Hp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=tM(this,e,!0),r=this._a.map(u=>zp(u,t)),o=new ec(r);return new _p(e.path,o)}isEqual(e){return this===e}}class RN extends Hp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=tM(this,e,!0),r=this._a.map(u=>zp(u,t)),o=new Dl(r);return new _p(e.path,o)}isEqual(e){return this===e}}class NN extends Hp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new wh(e.yt,TE(e.yt,this.wa));return new _p(e.path,t)}isEqual(e){return this===e}}function TT(n,e,t,r){const o=n.da(1,e,t);AT("Data must be an object, but it was:",o,r);const u=[],l=wr.empty();fh(r,(w,C)=>{const A=FI(e,w,t);C=(0,en.m9)(C);const N=o.ca(A);if(C instanceof X_)u.push(A);else{const $=zp(C,N);null!=$&&(u.push(A),l.set(A,$))}});const m=new Gi(u);return new XA(l,m,o.fieldTransforms)}function ST(n,e,t,r,o,u){const l=n.da(1,e,t),m=[MT(e,r,t)],w=[o];if(u.length%2!=0)throw new Te(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(MT(e,u[$])),w.push(u[$+1]);const C=[],A=wr.empty();for(let $=m.length-1;$>=0;--$)if(!sM(C,m[$])){const te=m[$];let he=w[$];he=(0,en.m9)(he);const Pe=l.ca(te);if(he instanceof X_)C.push(te);else{const je=zp(he,Pe);null!=je&&(C.push(te),A.set(te,je))}}const N=new Gi(C);return new XA(A,N,l.fieldTransforms)}function nM(n,e,t,r=!1){return zp(t,n.da(r?4:3,e))}function zp(n,e){if(iM(n=(0,en.m9)(n)))return AT("Unsupported field value:",e,n),rM(n,e);if(n instanceof Hp)return function(t,r){if(!eM(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=zp(l,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,en.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return TE(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Pn.fromDate(t);return{timestampValue:bh(r.yt,o)}}if(t instanceof Pn){const o=new Pn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:bh(r.yt,o)}}if(t instanceof OI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof oc)return{bytesValue:bm(r.yt,t._byteString)};if(t instanceof Bn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:y_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${AI(t)}`)}(n,e)}function rM(n,e){const t={};return MC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fh(n,(r,o)=>{const u=zp(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function iM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Pn||n instanceof OI||n instanceof oc||n instanceof Bn||n instanceof Hp)}function AT(n,e,t){if(!iM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=AI(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function MT(n,e,t){if((e=(0,en.m9)(e))instanceof Pl)return e._internalPath;if("string"==typeof e)return FI(n,e);throw LI("Field path arguments must be of type string or ",n,!1,void 0,t)}const ON=new RegExp("[~\\*/\\[\\]]");function FI(n,e,t){if(e.search(ON)>=0)throw LI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pl(...e.split("."))._internalPath}catch{throw LI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function LI(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${o}`),w+=")"),new Te(ae.INVALID_ARGUMENT,m+n+w)}function sM(n,e){return n.some(t=>t.isEqual(e))}class e0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new PN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class PN extends e0{data(){return super.data()}}function VI(n,e){return"string"==typeof e?FI(n,e):e instanceof Pl?e._internalPath:e._delegate._internalPath}function oM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Te(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xT{}class t0 extends xT{}function Ph(n,e,...t){let r=[];e instanceof xT&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof ey).length,l=o.filter(m=>m instanceof n0).length;if(u>1||u>0&&l>0)throw new Te(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class n0 extends t0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n0(e,t,r)}_apply(e){const t=this._parse(e);return lM(e._query,t),new Ai(e.firestore,e.converter,c_(e._query,t))}_parse(e){const t=Gp(e.firestore);return function(o,u,l,m,w,C,A){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){cM(A,C);const $=[];for(const te of A)$.push(uM(m,o,te));N={arrayValue:{values:$}}}else N=uM(m,o,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||cM(A,C),N=nM(l,"where",A,"in"===C||"not-in"===C);return Qt.create(w,C,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ey extends xT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ey(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:cn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const m of l)lM(u,m),u=c_(u,m)}(e._query,t),new Ai(e.firestore,e.converter,c_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class RT extends t0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new RT(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new yh(o,u);return function(m,w){if(null===wE(m)){const C=yp(m);null!==C&&dM(0,C,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ai(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ua(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class UI extends t0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new UI(e,t,r)}_apply(e){return new Ai(e.firestore,e.converter,Em(e._query,this._limit,this._limitType))}}class BI extends t0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new BI(e,t,r)}_apply(e){const t=aM(e,this.type,this._docOrFields,this._inclusive);return new Ai(e.firestore,e.converter,(o=t,new Ua((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class jI extends t0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jI(e,t,r)}_apply(e){const t=aM(e,this.type,this._docOrFields,this._inclusive);return new Ai(e.firestore,e.converter,(o=t,new Ua((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function aM(n,e,t,r){if(t[0]=(0,en.m9)(t[0]),t[0]instanceof e0)return function(o,u,l,m,w){if(!m)throw new Te(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const C=[];for(const A of El(o))if(A.field.isKeyField())C.push(wl(u,m.key));else{const N=m.data.field(A.field);if(Yv(N))throw new Te(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=A.field.canonicalString();throw new Te(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}C.push(N)}return new La(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Gp(n.firestore);return function(u,l,m,w,C,A){const N=u.explicitOrderBy;if(C.length>N.length)throw new Te(ae.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let te=0;te<C.length;te++){const he=C[te];if(N[te].field.isKeyField()){if("string"!=typeof he)throw new Te(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof he}`);if(!u_(u)&&-1!==he.indexOf("/"))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${he}' contains a slash.`);const Pe=u.path.child(pt.fromString(he));if(!He.isDocumentKey(Pe))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Pe}' is not because it contains an odd number of segments.`);const je=new He(Pe);$.push(wl(l,je))}else{const Pe=nM(m,w,he);$.push(Pe)}}return new La($,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function uM(n,e,t){if("string"==typeof(t=(0,en.m9)(t))){if(""===t)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u_(e)&&-1!==t.indexOf("/"))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pt.fromString(t));if(!He.isDocumentKey(r))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wl(n,new He(r))}if(t instanceof Bn)return wl(n,t._key);throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${AI(t)}.`)}function cM(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function lM(n,e){if(e.isInequality()){const r=yp(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=wE(n);null!==u&&dM(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Te(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function dM(n,e,t){if(!t.isEqual(e))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class NT{convertValue(e,t="none"){switch(_l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qe()}}convertObject(e,t){const r={};return fh(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new OI(Dn(e.latitude),Dn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=oE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cp(e));default:return null}}convertTimestamp(e){const t=ka(e);return new Pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pt.fromString(e);rt(QE(r));const o=new yl(r.get(1),r.get(3)),u=new He(r.popFirst(5));return o.isEqual(t)||zn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function $I(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class HN extends NT{constructor(e){super(),this.firestore=e}convertBytes(e){return new oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class qp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kl extends e0{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new r0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(VI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class r0 extends kl{data(e={}){return super.data(e)}}class kh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new qp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new r0(this._firestore,this._userDataWriter,r.key,r,new qp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new r0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new qp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new r0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new qp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),C=u.indexOf(l.doc.key)),{type:GN(l.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function GN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}function fM(n,e){return n instanceof kl&&e instanceof kl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof kh&&e instanceof kh&&n._firestore===e._firestore&&gT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Fh extends NT{constructor(e){super(),this.firestore=e}convertBytes(e){return new oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function pM(n,e,t){n=tn(n,Bn);const r=tn(n.firestore,jn),o=$I(n.converter,e,t);return ty(r,[kI(Gp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,kn.none())])}function gM(n,e,t,...r){n=tn(n,Bn);const o=tn(n.firestore,jn),u=Gp(o);let l;return l="string"==typeof(e=(0,en.m9)(e))||e instanceof Pl?ST(u,"updateDoc",n._key,e,t,r):TT(u,"updateDoc",n._key,e),ty(o,[l.toMutation(n._key,kn.exists(!0))])}function mM(n,...e){var t,r,o;n=(0,en.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||CT(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(CT(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,A;if(n instanceof Bn)C=tn(n.firestore,jn),A=_h(n._key.path),w={next:N=>{e[l]&&e[l](OT(C,n,N))},error:e[l+1],complete:e[l+2]};else{const N=tn(n,Ai);C=tn(N.firestore,jn),A=N._query;const $=new Fh(C);w={next:te=>{e[l]&&e[l](new kh(C,$,N,te))},error:e[l+1],complete:e[l+2]},oM(n._query)}return function(N,$,te,he){const Pe=new xI(he),je=new jb($,Pe,te);return N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Fb(yield Xm(N),je)})),()=>{Pe.bc(),N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Vb(yield Xm(N),je)}))}}(Er(C),A,m,w)}function ty(n,e){return function(t,r){const o=new An;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function UR(n,e,t){return qb.apply(this,arguments)}(yield IT(t),r,o)})),o.promise}(Er(n),e)}function OT(n,e,t){const r=t.docs.get(e._key),o=new Fh(n);return new kl(n,o,e._key,r,new qp(t.hasPendingWrites,t.fromCache),e.converter)}const eO={maxAttempts:5};class yM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gp(e)}set(e,t,r){this._verifyNotCommitted();const o=Lh(e,this._firestore),u=$I(o.converter,t,r),l=kI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,kn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Lh(e,this._firestore);let l;return l="string"==typeof(t=(0,en.m9)(t))||t instanceof Pl?ST(this._dataReader,"WriteBatch.update",u._key,t,r,o):TT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lh(e,this._firestore);return this._mutations=this._mutations.concat(new Cl(t._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lh(n,e){if((n=(0,en.m9)(n)).firestore!==e)throw new Te(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class tO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gp(e)}get(e){const t=Lh(e,this._firestore),r=new HN(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Qe();const u=o[0];if(u.isFoundDocument())return new e0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new e0(this._firestore,r,t._key,null,t.converter);throw Qe()})}set(e,t,r){const o=Lh(e,this._firestore),u=$I(o.converter,t,r),l=kI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=Lh(e,this._firestore);let l;return l="string"==typeof(t=(0,en.m9)(t))||t instanceof Pl?ST(this._dataReader,"Transaction.update",u._key,t,r,o):TT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Lh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lh(e,this._firestore),r=new Fh(this._firestore);return super.get(e).then(o=>new kl(this._firestore,r,t._key,o._document,new qp(!1,!1),t.converter))}}function PT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function _M(){if(typeof Uint8Array>"u")throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function wM(){if(!function pm(){return typeof atob<"u"}())throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ch=Fu.SDK_VERSION,(0,Fu._registerComponent)(new jd.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new jn(new GS(t.getProvider("auth-internal")),new eE(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Te(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,Fu.registerVersion)(Yw,"3.8.0",n),(0,Fu.registerVersion)(Yw,"3.8.0","esm2017")}();class s0{constructor(e){this._delegate=e}static fromBase64String(e){return wM(),new s0(oc.fromBase64String(e))}static fromUint8Array(e){return _M(),new s0(oc.fromUint8Array(e))}toBase64(){return wM(),this._delegate.toBase64()}toUint8Array(){return _M(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function kT(n){return function lO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class dO{enableIndexedDbPersistence(e,t){return function _N(n,e){JA(n=tn(n,jn));const t=Er(n),r=n._freezeSettings(),o=new fT;return QA(t,o,new OA(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wN(n){JA(n=tn(n,jn));const e=Er(n),t=n._freezeSettings(),r=new fT;return QA(e,r,new tN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function EN(n){if(n._initialized&&!n._terminated)throw new Te(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new An;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!bi.C())return Promise.resolve();const o=r+"main";yield bi.delete(o)}),function(r){return t.apply(this,arguments)})(Hm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class EM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof yl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function BA(n,e,t,r={}){var o;const u=(n=tn(n,J_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&qu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Pr.MOCK_USER;else{l=(0,en.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Te(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Pr(w)}n._authCredentials=new lh(new Xw(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function DN(n){return function cN(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield qA(n),t=yield ET(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o._u.delete(0),pn(o)}(t)}))}(Er(n=tn(n,jn)))}(this._delegate)}disableNetwork(){return function CN(n){return function lN(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield qA(n),t=yield ET(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(o){const u=Ge(o);u._u.add(0),yield $p(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Er(n=tn(n,jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function IN(n){return function(e){const t=new An;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function HR(n,e){return Qb.apply(this,arguments)}(yield IT(e),t)})),t.promise}(Er(n=tn(n,jn)))}(this._delegate)}onSnapshotsInSync(e){return function XN(n,e){return function fN(n,e){const t=new xI(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Xm(n),o=t,Ge(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Xm(n),o=t,void Ge(r).Ru.delete(o);var r,o}))}}(Er(n=tn(n,jn)),CT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ny(this,jA(this._delegate,e))}catch(t){throw ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new ta(this,MI(this._delegate,e))}catch(t){throw ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hs(this,function nN(n,e){if(n=tn(n,J_),pT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ai(n,null,(t=e,new Ua(pt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function nO(n,e,t){n=tn(n,jn);const r=Object.assign(Object.assign({},eO),t);return function(o){if(o.maxAttempts<1)throw new Te(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new An;return o.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const w=yield function WA(n){return RI(n).then(e=>e.datastore)}(o);new aN(o.asyncQueue,w,l,u,m).run()})),m.promise}(Er(n),o=>e(new tO(n,o)),r)}(this._delegate,t=>e(new IM(this,t)))}batch(){return Er(this._delegate),new DM(new yM(this._delegate,e=>ty(this._delegate,e)))}loadBundle(e){return function bN(n,e){const t=Er(n=tn(n,jn)),r=new yN;return function pN(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return HA(w,C);if(w instanceof ArrayBuffer)return HA(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new rN(w,l);var w}(t,k(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function eN(n,e,t){const r=Ge(n);var o;(o=(0,ge.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function($,te){const he=Ge($),Pe=Kn(te.createTime);return he.persistence.runTransaction("hasNewerBundle","readonly",je=>he.Ns.getBundleMetadata(je,te.id)).then(je=>!!je&&je.createTime.compareTo(Pe)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(DA(w));const C=new OR(w,u.localStore,l.yt);let A=yield l.mc();for(;A;){const $=yield C.Fu(A);$&&m._updateProgress($),A=yield l.mc()}const N=yield C.complete();return yield Ol(u,N.Lu,void 0),yield function($,te){const he=Ge($);return he.persistence.runTransaction("Save bundle","readwrite",Pe=>he.Ns.saveBundleMetadata(Pe,te))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return qu("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var $}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield IT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function TN(n,e){return function gN(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield NI(n),e)}))}(Er(n=tn(n,jn)),e).then(t=>t?new Ai(n,null,t.query):null)}(this._delegate,e).then(t=>t?new hs(this,t):null)}}class HI extends NT{constructor(e){super(),this.firestore=e}convertBytes(e){return new s0(new oc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ta.forKey(t,this.firestore,null)}}class IM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new HI(e)}get(e){const t=Kp(e);return this._delegate.get(t).then(r=>new o0(this._firestore,new kl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Kp(e);return r?(PT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Kp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Kp(e);return this._delegate.delete(t),this}}class DM{constructor(e){this._delegate=e}set(e,t,r){const o=Kp(e);return r?(PT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Kp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Kp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new r0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new a0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Wp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Wp(e,new HI(e),t),o.set(t,u)),u}}Wp.INSTANCES=new WeakMap;class ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ta(t,new Bn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new ta(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ny(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ny(this.firestore,jA(this._delegate,e))}catch(t){throw ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,en.m9)(e))instanceof Bn&&$A(this._delegate,e)}set(e,t){t=PT("DocumentReference.set",t);try{return t?pM(this._delegate,e,t):pM(this._delegate,e)}catch(r){throw ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?gM(this._delegate,e):gM(this._delegate,e,t,...r)}catch(o){throw ds(o,"updateDoc()","DocumentReference.update()")}}delete(){return function QN(n){return ty(tn(n.firestore,jn),[new Cl(n._key,kn.none())])}(this._delegate)}onSnapshot(...e){const t=CM(e),r=bM(e,o=>new o0(this.firestore,new kl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return mM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function qN(n){n=tn(n,Bn);const e=tn(n.firestore,jn),t=Er(e),r=new Fh(e);return function dN(n,e){const t=new An;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,l){try{const m=yield function(w,C){const A=Ge(w);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,C))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Te(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Zm(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield NI(n),e,t);var r})),t.promise}(t,n._key).then(o=>new kl(e,r,n._key,o,new qp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function WN(n){n=tn(n,Bn);const e=tn(n.firestore,jn);return KA(Er(e),n._key,{source:"server"}).then(t=>OT(e,n,t))}(this._delegate):function zN(n){n=tn(n,Bn);const e=tn(n.firestore,jn);return KA(Er(e),n._key).then(t=>OT(e,n,t))}(this._delegate),t.then(r=>new o0(this.firestore,new kl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ta(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}function ds(n,e,t){return n.message=n.message.replace(e,t),n}function CM(n){for(const e of n)if("object"==typeof e&&!kT(e))return e;return{}}function bM(n,e){var t,r;let o;return o=kT(n[0])?n[0]:kT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class o0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fM(this._delegate,e._delegate)}}class a0 extends o0{data(e){const t=this._delegate.data(e);return function Jw(n,e){n||Qe()}(void 0!==t),t}}class hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HI(e)}where(e,t,r){try{return new hs(this.firestore,Ph(this._delegate,function kN(n,e,t){const r=e,o=VI("where",n);return n0._create(o,r,t)}(e,t,r)))}catch(o){throw ds(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new hs(this.firestore,Ph(this._delegate,function FN(n,e="asc"){const t=e,r=VI("orderBy",n);return RT._create(r,t)}(e,t)))}catch(r){throw ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hs(this.firestore,Ph(this._delegate,function LN(n){return LA("limit",n),UI._create("limit",n,"F")}(e)))}catch(t){throw ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new hs(this.firestore,Ph(this._delegate,function VN(n){return LA("limitToLast",n),UI._create("limitToLast",n,"L")}(e)))}catch(t){throw ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hs(this.firestore,Ph(this._delegate,function UN(...n){return BI._create("startAt",n,!0)}(...e)))}catch(t){throw ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hs(this.firestore,Ph(this._delegate,function BN(...n){return BI._create("startAfter",n,!1)}(...e)))}catch(t){throw ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hs(this.firestore,Ph(this._delegate,function jN(...n){return jI._create("endBefore",n,!1)}(...e)))}catch(t){throw ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hs(this.firestore,Ph(this._delegate,function $N(...n){return jI._create("endAt",n,!0)}(...e)))}catch(t){throw ds(t,"endAt()","Query.endAt()")}}isEqual(e){return gT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ZN(n){n=tn(n,Ai);const e=tn(n.firestore,jn),t=Er(e),r=new Fh(e);return function hN(n,e){const t=new An;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,l){try{const m=yield zm(o,u,!0),w=new TA(u,m.Hi),C=w.Wu(m.documents),A=w.applyChanges(C,!1);l.resolve(A.snapshot)}catch(m){const w=Zm(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield NI(n),e,t);var r})),t.promise}(t,n._query).then(o=>new kh(e,r,n,o))}(this._delegate):"server"===e?.source?function YN(n){n=tn(n,Ai);const e=tn(n.firestore,jn),t=Er(e),r=new Fh(e);return ZA(t,n._query,{source:"server"}).then(o=>new kh(e,r,n,o))}(this._delegate):function KN(n){n=tn(n,Ai);const e=tn(n.firestore,jn),t=Er(e),r=new Fh(e);return oM(n._query),ZA(t,n._query).then(o=>new kh(e,r,n,o))}(this._delegate),t.then(r=>new FT(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=CM(e),r=bM(e,o=>new FT(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return mM(this._delegate,t,r)}withConverter(e){return new hs(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}class fO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new a0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class FT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new a0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new fO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new a0(this._firestore,r))})}isEqual(e){return fM(this._delegate,e._delegate)}}class ny extends hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ta(this.firestore,e):null}doc(e){try{return new ta(this.firestore,void 0===e?MI(this._delegate):MI(this._delegate,e))}catch(t){throw ds(t,"doc()","CollectionReference.doc()")}}add(e){return function JN(n,e){const t=tn(n.firestore,jn),r=MI(n),o=$I(n.converter,e);return ty(t,[kI(Gp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ta(this.firestore,t))}isEqual(e){return $A(this._delegate,e._delegate)}withConverter(e){return new ny(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}function Kp(n){return tn(n,Bn)}class LT{constructor(...e){this._delegate=new Pl(...e)}static documentId(){return new LT(Vn.keyField().canonicalString())}isEqual(e){return(e=(0,en.m9)(e))instanceof Pl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Zp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function iO(){return new bT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Zp(e)}static delete(){const e=function rO(){return new X_("deleteField")}();return e._methodName="FieldValue.delete",new Zp(e)}static arrayUnion(...e){const t=function sO(...n){return new xN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Zp(t)}static arrayRemove(...e){const t=function oO(...n){return new RN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Zp(t)}static increment(e){const t=function aO(n){return new NN("increment",n)}(e);return t._methodName="FieldValue.increment",new Zp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const pO={Firestore:EM,GeoPoint:OI,Timestamp:Pn,Blob:s0,Transaction:IM,WriteBatch:DM,DocumentReference:ta,DocumentSnapshot:o0,Query:hs,QueryDocumentSnapshot:a0,QuerySnapshot:FT,CollectionReference:ny,FieldPath:LT,FieldValue:Zp,setLogLevel:function hO(n){!function Qw(n){zu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function mO(n){(function gO(n,e){n.INTERNAL.registerComponent(new jd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},pO)))})(n,(e,t)=>new EM(e,t,new dO)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(Qy.Z);var yO=P(6451),GI=P(5363),vO=P(6063);class _O extends si.x{constructor(e=1/0,t=1/0,r=vO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var wO=P(3099);function TM(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,wO.B)({connector:()=>new _O(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function SM(n,e){return(0,Ts.m)(e)?Qn(()=>n,e):Qn(()=>n)}var VT=P(9468);P(259);const BT=new Map,MM={activated:!1,tokenObservers:[]},bO={initialized:!1,enabled:!1};function Mi(n){return BT.get(n)||Object.assign({},MM)}function qI(){return bO}class RO{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new en.BH,yield function NO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new en.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fs=new en.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function RM(n){if(!Mi(n).activated)throw fs.create("use-before-activation",{appName:n.name})}function HT(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw fs.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw fs.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw fs.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw fs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+C,issuedAtTimeMillis:A}}),GT.apply(this,arguments)}function FO(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const u0="firebase-app-check-store";let ZI=null;function OM(){return ZI||(ZI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(fs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(u0,{keyPath:"compositeKey"})}}catch(t){e(fs.create("storage-open",{originalErrorMessage:t?.message}))}}),ZI)}function zT(){return zT=(0,ge.Z)(function*(n,e){const r=(yield OM()).transaction(u0,"readwrite"),u=r.objectStore(u0).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var C;m(fs.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),zT.apply(this,arguments)}const c0=new Ho.Yd("@firebase/app-check");function KT(n,e){return(0,en.hl)()?function BO(n,e){return function PM(n,e){return zT.apply(this,arguments)}(function FM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{c0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LM(){return qI().enabled}function VM(){return YT.apply(this,arguments)}function YT(){return YT=(0,ge.Z)(function*(){const n=qI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),YT.apply(this,arguments)}const qO={error:"UNKNOWN_ERROR"};function WO(n){return en.US.encodeString(JSON.stringify(n),!1)}function YI(n){return QT.apply(this,arguments)}function QT(){return QT=(0,ge.Z)(function*(n,e=!1){const t=n.app;RM(t);const r=Mi(t);let u,o=r.token;if(o&&!ry(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(ry(w)?o=w:yield KT(t,void 0))}if(!e&&o&&ry(o))return{token:o.token};let m,l=!1;if(LM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=HT(FO(t,yield VM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield KT(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Mi(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?c0.warn(w.message):c0.error(w),u=w}return o?u?m=ry(o)?{token:o.token,internalError:u}:jM(u):(m={token:o.token},r.token=o,yield KT(t,o)):m=jM(u),l&&BM(t,m),m}),QT.apply(this,arguments)}function XT(n,e){const t=Mi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function UM(n){const{app:e}=n,t=Mi(e);let r=t.tokenRefresher;r||(r=function KO(n){const{app:e}=n;return new RO((0,ge.Z)(function*(){let r;if(r=Mi(e).token?yield YI(n,!0):yield YI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Mi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function BM(n,e){const t=Mi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ry(n){return n.expireTimeMillis-Date.now()>0}function jM(n){return{token:WO(qO),error:n}}class ZO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Mi(this.app);for(const t of e)XT(this.app,t.next);return Promise.resolve()}}const ZM="app-check-internal";!function cP(){(0,Fu._registerComponent)(new jd.wA("app-check",n=>function YO(n,e){return new ZO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ZM).initialize()})),(0,Fu._registerComponent)(new jd.wA(ZM,n=>function QO(n){return{getToken:e=>YI(n,e),addTokenListener:e=>function JT(n,e,t,r){const{app:o}=n,u=Mi(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&ry(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),UM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>UM(n))}(n,"INTERNAL",e),removeTokenListener:e=>XT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Fu.registerVersion)("@firebase/app-check","0.6.0")}();class rS{constructor(){return(0,Wr.vb)("app-check")}}typeof window<"u"&&window;var pP=P(9260);const QM=new f.OlP("angularfire2.auth.use-emulator"),JM=new f.OlP("angularfire2.auth.settings"),XM=new f.OlP("angularfire2.auth.tenant-id"),ex=new f.OlP("angularfire2.auth.langugage-code"),tx=new f.OlP("angularfire2.auth.use-device-language"),nx=new f.OlP("angularfire.auth.persistence"),rx=(n,e,t,r,o,u,l,m)=>(0,ss.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),l)for(const[C,A]of Object.entries(l))w.settings[C]=A;return m&&w.setPersistence(m),w},[t,r,o,u,l,m]);let ix=(()=>{class n{constructor(t,r,o,u,l,m,w,C,A,N,$,te){const he=new si.x,Pe=Ke(void 0).pipe((0,GI.Q)(l.outsideAngular),Qn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,9169)))),(0,I.U)(()=>(0,ss.on)(t,u,r)),(0,I.U)(je=>rx(je,u,m,C,A,N,w,$)),TM({bufferSize:1,refCount:!1}));if(pc(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ke(null);else{Pe.pipe(is()).subscribe();const Ht=Pe.pipe(Qn(jt=>jt.getRedirectResult().then(Ft=>Ft,()=>null)),Wr.iC,TM({bufferSize:1,refCount:!1})),zt=Pe.pipe(Qn(jt=>new Ei.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>jt.onAuthStateChanged(qt=>Ft.next(qt),qt=>Ft.error(qt),()=>Ft.complete()))})))),Bt=Pe.pipe(Qn(jt=>new Ei.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>jt.onIdTokenChanged(qt=>Ft.next(qt),qt=>Ft.error(qt),()=>Ft.complete()))}))));this.authState=Ht.pipe(SM(zt),(0,VT.R)(l.outsideAngular),(0,GI.Q)(l.insideAngular)),this.user=Ht.pipe(SM(Bt),(0,VT.R)(l.outsideAngular),(0,GI.Q)(l.insideAngular)),this.idToken=this.user.pipe(Qn(jt=>jt?(0,Vt.D)(jt.getIdToken()):Ke(null))),this.idTokenResult=this.user.pipe(Qn(jt=>jt?(0,Vt.D)(jt.getIdTokenResult()):Ke(null))),this.credential=(0,yO.T)(Ht,he,this.authState.pipe(Bi(jt=>!jt))).pipe((0,I.U)(jt=>jt?.user?jt:null),(0,VT.R)(l.outsideAngular),(0,GI.Q)(l.insideAngular))}return(0,ss.pX)(this,Pe,u,{spy:{apply:(je,Ht,zt)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&zt.then(Bt=>he.next(Bt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ss.Dh),f.LFG(ss.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Wr.HU),f.LFG(QM,8),f.LFG(JM,8),f.LFG(XM,8),f.LFG(ex,8),f.LFG(tx,8),f.LFG(nx,8),f.LFG(rS,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function sx(n,e){return function mP(n,e=ow.z){return new Ei.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function sS(n,e){return sx(n,e).pipe((0,I.U)(t=>({payload:t,type:"query"})))}function JI(n,e){return sS(n,e).pipe(cf(void 0),Yy(),(0,I.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=o.find(A=>A.doc.ref.isEqual(l.ref)),C=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function ox(n,e,t){return JI(n,t).pipe(fd((r,o)=>function vP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function _P(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return oS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return oS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return oS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Rg(n,e=bs.y){return n=n??Bd,(0,Rr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Y.x)(r,l=>{const m=e(l);(u||!n(o,m))&&(u=!1,o=m,r.next(l))}))})}(),(0,I.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function oS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function ax(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ux{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=JI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,I.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(cf(void 0),Yy(),Bi(([r,o])=>o.length>0||!r),(0,I.U)(([r,o])=>o),Wr.iC)}auditTrail(e){return this.stateChanges(e).pipe(fd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ax(e);return ox(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return sS(this.query,this.afs.schedulers.outsideAngular).pipe((0,I.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Wr.iC)}get(e){return(0,Vt.D)(this.query.get(e)).pipe(Wr.iC)}add(e){return this.ref.add(e)}doc(e){return new cx(this.ref.doc(e),this.afs)}}class cx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=hx(r,t);return new ux(o,u,this.afs)}snapshotChanges(){return function yP(n,e){return sx(n,e).pipe(cf(void 0),Yy(),(0,I.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,I.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Vt.D)(this.ref.get(e)).pipe(Wr.iC)}}class wP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?JI(this.query,this.afs.schedulers.outsideAngular).pipe((0,I.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Bi(t=>t.length>0),Wr.iC):JI(this.query,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}auditTrail(e){return this.stateChanges(e).pipe(fd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ax(e);return ox(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return sS(this.query,this.afs.schedulers.outsideAngular).pipe((0,I.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Wr.iC)}get(e){return(0,Vt.D)(this.query.get(e)).pipe(Wr.iC)}}const lx=new f.OlP("angularfire2.enableFirestorePersistence"),dx=new f.OlP("angularfire2.firestore.persistenceSettings"),EP=new f.OlP("angularfire2.firestore.settings"),IP=new f.OlP("angularfire2.firestore.use-emulator");function hx(n,e=(t=>t)){return{query:e(n),ref:n}}let fx=(()=>{class n{constructor(t,r,o,u,l,m,w,C,A,N,$,te,he,Pe,je,Ht,zt){this.schedulers=w;const Bt=(0,ss.on)(t,m,r),jt=A;N&&rx(Bt,m,$,he,Pe,je,te,Ht),[this.firestore,this.persistenceEnabled$]=(0,ss.cc)(`${Bt.name}.firestore`,"AngularFirestore",Bt.name,()=>{const Ft=m.runOutsideAngular(()=>Bt.firestore());if(u&&Ft.settings(u),jt&&Ft.useEmulator(...jt),o&&!pc(l)){const qt=()=>{try{return(0,Vt.D)(Ft.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Yr){return typeof console<"u"&&console.warn(Yr),Ke(!1)}};return[Ft,m.runOutsideAngular(qt)]}return[Ft,Ke(!1)]},[u,jt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=hx(o,r),m=this.schedulers.ngZone.run(()=>u);return new ux(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new wP(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new cx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ss.Dh),f.LFG(ss.xv,8),f.LFG(lx,8),f.LFG(EP,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Wr.HU),f.LFG(dx,8),f.LFG(IP,8),f.LFG(ix,8),f.LFG(QM,8),f.LFG(JM,8),f.LFG(XM,8),f.LFG(ex,8),f.LFG(tx,8),f.LFG(nx,8),f.LFG(rS,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),DP=(()=>{class n{constructor(){pP.Z.registerVersion("angularfire",Wr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:lx,useValue:!0},{provide:dx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[fx]}),n})();class Vh{constructor(e){this.db=e,this.dbPath="/tutorials",this.tutorialsRef=e.collection(this.dbPath)}getAll(){return this.tutorialsRef}create(e){return this.tutorialsRef.add({...e})}update(e,t){return this.tutorialsRef.doc(e).update(t)}delete(e){return this.tutorialsRef.doc(e).delete()}}Vh.\u0275fac=function(e){return new(e||Vh)(f.LFG(fx))},Vh.\u0275prov=f.Yz7({token:Vh,factory:Vh.\u0275fac,providedIn:"root"});let px=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Yp=(()=>{class n extends px{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const ac=new f.OlP("NgValueAccessor"),TP={provide:ac,useExisting:(0,f.Gpc)(()=>l0),multi:!0},AP=new f.OlP("CompositionEventMode");let l0=(()=>{class n extends px{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function SP(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(AP,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([TP]),f.qOj]}),n})();const Wi=new f.OlP("NgValidators"),Bh=new f.OlP("NgAsyncValidators");function _x(n){return function Uh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function XI(n){return null}function bx(n){return null!=n}function Tx(n){return(0,f.QGY)(n)?(0,Vt.D)(n):n}function Sx(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Ax(n,e){return e.map(t=>t(n))}function Mx(n){return n.map(e=>function RP(n){return!n.validate}(e)?e:t=>e.validate(t))}function aS(n){return null!=n?function xx(n){if(!n)return null;const e=n.filter(bx);return 0==e.length?null:function(t){return Sx(Ax(t,e))}}(Mx(n)):null}function uS(n){return null!=n?function Rx(n){if(!n)return null;const e=n.filter(bx);return 0==e.length?null:function(t){return function CP(...n){const e=(0,Ui.jO)(n),{args:t,keys:r}=Fo(n),o=new Ei.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,C=l;for(let A=0;A<l;A++){let N=!1;(0,Tn.Xf)(t[A]).subscribe((0,Y.x)(u,$=>{N||(N=!0,C--),m[A]=$},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?K(r,m):m),u.complete())}))}});return e?o.pipe(F(e)):o}(Ax(t,e).map(Tx)).pipe((0,I.U)(Sx))}}(Mx(n)):null}function Nx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cS(n){return n?Array.isArray(n)?n:[n]:[]}function eD(n,e){return Array.isArray(n)?n.includes(e):n===e}function kx(n,e){const t=cS(e);return cS(n).forEach(o=>{eD(t,o)||t.push(o)}),t}function Fx(n,e){return cS(e).filter(t=>!eD(n,t))}class Lx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=aS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=uS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ps extends Lx{get formDirective(){return null}get path(){return null}}class jh extends Lx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vx{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let lS=(()=>{class n extends Vx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(jh,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})();const d0="VALID",nD="INVALID",iy="PENDING",h0="DISABLED";function rD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class $x{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===d0}get invalid(){return this.status===nD}get pending(){return this.status==iy}get disabled(){return this.status===h0}get enabled(){return this.status!==h0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(kx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Fx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Fx(e,this._rawAsyncValidators))}hasValidator(e){return eD(this._rawValidators,e)}hasAsyncValidator(e){return eD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=iy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=h0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=d0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===d0||this.status===iy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?h0:d0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=iy,this._hasOwnPendingAsyncValidator=!0;const t=Tx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?h0:this.errors?nD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(iy)?iy:this._anyControlsHaveStatus(nD)?nD:d0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function UP(n){return Array.isArray(n)?aS(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function BP(n){return Array.isArray(n)?uS(n):n||null}(this._rawAsyncValidators)}}const f0=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>yS}),yS="always";function p0(n,e,t=yS){(function vS(n,e){const t=function Ox(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Nx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Px(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Nx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();oD(e._rawValidators,o),oD(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function HP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Hx(n,e)})}(n,e),function zP(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function GP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Hx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function $P(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function oD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Hx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Wx(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Kx=class extends $x{constructor(e=null,t,r){super(function pS(n){return(rD(n)?n.validators:n)||null}(t),function gS(n,e){return(rD(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Wx(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Wx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},XP={provide:jh,useExisting:(0,f.Gpc)(()=>uD)},Qx=(()=>Promise.resolve())();let uD=(()=>{class n extends jh{constructor(t,r,o,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new Kx,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function ES(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===l0?t=u:function KP(n){return Object.getPrototypeOf(n.constructor)===Yp}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function wS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){p0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Qx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,f.D6c)(r);Qx.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function iD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ps,9),f.Y36(Wi,10),f.Y36(Bh,10),f.Y36(ac,10),f.Y36(f.sBO,8),f.Y36(f0,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([XP]),f.qOj,f.TTD]}),n})(),Xx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),Qp=(()=>{class n{constructor(){this._validator=XI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):XI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const vk={provide:Wi,useExisting:(0,f.Gpc)(()=>cD),multi:!0};let cD=(()=>{class n extends Qp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=t=>_x}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([vk]),f.qOj]}),n})(),Ck=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Xx]}),n})(),bk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:f0,useValue:t.callSetDisabledState??yS}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Ck]}),n})();function Sk(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div"),f._UZ(1,"div",2),f.TgZ(2,"label",3),f._uU(3,"Title"),f.qZA(),f.TgZ(4,"input",4),f.NdJ("ngModelChange",function(o){f.CHM(t);const u=f.oxw();return f.KtG(u.tutorial.title=o)}),f.qZA(),f.TgZ(5,"div",2)(6,"label",5),f._uU(7,"Description"),f.qZA(),f.TgZ(8,"input",6),f.NdJ("ngModelChange",function(o){f.CHM(t);const u=f.oxw();return f.KtG(u.tutorial.description=o)}),f.qZA()(),f.TgZ(9,"button",7),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return f.KtG(o.saveNote())}),f._uU(10,"Submit"),f.qZA()()}if(2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngModel",t.tutorial.title),f.xp6(4),f.Q6J("ngModel",t.tutorial.description)}}function Ak(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"h4"),f._uU(2,"You submitted successfully!"),f.qZA(),f.TgZ(3,"button",8),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return f.KtG(o.newTutorial())}),f._uU(4,"Add"),f.qZA()()}}class m0{constructor(e){this.tutorialService=e,this.tutorial=new sw,this.submitted=!1}saveNote(){this.tutorialService.create(this.tutorial).then(()=>{console.log("tutorial created successfully"),this.submitted=!0})}newTutorial(){this.tutorial=new sw,this.submitted=!1}}function Mk(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",8),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return f.KtG(o.updatePublished(!1))}),f._uU(1," Unpublish "),f.qZA()}}function xk(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",8),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return f.KtG(o.updatePublished(!0))}),f._uU(1," Publish "),f.qZA()}}m0.\u0275fac=function(e){return new(e||m0)(f.Y36(Vh))},m0.\u0275cmp=f.Xpm({type:m0,selectors:[["app-add-tutorial"]],decls:3,vars:2,consts:[[1,"submit-form"],[4,"ngIf"],[1,"form-group"],["for","title"],["type","text","id","title","required","","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["type","text","id","description","required","","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.YNc(1,Sk,11,2,"div",1),f.YNc(2,Ak,5,0,"div",1),f.qZA()),2&e&&(f.xp6(1),f.Q6J("ngIf",!t.submitted),f.xp6(1),f.Q6J("ngIf",t.submitted))},dependencies:[dn,l0,lS,cD,uD],styles:[".submit-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}"]});class y0{constructor(e){this.tutorialService=e,this.refreshList=new f.vpe,this.currentTutorial={title:"",description:"",published:!1}}ngOnChanges(){this.currentTutorial={...this.tutorial}}updatePublished(e){this.currentTutorial.id&&this.tutorialService.update(this.currentTutorial.id,{published:e}).then(()=>{this.currentTutorial.published=e})}deleteTutorial(){this.currentTutorial.id&&(this.tutorialService.delete(this.currentTutorial.id),this.refreshList.emit())}updateTutorial(){this.currentTutorial.id&&this.tutorialService.update(this.currentTutorial.id,{title:this.currentTutorial.title,description:this.currentTutorial.description})}}function Rk(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"li",5),f.NdJ("click",function(){const o=f.CHM(t),u=o.$implicit,l=o.index,m=f.oxw();return f.KtG(m.setActiveTutorial(u,l))}),f._uU(1),f.qZA()}if(2&n){const t=e.$implicit,r=e.index,o=f.oxw();f.ekj("active",r==o.currentIndex),f.xp6(1),f.hij(" ",t.title," ")}}function Nk(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"app-tutorial-details",6),f.NdJ("refreshList",function(){f.CHM(t);const o=f.oxw();return f.KtG(o.refreshList())}),f.qZA()()}if(2&n){const t=f.oxw();f.xp6(1),f.Q6J("tutorial",t.currentTutorial)}}function Ok(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"Please click on a tutorial..."),f.qZA())}y0.\u0275fac=function(e){return new(e||y0)(f.Y36(Vh))},y0.\u0275cmp=f.Xpm({type:y0,selectors:[["app-tutorial-details"]],inputs:{tutorial:"tutorial"},outputs:{refreshList:"refreshList"},features:[f.TTD],decls:20,vars:5,consts:[[1,"form-group"],["for","title",1,"form-control"],["id","title","name","title","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","description",1,"form-control"],["id","description","name","description","type","text",1,"form-control",3,"ngModel","ngModelChange"],["class","badge badge-primary mr-2",3,"click",4,"ngIf"],[1,"badge","badge-danger","mr-2",3,"click"],["type","submit",1,"bagde","badge-success",3,"click"],[1,"badge","badge-primary","mr-2",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"div")(1,"div",0)(2,"label",1),f._uU(3," Title "),f.qZA(),f.TgZ(4,"input",2),f.NdJ("ngModelChange",function(o){return t.currentTutorial.title=o}),f.qZA()(),f.TgZ(5,"div",0)(6,"label",3),f._uU(7," Description "),f.qZA(),f.TgZ(8,"input",4),f.NdJ("ngModelChange",function(o){return t.currentTutorial.description=o}),f.qZA()(),f.TgZ(9,"div",0)(10,"label")(11,"strong"),f._uU(12,"Status:"),f.qZA()(),f._uU(13),f.qZA(),f.YNc(14,Mk,2,0,"button",5),f.YNc(15,xk,2,0,"button",5),f.TgZ(16,"button",6),f.NdJ("click",function(){return t.deleteTutorial()}),f._uU(17," Delete "),f.qZA(),f.TgZ(18,"button",7),f.NdJ("click",function(){return t.updateTutorial()}),f._uU(19," Update "),f.qZA()()),2&e&&(f.xp6(4),f.Q6J("ngModel",t.currentTutorial.title),f.xp6(4),f.Q6J("ngModel",t.currentTutorial.description),f.xp6(5),f.hij(" ",t.currentTutorial.published?"published":"pending"," "),f.xp6(1),f.Q6J("ngIf",t.currentTutorial.published),f.xp6(1),f.Q6J("ngIf",!t.currentTutorial.published))},dependencies:[dn,l0,lS,uD]});class v0{constructor(e){this.tutorialService=e,this.tutorials=[]}ngOnInit(){this.getData()}getData(){this.tutorialService.getAll().valueChanges({idField:"id"}).subscribe(e=>{this.tutorials=e})}setActiveTutorial(e,t){this.currentTutorial=e,this.currentIndex=t}refreshList(){this.currentTutorial=void 0,this.currentIndex=-1,this.getData()}}v0.\u0275fac=function(e){return new(e||v0)(f.Y36(Vh))},v0.\u0275cmp=f.Xpm({type:v0,selectors:[["app-tutorials-list"]],decls:9,vars:3,consts:[[1,"list","row"],[1,"col-md-6"],[1,"list-group"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"list-group-item",3,"click"],[3,"tutorial","refreshList"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h4"),f._uU(3,"Tutorials list"),f.qZA(),f.TgZ(4,"ul",2),f.YNc(5,Rk,2,3,"li",3),f.qZA()(),f.TgZ(6,"div",1),f.YNc(7,Nk,2,1,"div",4),f.YNc(8,Ok,2,0,"div",4),f.qZA()()),2&e&&(f.xp6(5),f.Q6J("ngForOf",t.tutorials),f.xp6(2),f.Q6J("ngIf",t.currentTutorial),f.xp6(1),f.Q6J("ngIf",!t.currentTutorial))},dependencies:[Qi,dn,y0],styles:[".list[_ngcontent-%COMP%]{text-align:left;max-width:750px;margin:auto}"]});const Pk=[{path:"add",component:m0},{path:"tutorials",component:v0},{path:"",redirectTo:"tutorials",pathMatch:"full"}];class sy{}sy.\u0275fac=function(e){return new(e||sy)},sy.\u0275mod=f.oAB({type:sy}),sy.\u0275inj=f.cJS({imports:[Wy.forRoot(Pk),Wy]});class _0{constructor(){this.title="Angular Firebase CRUD app"}}_0.\u0275fac=function(e){return new(e||_0)},_0.\u0275cmp=f.Xpm({type:_0,selectors:[["app-root"]],decls:14,vars:1,consts:[[1,"navbar","navbar-expand","navbar-dark","bg-dark","mb-2"],["href","#",1,"navbar-brand"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","/add",1,"nav-link"],["routerLink","/tutorials",1,"nav-link"],[1,"container","mt-3"]],template:function(e,t){1&e&&(f.TgZ(0,"nav",0)(1,"a",1),f._uU(2,"Angular Firebase CRUD"),f.qZA(),f.TgZ(3,"div",2)(4,"li",3)(5,"a",4),f._uU(6,"Add"),f.qZA()(),f.TgZ(7,"li",3)(8,"a",5),f._uU(9,"Tutorials"),f.qZA()()()(),f.TgZ(10,"div",6)(11,"h2"),f._uU(12),f.qZA()(),f._UZ(13,"router-outlet")),2&e&&(f.xp6(12),f.Oqu(t.title))},dependencies:[T0,kf]});class oy{}oy.\u0275fac=function(e){return new(e||oy)},oy.\u0275mod=f.oAB({type:oy,bootstrap:[_0]}),oy.\u0275inj=f.cJS({imports:[kc,sy,ss.hO.initializeApp({apiKey:"AIzaSyBQv3R9koPO21fwwVIK_hfce-ckFE5gSxc",authDomain:"angular-firebase-crud-92141.firebaseapp.com",projectId:"angular-firebase-crud-92141",storageBucket:"angular-firebase-crud-92141.appspot.com",messagingSenderId:"691636499347",appId:"1:691636499347:web:21c8937340fa6e2d8d6e66"}),DP,bk]}),Li().bootstrapModule(oy).catch(n=>console.error(n))},9751:(it,we,P)=>{P.d(we,{y:()=>ce});var f=P(2961),Q=P(727),O=P(8822),re=P(9635),ie=P(2416),se=P(576),fe=P(2806);let ce=(()=>{class W{constructor(Ie){Ie&&(this._subscribe=Ie)}lift(Ie){const $e=new W;return $e.source=this,$e.operator=Ie,$e}subscribe(Ie,$e,tt){const de=function B(W){return W&&W instanceof f.Lv||function U(W){return W&&(0,se.m)(W.next)&&(0,se.m)(W.error)&&(0,se.m)(W.complete)}(W)&&(0,Q.Nn)(W)}(Ie)?Ie:new f.Hp(Ie,$e,tt);return(0,fe.x)(()=>{const{operator:De,source:Ee}=this;de.add(De?De.call(de,Ee):Ee?this._subscribe(de):this._trySubscribe(de))}),de}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch($e){Ie.error($e)}}forEach(Ie,$e){return new($e=ue($e))((tt,de)=>{const De=new f.Hp({next:Ee=>{try{Ie(Ee)}catch(Oe){de(Oe),De.unsubscribe()}},error:de,complete:tt});this.subscribe(De)})}_subscribe(Ie){var $e;return null===($e=this.source)||void 0===$e?void 0:$e.subscribe(Ie)}[O.L](){return this}pipe(...Ie){return(0,re.U)(Ie)(this)}toPromise(Ie){return new(Ie=ue(Ie))(($e,tt)=>{let de;this.subscribe(De=>de=De,De=>tt(De),()=>$e(de))})}}return W.create=ke=>new W(ke),W})();function ue(W){var ke;return null!==(ke=W??ie.v.Promise)&&void 0!==ke?ke:Promise}},7579:(it,we,P)=>{P.d(we,{x:()=>fe});var f=P(9751),Q=P(727);const re=(0,P(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=P(8737),se=P(2806);let fe=(()=>{class ue extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const W=new ce(this,this);return W.operator=B,W}_throwIfClosed(){if(this.closed)throw new re}next(B){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(B)}})}error(B){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:W}=this;for(;W.length;)W.shift().error(B)}})}complete(){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:W,isStopped:ke,observers:Ie}=this;return W||ke?Q.Lc:(this.currentObservers=null,Ie.push(B),new Q.w0(()=>{this.currentObservers=null,(0,ie.P)(Ie,B)}))}_checkFinalizedStatuses(B){const{hasError:W,thrownError:ke,isStopped:Ie}=this;W?B.error(ke):Ie&&B.complete()}asObservable(){const B=new f.y;return B.source=this,B}}return ue.create=(U,B)=>new ce(U,B),ue})();class ce extends fe{constructor(U,B){super(),this.destination=U,this.source=B}next(U){var B,W;null===(W=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===W||W.call(B,U)}error(U){var B,W;null===(W=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===W||W.call(B,U)}complete(){var U,B;null===(B=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===B||B.call(U)}_subscribe(U){var B,W;return null!==(W=null===(B=this.source)||void 0===B?void 0:B.subscribe(U))&&void 0!==W?W:Q.Lc}}},2961:(it,we,P)=>{P.d(we,{Hp:()=>tt,Lv:()=>W});var f=P(576),Q=P(727),O=P(2416),re=P(7849);function ie(){}const se=ue("C",void 0,void 0);function ue(Ae,ve,Se){return{kind:Ae,value:ve,error:Se}}var U=P(3410),B=P(2806);class W extends Q.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,Q.Nn)(ve)&&ve.add(this)):this.destination=Oe}static create(ve,Se,Ve){return new tt(ve,Se,Ve)}next(ve){this.isStopped?Ee(function ce(Ae){return ue("N",Ae,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ee(function fe(Ae){return ue("E",void 0,Ae)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ee(se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function Ie(Ae,ve){return ke.call(Ae,ve)}class $e{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Se}=this;if(Se.next)try{Se.next(ve)}catch(Ve){de(Ve)}}error(ve){const{partialObserver:Se}=this;if(Se.error)try{Se.error(ve)}catch(Ve){de(Ve)}else de(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Se){de(Se)}}}class tt extends W{constructor(ve,Se,Ve){let Re;if(super(),(0,f.m)(ve)||!ve)Re={next:ve??void 0,error:Se??void 0,complete:Ve??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(ve),V.unsubscribe=()=>this.unsubscribe(),Re={next:ve.next&&Ie(ve.next,V),error:ve.error&&Ie(ve.error,V),complete:ve.complete&&Ie(ve.complete,V)}):Re=ve}this.destination=new $e(Re)}}function de(Ae){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Ae):(0,re.h)(Ae)}function Ee(Ae,ve){const{onStoppedNotification:Se}=O.v;Se&&U.z.setTimeout(()=>Se(Ae,ve))}const Oe={closed:!0,next:ie,error:function De(Ae){throw Ae},complete:ie}},727:(it,we,P)=>{P.d(we,{Lc:()=>se,w0:()=>ie,Nn:()=>fe});var f=P(576);const O=(0,P(3888).d)(ue=>function(B){ue(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((W,ke)=>`${ke+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var re=P(8737);class ie{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Ie of B)Ie.remove(this);else B.remove(this);const{initialTeardown:W}=this;if((0,f.m)(W))try{W()}catch(Ie){U=Ie instanceof O?Ie.errors:[Ie]}const{_finalizers:ke}=this;if(ke){this._finalizers=null;for(const Ie of ke)try{ce(Ie)}catch($e){U=U??[],$e instanceof O?U=[...U,...$e.errors]:U.push($e)}}if(U)throw new O(U)}}add(U){var B;if(U&&U!==this)if(this.closed)ce(U);else{if(U instanceof ie){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(U)}}_hasParent(U){const{_parentage:B}=this;return B===U||Array.isArray(B)&&B.includes(U)}_addParent(U){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(U),B):B?[B,U]:U}_removeParent(U){const{_parentage:B}=this;B===U?this._parentage=null:Array.isArray(B)&&(0,re.P)(B,U)}remove(U){const{_finalizers:B}=this;B&&(0,re.P)(B,U),U instanceof ie&&U._removeParent(this)}}ie.EMPTY=(()=>{const ue=new ie;return ue.closed=!0,ue})();const se=ie.EMPTY;function fe(ue){return ue instanceof ie||ue&&"closed"in ue&&(0,f.m)(ue.remove)&&(0,f.m)(ue.add)&&(0,f.m)(ue.unsubscribe)}function ce(ue){(0,f.m)(ue)?ue():ue.unsubscribe()}},2416:(it,we,P)=>{P.d(we,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,we,P)=>{P.d(we,{E:()=>Q});const Q=new(P(9751).y)(ie=>ie.complete())},8996:(it,we,P)=>{P.d(we,{D:()=>ve});var f=P(8421),Q=P(5363),O=P(9468),se=P(9751),ce=P(2202),ue=P(576),U=P(9672);function W(Se,Ve){if(!Se)throw new Error("Iterable cannot be null");return new se.y(Re=>{(0,U.f)(Re,Ve,()=>{const V=Se[Symbol.asyncIterator]();(0,U.f)(Re,Ve,()=>{V.next().then(ye=>{ye.done?Re.complete():Re.next(ye.value)})},0,!0)})})}var ke=P(3670),Ie=P(8239),$e=P(1144),tt=P(6495),de=P(2206),De=P(4532),Ee=P(3260);function ve(Se,Ve){return Ve?function Ae(Se,Ve){if(null!=Se){if((0,ke.c)(Se))return function re(Se,Ve){return(0,f.Xf)(Se).pipe((0,O.R)(Ve),(0,Q.Q)(Ve))}(Se,Ve);if((0,$e.z)(Se))return function fe(Se,Ve){return new se.y(Re=>{let V=0;return Ve.schedule(function(){V===Se.length?Re.complete():(Re.next(Se[V++]),Re.closed||this.schedule())})})}(Se,Ve);if((0,Ie.t)(Se))return function ie(Se,Ve){return(0,f.Xf)(Se).pipe((0,O.R)(Ve),(0,Q.Q)(Ve))}(Se,Ve);if((0,de.D)(Se))return W(Se,Ve);if((0,tt.T)(Se))return function B(Se,Ve){return new se.y(Re=>{let V;return(0,U.f)(Re,Ve,()=>{V=Se[ce.h](),(0,U.f)(Re,Ve,()=>{let ye,z;try{({value:ye,done:z}=V.next())}catch(Z){return void Re.error(Z)}z?Re.complete():Re.next(ye)},0,!0)}),()=>(0,ue.m)(V?.return)&&V.return()})}(Se,Ve);if((0,Ee.L)(Se))return function Oe(Se,Ve){return W((0,Ee.Q)(Se),Ve)}(Se,Ve)}throw(0,De.z)(Se)}(Se,Ve):(0,f.Xf)(Se)}},8421:(it,we,P)=>{P.d(we,{Xf:()=>ke});var f=P(655),Q=P(1144),O=P(8239),re=P(9751),ie=P(3670),se=P(2206),fe=P(4532),ce=P(6495),ue=P(3260),U=P(576),B=P(7849),W=P(8822);function ke(Ae){if(Ae instanceof re.y)return Ae;if(null!=Ae){if((0,ie.c)(Ae))return function Ie(Ae){return new re.y(ve=>{const Se=Ae[W.L]();if((0,U.m)(Se.subscribe))return Se.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,Q.z)(Ae))return function $e(Ae){return new re.y(ve=>{for(let Se=0;Se<Ae.length&&!ve.closed;Se++)ve.next(Ae[Se]);ve.complete()})}(Ae);if((0,O.t)(Ae))return function tt(Ae){return new re.y(ve=>{Ae.then(Se=>{ve.closed||(ve.next(Se),ve.complete())},Se=>ve.error(Se)).then(null,B.h)})}(Ae);if((0,se.D)(Ae))return De(Ae);if((0,ce.T)(Ae))return function de(Ae){return new re.y(ve=>{for(const Se of Ae)if(ve.next(Se),ve.closed)return;ve.complete()})}(Ae);if((0,ue.L)(Ae))return function Ee(Ae){return De((0,ue.Q)(Ae))}(Ae)}throw(0,fe.z)(Ae)}function De(Ae){return new re.y(ve=>{(function Oe(Ae,ve){var Se,Ve,Re,V;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Se=(0,f.KL)(Ae);!(Ve=yield Se.next()).done;)if(ve.next(Ve.value),ve.closed)return}catch(ye){Re={error:ye}}finally{try{Ve&&!Ve.done&&(V=Se.return)&&(yield V.call(Se))}finally{if(Re)throw Re.error}}ve.complete()})})(Ae,ve).catch(Se=>ve.error(Se))})}},6451:(it,we,P)=>{P.d(we,{T:()=>se});var f=P(8189),Q=P(8421),O=P(515),re=P(7669),ie=P(8996);function se(...fe){const ce=(0,re.yG)(fe),ue=(0,re._6)(fe,1/0),U=fe;return U.length?1===U.length?(0,Q.Xf)(U[0]):(0,f.J)(ue)((0,ie.D)(U,ce)):O.E}},5403:(it,we,P)=>{P.d(we,{x:()=>Q});var f=P(2961);function Q(re,ie,se,fe,ce){return new O(re,ie,se,fe,ce)}class O extends f.Lv{constructor(ie,se,fe,ce,ue,U){super(ie),this.onFinalize=ue,this.shouldUnsubscribe=U,this._next=se?function(B){try{se(B)}catch(W){ie.error(W)}}:super._next,this._error=ce?function(B){try{ce(B)}catch(W){ie.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(B){ie.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:se}=this;super.unsubscribe(),!se&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(it,we,P)=>{P.d(we,{U:()=>O});var f=P(4482),Q=P(5403);function O(re,ie){return(0,f.e)((se,fe)=>{let ce=0;se.subscribe((0,Q.x)(fe,ue=>{fe.next(re.call(ie,ue,ce++))}))})}},8189:(it,we,P)=>{P.d(we,{J:()=>O});var f=P(5577),Q=P(4671);function O(re=1/0){return(0,f.z)(Q.y,re)}},5577:(it,we,P)=>{P.d(we,{z:()=>ce});var f=P(4004),Q=P(8421),O=P(4482),re=P(9672),ie=P(5403),fe=P(576);function ce(ue,U,B=1/0){return(0,fe.m)(U)?ce((W,ke)=>(0,f.U)((Ie,$e)=>U(W,Ie,ke,$e))((0,Q.Xf)(ue(W,ke))),B):("number"==typeof U&&(B=U),(0,O.e)((W,ke)=>function se(ue,U,B,W,ke,Ie,$e,tt){const de=[];let De=0,Ee=0,Oe=!1;const Ae=()=>{Oe&&!de.length&&!De&&U.complete()},ve=Ve=>De<W?Se(Ve):de.push(Ve),Se=Ve=>{Ie&&U.next(Ve),De++;let Re=!1;(0,Q.Xf)(B(Ve,Ee++)).subscribe((0,ie.x)(U,V=>{ke?.(V),Ie?ve(V):U.next(V)},()=>{Re=!0},void 0,()=>{if(Re)try{for(De--;de.length&&De<W;){const V=de.shift();$e?(0,re.f)(U,$e,()=>Se(V)):Se(V)}Ae()}catch(V){U.error(V)}}))};return ue.subscribe((0,ie.x)(U,ve,()=>{Oe=!0,Ae()})),()=>{tt?.()}}(W,ke,ue,B)))}},5363:(it,we,P)=>{P.d(we,{Q:()=>re});var f=P(9672),Q=P(4482),O=P(5403);function re(ie,se=0){return(0,Q.e)((fe,ce)=>{fe.subscribe((0,O.x)(ce,ue=>(0,f.f)(ce,ie,()=>ce.next(ue),se),()=>(0,f.f)(ce,ie,()=>ce.complete(),se),ue=>(0,f.f)(ce,ie,()=>ce.error(ue),se)))})}},3099:(it,we,P)=>{P.d(we,{B:()=>ie});var f=P(8421),Q=P(7579),O=P(2961),re=P(4482);function ie(fe={}){const{connector:ce=(()=>new Q.x),resetOnError:ue=!0,resetOnComplete:U=!0,resetOnRefCountZero:B=!0}=fe;return W=>{let ke,Ie,$e,tt=0,de=!1,De=!1;const Ee=()=>{Ie?.unsubscribe(),Ie=void 0},Oe=()=>{Ee(),ke=$e=void 0,de=De=!1},Ae=()=>{const ve=ke;Oe(),ve?.unsubscribe()};return(0,re.e)((ve,Se)=>{tt++,!De&&!de&&Ee();const Ve=$e=$e??ce();Se.add(()=>{tt--,0===tt&&!De&&!de&&(Ie=se(Ae,B))}),Ve.subscribe(Se),!ke&&tt>0&&(ke=new O.Hp({next:Re=>Ve.next(Re),error:Re=>{De=!0,Ee(),Ie=se(Oe,ue,Re),Ve.error(Re)},complete:()=>{de=!0,Ee(),Ie=se(Oe,U),Ve.complete()}}),(0,f.Xf)(ve).subscribe(ke))})(W)}}function se(fe,ce,...ue){if(!0===ce)return void fe();if(!1===ce)return;const U=new O.Hp({next:()=>{U.unsubscribe(),fe()}});return ce(...ue).subscribe(U)}},9468:(it,we,P)=>{P.d(we,{R:()=>Q});var f=P(4482);function Q(O,re=0){return(0,f.e)((ie,se)=>{se.add(O.schedule(()=>ie.subscribe(se),re))})}},8505:(it,we,P)=>{P.d(we,{b:()=>ie});var f=P(576),Q=P(4482),O=P(5403),re=P(4671);function ie(se,fe,ce){const ue=(0,f.m)(se)||fe||ce?{next:se,error:fe,complete:ce}:se;return ue?(0,Q.e)((U,B)=>{var W;null===(W=ue.subscribe)||void 0===W||W.call(ue);let ke=!0;U.subscribe((0,O.x)(B,Ie=>{var $e;null===($e=ue.next)||void 0===$e||$e.call(ue,Ie),B.next(Ie)},()=>{var Ie;ke=!1,null===(Ie=ue.complete)||void 0===Ie||Ie.call(ue),B.complete()},Ie=>{var $e;ke=!1,null===($e=ue.error)||void 0===$e||$e.call(ue,Ie),B.error(Ie)},()=>{var Ie,$e;ke&&(null===(Ie=ue.unsubscribe)||void 0===Ie||Ie.call(ue)),null===($e=ue.finalize)||void 0===$e||$e.call(ue)}))}):re.y}},4408:(it,we,P)=>{P.d(we,{o:()=>ie});var f=P(727);class Q extends f.w0{constructor(fe,ce){super()}schedule(fe,ce=0){return this}}const O={setInterval(se,fe,...ce){const{delegate:ue}=O;return ue?.setInterval?ue.setInterval(se,fe,...ce):setInterval(se,fe,...ce)},clearInterval(se){const{delegate:fe}=O;return(fe?.clearInterval||clearInterval)(se)},delegate:void 0};var re=P(8737);class ie extends Q{constructor(fe,ce){super(fe,ce),this.scheduler=fe,this.work=ce,this.pending=!1}schedule(fe,ce=0){var ue;if(this.closed)return this;this.state=fe;const U=this.id,B=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(B,U,ce)),this.pending=!0,this.delay=ce,this.id=null!==(ue=this.id)&&void 0!==ue?ue:this.requestAsyncId(B,this.id,ce),this}requestAsyncId(fe,ce,ue=0){return O.setInterval(fe.flush.bind(fe,this),ue)}recycleAsyncId(fe,ce,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return ce;null!=ce&&O.clearInterval(ce)}execute(fe,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(fe,ce);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,ce){let U,ue=!1;try{this.work(fe)}catch(B){ue=!0,U=B||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:fe,scheduler:ce}=this,{actions:ue}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(ue,this),null!=fe&&(this.id=this.recycleAsyncId(ce,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,we,P)=>{P.d(we,{v:()=>O});var f=P(6063);class Q{constructor(ie,se=Q.now){this.schedulerActionCtor=ie,this.now=se}schedule(ie,se=0,fe){return new this.schedulerActionCtor(this,ie).schedule(fe,se)}}Q.now=f.l.now;class O extends Q{constructor(ie,se=Q.now){super(ie,se),this.actions=[],this._active=!1}flush(ie){const{actions:se}=this;if(this._active)return void se.push(ie);let fe;this._active=!0;do{if(fe=ie.execute(ie.state,ie.delay))break}while(ie=se.shift());if(this._active=!1,fe){for(;ie=se.shift();)ie.unsubscribe();throw fe}}}},4986:(it,we,P)=>{P.d(we,{z:()=>O});var f=P(4408);const O=new(P(7565).v)(f.o)},6063:(it,we,P)=>{P.d(we,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(it,we,P)=>{P.d(we,{z:()=>f});const f={setTimeout(Q,O,...re){const{delegate:ie}=f;return ie?.setTimeout?ie.setTimeout(Q,O,...re):setTimeout(Q,O,...re)},clearTimeout(Q){const{delegate:O}=f;return(O?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(it,we,P)=>{P.d(we,{h:()=>Q});const Q=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,we,P)=>{P.d(we,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(it,we,P)=>{P.d(we,{_6:()=>se,jO:()=>re,yG:()=>ie});var f=P(576);function O(fe){return fe[fe.length-1]}function re(fe){return(0,f.m)(O(fe))?fe.pop():void 0}function ie(fe){return function Q(fe){return fe&&(0,f.m)(fe.schedule)}(O(fe))?fe.pop():void 0}function se(fe,ce){return"number"==typeof O(fe)?fe.pop():ce}},8737:(it,we,P)=>{function f(Q,O){if(Q){const re=Q.indexOf(O);0<=re&&Q.splice(re,1)}}P.d(we,{P:()=>f})},3888:(it,we,P)=>{function f(Q){const re=Q(ie=>{Error.call(ie),ie.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}P.d(we,{d:()=>f})},2806:(it,we,P)=>{P.d(we,{O:()=>re,x:()=>O});var f=P(2416);let Q=null;function O(ie){if(f.v.useDeprecatedSynchronousErrorHandling){const se=!Q;if(se&&(Q={errorThrown:!1,error:null}),ie(),se){const{errorThrown:fe,error:ce}=Q;if(Q=null,fe)throw ce}}else ie()}function re(ie){f.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ie)}},9672:(it,we,P)=>{function f(Q,O,re,ie=0,se=!1){const fe=O.schedule(function(){re(),se?Q.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(Q.add(fe),!se)return fe}P.d(we,{f:()=>f})},4671:(it,we,P)=>{function f(Q){return Q}P.d(we,{y:()=>f})},1144:(it,we,P)=>{P.d(we,{z:()=>f});const f=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(it,we,P)=>{P.d(we,{D:()=>Q});var f=P(576);function Q(O){return Symbol.asyncIterator&&(0,f.m)(O?.[Symbol.asyncIterator])}},576:(it,we,P)=>{function f(Q){return"function"==typeof Q}P.d(we,{m:()=>f})},3670:(it,we,P)=>{P.d(we,{c:()=>O});var f=P(8822),Q=P(576);function O(re){return(0,Q.m)(re[f.L])}},6495:(it,we,P)=>{P.d(we,{T:()=>O});var f=P(2202),Q=P(576);function O(re){return(0,Q.m)(re?.[f.h])}},8239:(it,we,P)=>{P.d(we,{t:()=>Q});var f=P(576);function Q(O){return(0,f.m)(O?.then)}},3260:(it,we,P)=>{P.d(we,{L:()=>re,Q:()=>O});var f=P(655),Q=P(576);function O(ie){return(0,f.FC)(this,arguments,function*(){const fe=ie.getReader();try{for(;;){const{value:ce,done:ue}=yield(0,f.qq)(fe.read());if(ue)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ce)}}finally{fe.releaseLock()}})}function re(ie){return(0,Q.m)(ie?.getReader)}},4482:(it,we,P)=>{P.d(we,{A:()=>Q,e:()=>O});var f=P(576);function Q(re){return(0,f.m)(re?.lift)}function O(re){return ie=>{if(Q(ie))return ie.lift(function(se){try{return re(se,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(it,we,P)=>{P.d(we,{U:()=>O,z:()=>Q});var f=P(4671);function Q(...re){return O(re)}function O(re){return 0===re.length?f.y:1===re.length?re[0]:function(se){return re.reduce((fe,ce)=>ce(fe),se)}}},7849:(it,we,P)=>{P.d(we,{h:()=>O});var f=P(2416),Q=P(3410);function O(re){Q.z.setTimeout(()=>{const{onUnhandledError:ie}=f.v;if(!ie)throw re;ie(re)})}},4532:(it,we,P)=>{function f(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(we,{z:()=>f})},655:(it,we,P)=>{function re(z,Z){var ne={};for(var ee in z)Object.prototype.hasOwnProperty.call(z,ee)&&Z.indexOf(ee)<0&&(ne[ee]=z[ee]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(ee=Object.getOwnPropertySymbols(z);Fe<ee.length;Fe++)Z.indexOf(ee[Fe])<0&&Object.prototype.propertyIsEnumerable.call(z,ee[Fe])&&(ne[ee[Fe]]=z[ee[Fe]])}return ne}function ce(z,Z,ne,ee){return new(ne||(ne=Promise))(function(Ne,st){function Xt(Pt){try{At(ee.next(Pt))}catch(ct){st(ct)}}function on(Pt){try{At(ee.throw(Pt))}catch(ct){st(ct)}}function At(Pt){Pt.done?Ne(Pt.value):function Fe(Ne){return Ne instanceof ne?Ne:new ne(function(st){st(Ne)})}(Pt.value).then(Xt,on)}At((ee=ee.apply(z,Z||[])).next())})}function de(z){return this instanceof de?(this.v=z,this):new de(z)}function De(z,Z,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ee=ne.apply(z,Z||[]),Ne=[];return Fe={},st("next"),st("throw"),st("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function st(Yt){ee[Yt]&&(Fe[Yt]=function(ur){return new Promise(function(Ir,dt){Ne.push([Yt,ur,Ir,dt])>1||Xt(Yt,ur)})})}function Xt(Yt,ur){try{!function on(Yt){Yt.value instanceof de?Promise.resolve(Yt.value.v).then(At,Pt):ct(Ne[0][2],Yt)}(ee[Yt](ur))}catch(Ir){ct(Ne[0][3],Ir)}}function At(Yt){Xt("next",Yt)}function Pt(Yt){Xt("throw",Yt)}function ct(Yt,ur){Yt(ur),Ne.shift(),Ne.length&&Xt(Ne[0][0],Ne[0][1])}}function Oe(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Z=z[Symbol.asyncIterator];return Z?Z.call(z):(z=function W(z){var Z="function"==typeof Symbol&&Symbol.iterator,ne=Z&&z[Z],ee=0;if(ne)return ne.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&ee>=z.length&&(z=void 0),{value:z&&z[ee++],done:!z}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),ne={},ee("next"),ee("throw"),ee("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function ee(Ne){ne[Ne]=z[Ne]&&function(st){return new Promise(function(Xt,on){!function Fe(Ne,st,Xt,on){Promise.resolve(on).then(function(At){Ne({value:At,done:Xt})},st)}(Xt,on,(st=z[Ne](st)).done,st.value)})}}}P.d(we,{FC:()=>De,KL:()=>Oe,_T:()=>re,mG:()=>ce,qq:()=>de})},4650:(it,we,P)=>{P.d(we,{$8M:()=>sd,$Z:()=>QD,AFp:()=>nI,AaK:()=>ce,CHM:()=>yc,CRH:()=>Ut,CZH:()=>Mp,CqO:()=>Kg,D6c:()=>DI,EJc:()=>oI,EpF:()=>Yf,F4k:()=>Uu,FYo:()=>L0,FiY:()=>bs,GfV:()=>U0,Gpc:()=>B,JOm:()=>zr,KtG:()=>Zl,LFG:()=>Ue,Lbi:()=>kr,Lck:()=>mE,MMx:()=>yn,NdJ:()=>Av,OlP:()=>sn,Oqu:()=>im,P3R:()=>x0,PXZ:()=>ib,Q6J:()=>bv,QGY:()=>pl,QP$:()=>Fn,Qsj:()=>DD,R0b:()=>$s,RDi:()=>ao,Rgc:()=>Ba,SBq:()=>Of,Sil:()=>xp,Suo:()=>VE,TTD:()=>la,TgZ:()=>th,X6Q:()=>ic,XFs:()=>lt,Xpm:()=>ia,Xts:()=>Sy,Y36:()=>Ud,YKP:()=>ln,YNc:()=>qf,Yjl:()=>oa,Yz7:()=>dt,Z0I:()=>Dr,ZZ4:()=>Up,_Bn:()=>fp,_UZ:()=>Wg,_Vd:()=>Fd,_c5:()=>W_,_uU:()=>rm,aQg:()=>q_,c2e:()=>nc,cJS:()=>Qr,cg1:()=>zv,dDg:()=>nb,dqk:()=>Dt,eFA:()=>O_,ekj:()=>Ov,eoX:()=>Om,f3M:()=>Ze,g9A:()=>xm,h0i:()=>Wn,hGG:()=>zm,hij:()=>gl,iGM:()=>Dh,ifc:()=>Gt,ip1:()=>tI,jDz:()=>wm,kL8:()=>qv,lG2:()=>sa,lqb:()=>nl,lri:()=>hI,n5z:()=>Pc,oAB:()=>En,oxw:()=>Wo,q4F:()=>B0,qLn:()=>Pf,qOj:()=>$f,qZA:()=>Zf,rWj:()=>R_,sBO:()=>ab,sIi:()=>cl,s_b:()=>Ep,soG:()=>Nm,tb:()=>Rm,tp0:()=>b,uIk:()=>Vu,vHH:()=>de,vpe:()=>ls,wAp:()=>_t,xp6:()=>Hy,z2F:()=>ea,zSh:()=>My,zs3:()=>il});var f=P(7579),Q=P(727),O=P(9751),re=P(6451),ie=P(3099);function se(i){for(let s in i)if(i[s]===se)return s;throw Error("Could not find renamed property on target object.")}function fe(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=se({__forward_ref__:se});function B(i){return i.__forward_ref__=B,i.toString=function(){return ce(this())},i}function W(i){return ke(i)?i():i}function ke(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===B}function Ie(i){return i&&!!i.\u0275providers}const tt="https://g.co/ng/security#xss";class de extends Error{constructor(s,a){super(function De(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function Ee(i){return"string"==typeof i?i:null==i?"":String(i)}function Ve(i,s){throw new de(-201,!1)}function Pt(i,s){null==i&&function ct(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function dt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Qr(i){return{providers:i.providers||[],imports:i.imports||[]}}function Fr(i){return Cr(i,br)||Cr(i,an)}function Dr(i){return null!==Fr(i)}function Cr(i,s){return i.hasOwnProperty(s)?i[s]:null}function hi(i){return i&&(i.hasOwnProperty(Gs)||i.hasOwnProperty(Lr))?i[Gs]:null}const br=se({\u0275prov:se}),Gs=se({\u0275inj:se}),an=se({ngInjectableDef:se}),Lr=se({ngInjectorDef:se});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let Ki;function vn(i){const s=Ki;return Ki=i,s}function Tr(i,s,a){const c=Fr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&lt.Optional?null:void 0!==s?s:void Ve(ce(i))}const Dt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Cn={},_n="__NG_DI_FLAG__",pi="ngTempTokenPath",na=/\n/gm,Yi="__source";let Wt;function lr(i){const s=Wt;return Wt=i,s}function xi(i,s=lt.Default){if(void 0===Wt)throw new de(-203,!1);return null===Wt?Tr(i,void 0,s):Wt.get(i,s&lt.Optional?null:void 0,s)}function Ue(i,s=lt.Default){return(function fi(){return Ki}()||xi)(W(i),s)}function Ze(i,s=lt.Default){return Ue(i,vt(s))}function vt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function wt(i){const s=[];for(let a=0;a<i.length;a++){const c=W(i[a]);if(Array.isArray(c)){if(0===c.length)throw new de(900,!1);let d,p=lt.Default;for(let v=0;v<c.length;v++){const E=c[v],D=j(E);"number"==typeof D?-1===D?d=E.token:p|=D:d=E}s.push(Ue(d,p))}else s.push(Ue(c))}return s}function xt(i,s){return i[_n]=s,i.prototype[_n]=s,i}function j(i){return i[_n]}function pe(i){return{toString:i}.toString()}var X=(()=>((X=X||{})[X.OnPush=0]="OnPush",X[X.Default=1]="Default",X))(),Gt=(()=>{return(i=Gt||(Gt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Gt;var i})();const wn={},ft=[],Zn=se({\u0275cmp:se}),Lt=se({\u0275dir:se}),$n=se({\u0275pipe:se}),yo=se({\u0275mod:se}),dr=se({\u0275fac:se}),ra=se({__NG_ELEMENT_ID__:se});let $h=0;function ia(i){return pe(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===X.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||ft,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Gt.Emulated,id:"c"+$h++,styles:i.styles||ft,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},p=i.dependencies,v=i.features;return d.inputs=cc(i.inputs,c),d.outputs=cc(i.outputs),v&&v.forEach(E=>E(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(uc).filter(Fl):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(Mn).filter(Fl):null,d})}function uc(i){return Kt(i)||Hn(i)}function Fl(i){return null!==i}function En(i){return pe(()=>({type:i.type,bootstrap:i.bootstrap||ft,declarations:i.declarations||ft,imports:i.imports||ft,exports:i.exports||ft,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function cc(i,s){if(null==i)return wn;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,s&&(s[d]=p)}return a}const sa=ia;function oa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Kt(i){return i[Zn]||null}function Hn(i){return i[Lt]||null}function Mn(i){return i[$n]||null}function Fn(i){const s=Kt(i)||Hn(i)||Mn(i);return null!==s&&s.standalone}function hr(i,s){const a=i[yo]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function Ur(i){return Array.isArray(i)&&"object"==typeof i[1]}function gi(i){return Array.isArray(i)&&!0===i[1]}function aa(i){return 0!=(4&i.flags)}function mi(i){return i.componentOffset>-1}function lc(i){return 1==(1&i.flags)}function Br(i){return null!==i.template}function ua(i){return 0!=(256&i[2])}function Zs(i,s){return i.hasOwnProperty(dr)?i[dr]:null}class vs{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function la(){return Ys}function Ys(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ka),Wa}function Wa(){const i=da(this),s=i?.current;if(s){const a=i.previous;if(a===wn)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Ka(i,s,a,c){const d=this.declaredInputs[a],p=da(i)||function Za(i,s){return i[Qs]=s}(i,{previous:wn,current:null}),v=p.current||(p.current={}),E=p.previous,D=E[d];v[d]=new vs(D&&D.currentValue,s,E===wn),i[c]=s}la.ngInherit=!0;const Qs="__ngSimpleChanges__";function da(i){return i[Qs]||null}function Nn(i){for(;Array.isArray(i);)i=i[0];return i}function Js(i,s){return Nn(s[i])}function er(i,s){return Nn(s[i.index])}function Co(i,s){return i.data[s]}function Yn(i,s){const a=s[i];return Ur(a)?a:a[0]}function pa(i){return 64==(64&i[2])}function Pi(i,s){return null==s?null:i[s]}function ga(i){i[18]=0}function ma(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const Ct={lFrame:ay(null),bindingsEnabled:!0};function eu(){return Ct.bindingsEnabled}function Ce(){return Ct.lFrame.lView}function Zt(){return Ct.lFrame.tView}function yc(i){return Ct.lFrame.contextLView=i,i[8]}function Zl(i){return Ct.lFrame.contextLView=null,i}function tr(){let i=bo();for(;null!==i&&64===i.type;)i=i.parent;return i}function bo(){return Ct.lFrame.currentTNode}function ei(i,s){const a=Ct.lFrame;a.currentTNode=i,a.isParent=s}function nu(){return Ct.lFrame.isParent}function Xi(){return Ct.lFrame.bindingIndex++}function Ec(i,s){const a=Ct.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ql(s)}function Ql(i){Ct.lFrame.currentDirectiveIndex=i}function Jl(){return Ct.lFrame.currentQueryIndex}function Ic(i){Ct.lFrame.currentQueryIndex=i}function Xl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Wh(i,s,a){if(a&lt.SkipSelf){let d=s,p=i;for(;!(d=d.parent,null!==d||a&lt.Host||(d=Xl(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;s=d,i=p}const c=Ct.lFrame=Kh();return c.currentTNode=s,c.lView=i,!0}function ru(i){const s=Kh(),a=i[1];Ct.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Kh(){const i=Ct.lFrame,s=null===i?null:i.child;return null===s?ay(i):s}function ay(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function eg(){const i=Ct.lFrame;return Ct.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const iu=eg;function tg(){const i=eg();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function jr(){return Ct.lFrame.selectedIndex}function va(i){Ct.lFrame.selectedIndex=i}function hn(){const i=Ct.lFrame;return Co(i.tView,i.selectedIndex)}function ws(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:T,ngOnDestroy:x}=p;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),D&&(i.viewHooks||(i.viewHooks=[])).push(-a,D),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function ni(i,s,a){bc(i,s,3,a)}function su(i,s,a,c){(3&i[2])===a&&bc(i,s,a,c)}function vi(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function bc(i,s,a,c){const p=c??-1,v=s.length-1;let E=0;for(let D=void 0!==c?65535&i[18]:0;D<v;D++)if("number"==typeof s[D+1]){if(E=s[D],null!=c&&E>=c)break}else s[D]<0&&(i[18]+=65536),(E<p||-1==p)&&(ed(i,a,s,D),i[18]=(4294901760&i[18])+D+2),D++}function ed(i,s,a,c){const d=a[c]<0,p=a[c+1],E=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class _a{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function mn(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],v=a[c++],E=a[c++];i.setAttribute(s,v,E,p)}else{const p=d,v=a[++c];Ro(p)?i.setProperty(s,p,v):i.setAttribute(s,p,v),c++}}return c}function xo(i){return 3===i||4===i||6===i}function Ro(i){return 64===i.charCodeAt(0)}function Is(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||ou(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function ou(i,s,a,c,d){let p=0,v=i.length;if(-1===s)v=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){v=-1;break}if(E>s){v=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(i.splice(v,0,s),p=v+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}function nd(i){return-1!==i}function au(i){return 32767&i}function No(i,s){let a=function uu(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let es=!0;function cu(i){const s=es;return es=i,s}let du=0;const xr={};function Oo(i,s){const a=Ea(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,to(c.data,i),to(s,null),to(c.blueprint,null));const d=hu(i,s),p=i.injectorIndex;if(nd(d)){const v=au(d),E=No(d,s),D=E[1].data;for(let T=0;T<8;T++)s[p+T]=E[v+T]|D[v+T]}return s[p+8]=d,p}function to(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ea(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function hu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=id(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function xc(i,s,a){!function Mc(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(ra)&&(c=a[ra]),null==c&&(c=a[ra]=du++);const d=255&c;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function ts(i,s,a){if(a&lt.Optional||void 0!==i)return i;Ve()}function Rc(i,s,a,c){if(a&lt.Optional&&void 0===c&&(c=null),0==(a&(lt.Self|lt.Host))){const d=i[9],p=vn(void 0);try{return d?d.get(s,c,a&lt.Optional):Tr(s,c,a&lt.Optional)}finally{vn(p)}}return ts(c,0,a)}function Qh(i,s,a,c=lt.Default,d){if(null!==i){if(1024&s[2]){const v=function Xh(i,s,a,c,d){let p=i,v=s;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=_i(p,v,a,c|lt.Self,xr);if(E!==xr)return E;let D=p.parent;if(!D){const T=v[21];if(T){const x=T.get(a,xr,c);if(x!==xr)return x}D=id(v),v=v[15]}p=D}return d}(i,s,a,c,xr);if(v!==xr)return v}const p=_i(i,s,a,c,xr);if(p!==xr)return p}return Rc(s,a,c,d)}function _i(i,s,a,c,d){const p=function Oc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ra)?i[ra]:void 0;return"number"==typeof s?s>=0?255&s:Jh:s}(a);if("function"==typeof p){if(!Wh(s,i,c))return c&lt.Host?ts(d,0,c):Rc(s,a,c,d);try{const v=p(c);if(null!=v||c&lt.Optional)return v;Ve()}finally{iu()}}else if("number"==typeof p){let v=null,E=Ea(i,s),D=-1,T=c&lt.Host?s[16][6]:null;for((-1===E||c&lt.SkipSelf)&&(D=-1===E?hu(i,s):s[E+8],-1!==D&&Li(c,!1)?(v=s[1],E=au(D),s=No(D,s)):E=-1);-1!==E;){const x=s[1];if(fu(p,E,x.data)){const k=Nc(E,s,a,v,c,T);if(k!==xr)return k}D=s[E+8],-1!==D&&Li(c,s[1].data[E+8]===T)&&fu(p,E,s)?(v=x,E=au(D),s=No(D,s)):E=-1}}return d}function Nc(i,s,a,c,d,p){const v=s[1],E=v.data[i+8],x=Ia(E,v,a,null==c?mi(E)&&es:c!=v&&0!=(3&E.type),d&lt.Host&&p===E);return null!==x?wi(s,v,x,E):xr}function Ia(i,s,a,c,d){const p=i.providerIndexes,v=s.data,E=1048575&p,D=i.directiveStart,x=p>>20,G=d?E+x:i.directiveEnd;for(let J=c?E:E+x;J<G;J++){const me=v[J];if(J<D&&a===me||J>=D&&me.type===a)return J}if(d){const J=v[D];if(J&&Br(J)&&J.type===a)return D}return null}function wi(i,s,a,c){let d=i[a];const p=s.data;if(function ri(i){return i instanceof _a}(d)){const v=d;v.resolving&&function Ae(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new de(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Oe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ee(i)}(p[a]));const E=cu(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?vn(v.injectImpl):null;Wh(i,c,lt.Default);try{d=i[a]=v.factory(void 0,p,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Yh(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=s.type.prototype;if(c){const v=Ys(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==D&&vn(D),cu(E),v.resolving=!1,iu()}}return d}function fu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Li(i,s){return!(i&lt.Self||i&lt.Host&&s)}class ii{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Qh(this._tNode,this._lView,s,vt(c),a)}}function Jh(){return new ii(tr(),Ce())}function Pc(i){return pe(()=>{const s=i.prototype.constructor,a=s[dr]||kc(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[dr]||kc(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function kc(i){return ke(i)?()=>{const s=kc(W(i));return s&&s()}:Zs(i)}function id(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function sd(i){return function rd(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(xo(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===s)return a[d+1];d+=2}}}return null}(tr(),i)}const Po="__parameters__";function pu(i,s,a){return pe(()=>{const c=function ef(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return E.annotation=v,E;function E(D,T,x){const k=D.hasOwnProperty(Po)?D[Po]:Object.defineProperty(D,Po,{value:[]})[Po];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(v),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class sn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=dt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Vi(i,s){i.forEach(a=>Array.isArray(a)?Vi(a,s):s(a))}function mu(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function ba(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Vt(i,s,a){let c=Ke(i,s);return c>=0?i[1|c]=a:(c=~c,function dd(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Ui(i,s){const a=Ke(i,s);if(a>=0)return i[1|a]}function Ke(i,s){return function oi(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const p=c+(d-c>>1),v=i[p<<a];if(s===v)return p<<a;v>s?d=p:c=p+1}return~(d<<a)}(i,s,1)}const bs=xt(pu("Optional"),8),b=xt(pu("SkipSelf"),4);var zr=(()=>((zr=zr||{})[zr.Important=1]="Important",zr[zr.DashCase=2]="DashCase",zr))();const ui=new Map;let og=0;const vd="__ngContext__";function Nr(i,s){Ur(s)?(i[vd]=s[20],function ag(i){ui.set(i[20],i)}(s)):i[vd]=s}function zc(i,s){return undefined(i,s)}function Ms(i){const s=i[3];return gi(s)?s[3]:s}function Vo(i){return _d(i[13])}function pf(i){return _d(i[4])}function _d(i){for(;null!==i&&!gi(i);)i=i[4];return i}function so(i,s,a,c,d){if(null!=c){let p,v=!1;gi(c)?p=c:Ur(c)&&(v=!0,c=c[0]);const E=Nn(c);0===i&&null!==a?null==d?Du(s,a,E):Aa(s,a,E,d||null,!0):1===i&&null!==a?Aa(s,a,E,d||null,!0):2===i?function oo(i,s,a){const c=Jc(i,s);c&&function bu(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,E,v):3===i&&s.destroyNode(E),null!=p&&function Ef(i,s,a,c,d){const p=a[7];p!==Nn(a)&&so(s,i,c,p,d);for(let E=10;E<a.length;E++){const D=a[E];Su(D[1],D,i,s,c,p)}}(s,i,p,a,d)}}function Wc(i,s,a){return i.createElement(s,a)}function Kc(i,s){const a=i[9],c=a.indexOf(s),d=s[3];512&s[2]&&(s[2]&=-513,ma(d,-1)),a.splice(c,1)}function Zc(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&Kc(d,c),s>0&&(i[a-1][4]=c[4]);const p=ba(i,10+s);!function gy(i,s){Su(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Yc(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Su(i,s,a,3,null,null),function yf(i){let s=i[13];if(!s)return vf(i[1],i);for(;s;){let a=null;if(Ur(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)Ur(s)&&vf(s[1],s),s=s[3];null===s&&(s=i),Ur(s)&&vf(s[1],s),a=s&&s[4]}s=a}}(s)}}function vf(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function _f(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof _a)){const p=a[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const E=d[p[v]],D=p[v+1];try{D.call(E)}finally{}}else try{p.call(d)}finally{}}}}(i,s),function Uo(i,s){const a=i.cleanup,c=s[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),p+=2}else{const v=c[d=a[p+1]];a[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&gi(s[3])){a!==s[3]&&Kc(a,s);const c=s[19];null!==c&&c.detachView(i)}!function yr(i){ui.delete(i[20])}(s)}}function vy(i,s,a){return function fg(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=i.data[c.directiveStart+d];if(p===Gt.None||p===Gt.Emulated)return null}return er(c,a)}}(i,s.parent,a)}function Aa(i,s,a,c,d){i.insertBefore(s,a,c,d)}function Du(i,s,a){i.appendChild(s,a)}function Cu(i,s,a,c,d){null!==c?Aa(i,s,a,c,d):Du(i,s,a)}function Jc(i,s){return i.parentNode(s)}let bf,Mu,Id=function Bo(i,s,a){return 40&i.type?er(i,a):null};function Cd(i,s,a,c){const d=vy(i,c,s),p=s[11],E=function wf(i,s,a){return Id(i,s,a)}(c.parent||s[6],c,s);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)Cu(p,d,a[D],E,!1);else Cu(p,d,a,E,!1)}function jo(i,s){if(null!==s){const a=s.type;if(3&a)return er(s,i);if(4&a)return qr(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return jo(i,c);{const d=i[s.index];return gi(d)?qr(-1,d):Nn(d)}}if(32&a)return zc(s,i)()||Nn(i[s.index]);{const c=Tu(i,s);return null!==c?Array.isArray(c)?c[0]:jo(Ms(i[16]),c):jo(i,s.next)}}return null}function Tu(i,s){return null!==s?i[16][6].projection[s.projection]:null}function qr(i,s){const a=10+i+1;if(a<s.length){const c=s[a],d=c[1].firstChild;if(null!==d)return jo(c,d)}return s[7]}function bd(i,s,a,c,d,p,v){for(;null!=a;){const E=c[a.index],D=a.type;if(v&&0===s&&(E&&Nr(Nn(E),c),a.flags|=2),32!=(32&a.flags))if(8&D)bd(i,s,a.child,c,d,p,!1),so(s,i,d,E,p);else if(32&D){const T=zc(a,c);let x;for(;x=T();)so(s,i,d,x,p);so(s,i,d,E,p)}else 16&D?ji(i,s,c,a,d,p):so(s,i,d,E,p);a=v?a.projectionNext:a.next}}function Su(i,s,a,c,d,p){bd(a,c,i.firstChild,s,d,p,!1)}function ji(i,s,a,c,d,p){const v=a[16],D=v[6].projection[c.projection];if(Array.isArray(D))for(let T=0;T<D.length;T++)so(s,i,d,D[T],p);else bd(i,s,D,v[3],d,p,!0)}function xs(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function If(i,s,a){const{mergedAttrs:c,classes:d,styles:p}=a;null!==c&&mn(i,s,c),null!==d&&xs(i,s,d),null!==p&&function Sd(i,s,a){i.setAttribute(s,"style",a)}(i,s,p)}function ao(i){bf=i}function wy(i){return function Md(){if(void 0===Mu&&(Mu=null,Dt.trustedTypes))try{Mu=Dt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Mu}()?.createScriptURL(i)||i}class yg{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tt})`}}function _(i){return i instanceof yg?i.changingThisBreaksApplicationSecurity:i}function S(i,s){const a=function R(i){return i instanceof yg&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${tt})`)}return a===s}const _g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var rr=(()=>((rr=rr||{})[rr.NONE=0]="NONE",rr[rr.HTML=1]="HTML",rr[rr.STYLE=2]="STYLE",rr[rr.SCRIPT=3]="SCRIPT",rr[rr.URL=4]="URL",rr[rr.RESOURCE_URL=5]="RESOURCE_URL",rr))();function Ty(i){const s=xa();return s?s.sanitize(rr.URL,i)||"":S(i,"URL")?_(i):function uo(i){return(i=String(i)).match(_g)?i:"unsafe:"+i}(Ee(i))}function Od(i){const s=xa();if(s)return wy(s.sanitize(rr.RESOURCE_URL,i)||"");if(S(i,"ResourceURL"))return wy(_(i));throw new de(904,!1)}function x0(i,s,a){return function Eg(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?Od:Ty}(s,a)(i)}function xa(){const i=Ce();return i&&i[12]}const Sy=new sn("ENVIRONMENT_INITIALIZER"),R0=new sn("INJECTOR",-1),Pd=new sn("INJECTOR_DEF_TYPES");class kd{get(s,a=Cn){if(a===Cn){const c=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw c.name="NullInjectorError",c}return a}}function pD(...i){return{\u0275providers:N0(0,i),\u0275fromNgModule:!0}}function N0(i,...s){const a=[],c=new Set;let d;return Vi(s,p=>{const v=p;Ay(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&O0(d,a),a}function O0(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];P0(d,p=>{s.push(p)})}}function Ay(i,s,a,c){if(!(i=W(i)))return!1;let d=null,p=hi(i);const v=!p&&Kt(i);if(p||v){if(v&&!v.standalone)return!1;d=i}else{const D=i.ngModule;if(p=hi(D),!p)return!1;d=D}const E=c.has(d);if(v){if(E)return!1;if(c.add(d),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of D)Ay(T,s,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let T;c.add(d);try{Vi(p.imports,x=>{Ay(x,s,a,c)&&(T||(T=[]),T.push(x))})}finally{}void 0!==T&&O0(T,s)}if(!E){const T=Zs(d)||(()=>new d);s.push({provide:d,useFactory:T,deps:ft},{provide:Pd,useValue:d,multi:!0},{provide:Sy,useValue:()=>Ue(d),multi:!0})}const D=p.providers;null==D||E||P0(D,x=>{s.push(x)})}}return d!==i&&void 0!==i.providers}function P0(i,s){for(let a of i)Ie(a)&&(a=a.\u0275providers),Array.isArray(a)?P0(a,s):s(a)}const gD=se({provide:String,useValue:se});function Mf(i){return null!==i&&"object"==typeof i&&gD in i}function tl(i){return"function"==typeof i}const My=new sn("Set Injector scope."),Ig={},yD={};let xy;function Dg(){return void 0===xy&&(xy=new kd),xy}class nl{}class k0 extends nl{constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Oy(s,v=>this.processProvider(v)),this.records.set(R0,Pu(void 0,this)),d.has("environment")&&this.records.set(nl,Pu(void 0,this));const p=this.records.get(My);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Pd.multi,ft,lt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=lr(this),c=vn(void 0);try{return s()}finally{lr(a),vn(c)}}get(s,a=Cn,c=lt.Default){this.assertNotDestroyed(),c=vt(c);const d=lr(this),p=vn(void 0);try{if(!(c&lt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const D=function wD(i){return"function"==typeof i||"object"==typeof i&&i instanceof sn}(s)&&Fr(s);E=D&&this.injectableDefInScope(D)?Pu(Cg(s),Ig):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(c&lt.Self?Dg():this.parent).get(s,a=c&lt.Optional&&a===Cn?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[pi]=v[pi]||[]).unshift(ce(s)),d)throw v;return function L(i,s,a,c){const d=i[pi];throw s[Yi]&&d.unshift(s[Yi]),i.message=function q(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=ce(s);if(Array.isArray(s))d=s.map(ce).join(" -> ");else if("object"==typeof s){let p=[];for(let v in s)if(s.hasOwnProperty(v)){let E=s[v];p.push(v+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(na,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[pi]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{vn(p),lr(d)}}resolveInjectorInitializers(){const s=lr(this),a=vn(void 0);try{const c=this.get(Sy.multi,ft,lt.Self);for(const d of c)d()}finally{lr(s),vn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(ce(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(s){let a=tl(s=W(s))?s:W(s&&s.provide);const c=function Ry(i){return Mf(i)?Pu(void 0,i.useValue):Pu(Ny(i),Ig)}(s);if(tl(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Pu(void 0,Ig,!0),d.factory=()=>wt(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Ig&&(a.value=yD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function _D(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=W(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Cg(i){const s=Fr(i),a=null!==s?s.factory:Zs(i);if(null!==a)return a;if(i instanceof sn)throw new de(204,!1);if(i instanceof Function)return function vD(i){const s=i.length;if(s>0)throw function ko(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new de(204,!1);const a=function mo(i){const s=i&&(i[br]||i[an]);if(s){const a=function gs(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new de(204,!1)}function Ny(i,s,a){let c;if(tl(i)){const d=W(i);return Zs(d)||Cg(d)}if(Mf(i))c=()=>W(i.useValue);else if(function el(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...wt(i.deps||[]));else if(function xf(i){return!(!i||!i.useExisting)}(i))c=()=>Ue(W(i.useExisting));else{const d=W(i&&(i.useClass||i.provide));if(!function bg(i){return!!i.deps}(i))return Zs(d)||Cg(d);c=()=>new d(...wt(i.deps))}return c}function Pu(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Oy(i,s){for(const a of i)Array.isArray(a)?Oy(a,s):a&&Ie(a)?Oy(a.\u0275providers,s):s(a)}class ED{}class Rf{}class Tg{resolveComponentFactory(s){throw function F0(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Fd=(()=>{class i{}return i.NULL=new Tg,i})();function Nf(){return rl(tr(),Ce())}function rl(i,s){return new Of(er(i,s))}let Of=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Nf,i})();function ID(i){return i instanceof Of?i.nativeElement:i}class L0{}let DD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function CD(){const i=Ce(),a=Yn(tr().index,i);return(Ur(a)?a:i)[11]}(),i})(),V0=(()=>{class i{}return i.\u0275prov=dt({token:i,providedIn:"root",factory:()=>null}),i})();class U0{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const B0=new U0("15.0.4"),Fy={};function Vy(i){return i.ngOriginalError}class Pf{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Vy(s);for(;a&&Vy(a);)a=Vy(a);return a||null}}function Ra(i){return i instanceof Function?i():i}function W0(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=s.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}const By="ng-template";function Vd(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==W0(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function Sg(i){return 4===i.type&&i.value!==By}function MD(i,s,a){return s===(4!==i.type||a?i.value:By)}function K0(i,s,a){let c=4;const d=i.attrs||[],p=function xD(i){for(let s=0;s<i.length;s++)if(xo(i[s]))return s;return i.length}(d);let v=!1;for(let E=0;E<s.length;E++){const D=s[E];if("number"!=typeof D){if(!v)if(4&c){if(c=2|1&c,""!==D&&!MD(i,D,a)||""===D&&1===s.length){if(Os(c))return!1;v=!0}}else{const T=8&c?D:s[++E];if(8&c&&null!==i.attrs){if(!Vd(i.attrs,T,a)){if(Os(c))return!1;v=!0}continue}const k=jy(8&c?"class":D,d,Sg(i),a);if(-1===k){if(Os(c))return!1;v=!0;continue}if(""!==T){let G;G=k>p?"":d[k+1].toLowerCase();const J=8&c?G:null;if(J&&-1!==W0(J,T,0)||2&c&&T!==G){if(Os(c))return!1;v=!0}}}}else{if(!v&&!Os(c)&&!Os(D))return!1;if(v&&Os(D))continue;v=!1,c=D|1&c}}return Os(c)||v}function Os(i){return 0==(1&i)}function jy(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let p=!1;for(;d<s.length;){const v=s[d];if(v===i)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let E=s[++d];for(;"string"==typeof E;)E=s[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function RD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function $y(i,s,a=!1){for(let c=0;c<s.length;c++)if(K0(i,s[c],a))return!0;return!1}function Y0(i,s){return i?":not("+s.trim()+")":s}function OD(i){let s=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const E=i[++a];d+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Os(v)&&(s+=Y0(p,d),d=""),c=v,p=p||!Os(c);a++}return""!==d&&(s+=Y0(p,d)),s}const kt={};function Hy(i){Q0(Zt(),Ce(),jr()+i,!1)}function Q0(i,s,a,c){if(!c)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&ni(s,p,a)}else{const p=i.preOrderHooks;null!==p&&su(s,p,0,a)}va(a)}function jD(i,s=null,a=null,c){const d=$D(i,s,a,c);return d.resolveInjectorInitializers(),d}function $D(i,s=null,a=null,c,d=new Set){const p=[a||ft,pD(i)];return c=c||("object"==typeof i?void 0:ce(i)),new k0(p,s||Dg(),c||null,d)}let il=(()=>{class i{static create(a,c){if(Array.isArray(a))return jD({name:""},c,a,"");{const d=a.name??"";return jD({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Cn,i.NULL=new kd,i.\u0275prov=dt({token:i,providedIn:"any",factory:()=>Ue(R0)}),i.__NG_ELEMENT_ID__=-1,i})();function Ud(i,s=lt.Default){const a=Ce();return null===a?Ue(i,s):Qh(tr(),a,W(i),s)}function QD(){throw new Error("invalid")}function ow(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],p=a[c+1];if(-1!==p){const v=i.data[p];Ic(d),v.contentQueries(2,s[p],p)}}}function Rg(i,s,a,c,d,p,v,E,D,T,x){const k=s.blueprint.slice();return k[0]=d,k[2]=76|c,(null!==x||i&&1024&i[2])&&(k[2]|=1024),ga(k),k[3]=k[15]=i,k[8]=a,k[10]=v||i&&i[10],k[11]=E||i&&i[11],k[12]=D||i&&i[12]||null,k[9]=T||i&&i[9]||null,k[6]=p,k[20]=function gd(){return og++}(),k[21]=x,k[16]=2==s.type?i[16]:k,k}function Bd(i,s,a,c,d){let p=i.data[s];if(null===p)p=function ss(i,s,a,c,d){const p=bo(),v=nu(),D=i.data[s]=function Og(i,s,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=D),null!==p&&(v?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}(i,s,a,c,d),function Xp(){return Ct.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const v=function tu(){const i=Ct.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return ei(p,!0),p}function Ng(i,s,a,c){if(0===a)return-1;const d=s.length;for(let p=0;p<a;p++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function Qy(i,s,a){ru(s);try{const c=i.viewQuery;null!==c&&Bf(1,c,a);const d=i.template;null!==d&&Fu(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&ow(i,s),i.staticViewQueries&&Bf(2,i.viewQuery,a);const p=i.components;null!==p&&function Yy(i,s){for(let a=0;a<s.length;a++)Vg(i,s[a])}(s,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,tg()}}function ge(i,s,a,c){const d=s[2];if(128!=(128&d)){ru(s);try{ga(s),function _c(i){return Ct.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Fu(i,s,a,2,c);const v=3==(3&d);if(v){const T=i.preOrderCheckHooks;null!==T&&ni(s,T,null)}else{const T=i.preOrderHooks;null!==T&&su(s,T,0,null),vi(s,0)}if(function hw(i){for(let s=Vo(i);null!==s;s=pf(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const d=a[c],p=d[3];0==(512&d[2])&&ma(p,1),d[2]|=512}}}(s),function iv(i){for(let s=Vo(i);null!==s;s=pf(s))for(let a=10;a<s.length;a++){const c=s[a],d=c[1];pa(c)&&ge(d,c,d.template,c[8])}}(s),null!==i.contentQueries&&ow(i,s),v){const T=i.contentCheckHooks;null!==T&&ni(s,T)}else{const T=i.contentHooks;null!==T&&su(s,T,1),vi(s,1)}!function sw(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)va(~d);else{const p=d,v=a[++c],E=a[++c];Ec(v,p),E(2,s[p])}}}finally{va(-1)}}(i,s);const E=i.components;null!==E&&function Wr(i,s){for(let a=0;a<s.length;a++)nC(i,s[a])}(s,E);const D=i.viewQuery;if(null!==D&&Bf(2,D,c),v){const T=i.viewCheckHooks;null!==T&&ni(s,T)}else{const T=i.viewHooks;null!==T&&su(s,T,2),vi(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,ma(s[3],-1))}finally{tg()}}}function Fu(i,s,a,c,d){const p=jr(),v=2&c;try{va(-1),v&&s.length>22&&Q0(i,s,22,!1),a(c,d)}finally{va(p)}}function jd(i,s,a){if(aa(s)){const d=s.directiveEnd;for(let p=s.directiveStart;p<d;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}function Ho(i,s,a){!eu()||(function cw(i,s,a,c){const d=a.directiveStart,p=a.directiveEnd;mi(a)&&function Go(i,s,a){const c=er(s,i),d=aw(a),p=i[10],v=zd(i,Rg(i,d,null,a.onPush?32:16,c,s,p,p.createRenderer(c,a),null,null,null));i[s.index]=v}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||Oo(a,s),Nr(c,s);const v=a.initialInputs;for(let E=d;E<p;E++){const D=i.data[E],T=wi(s,i,E,a);Nr(T,s),null!==v&&tC(0,E-d,T,D,0,v),Br(D)&&(Yn(a.index,s)[8]=wi(s,i,E,a))}}(i,s,a,er(a,s)),64==(64&a.flags)&&Pg(i,s,a))}function en(i,s,a=er){const c=s.localNames;if(null!==c){let d=s.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],E=-1===v?a(s,i):i[v];i[d++]=E}}}function aw(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=lo(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function lo(i,s,a,c,d,p,v,E,D,T){const x=22+c,k=x+d,G=function at(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:kt);return a}(x,k),J="function"==typeof T?T():T;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:E,declTNode:s,data:G.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:J,incompleteFirstPass:!1}}function Mt(i,s,a,c){const d=fw(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&qd(i).push(c,d.length-1))}function Vf(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===c?$d(a,s,d,p):c.hasOwnProperty(d)&&$d(a,s,c[d],p)}return a}function $d(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function uw(i,s){const a=Yn(s,i);16&a[2]||(a[2]|=32)}function Hd(i,s,a,c){let d=!1;if(eu()){const p=null===c?null:{"":-1},v=function li(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let p=0;p<a.length;p++){const v=a[p];if($y(s,v.selectors,!1))if(c||(c=[]),Br(v))if(null!==v.findHostDirectiveDefs){const E=[];d=d||new Map,v.findHostDirectiveDefs(v,E,d),c.unshift(...E,v),ev(i,s,E.length)}else c.unshift(v),ev(i,s,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(i,a);let E,D;null===v?E=D=null:[E,D]=v,null!==E&&(d=!0,Or(i,s,a,E,p,D)),p&&function kg(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const p=a[s[d+1]];if(null==p)throw new de(-301,!1);c.push(s[d],p)}}}(a,c,p)}return a.mergedAttrs=Is(a.mergedAttrs,a.attrs),d}function Or(i,s,a,c,d,p){for(let T=0;T<c.length;T++)xc(Oo(a,s),i,c[T].type);!function tv(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let T=0;T<c.length;T++){const x=c[T];x.providersResolver&&x.providersResolver(x)}let v=!1,E=!1,D=Ng(i,s,c.length,null);for(let T=0;T<c.length;T++){const x=c[T];a.mergedAttrs=Is(a.mergedAttrs,x.hostAttrs),Fg(i,a,s,D,x),dw(D,x,d),null!==x.contentQueries&&(a.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(a.flags|=64);const k=x.type.prototype;!v&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!E&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),D++}!function JD(i,s,a){const d=s.directiveEnd,p=i.data,v=s.attrs,E=[];let D=null,T=null;for(let x=s.directiveStart;x<d;x++){const k=p[x],G=a?a.get(k):null,me=G?G.outputs:null;D=Vf(k.inputs,x,D,G?G.inputs:null),T=Vf(k.outputs,x,T,me);const Le=null===D||null===v||Sg(s)?null:Gd(D,x,v);E.push(Le)}null!==D&&(D.hasOwnProperty("class")&&(s.flags|=8),D.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=E,s.inputs=D,s.outputs=T}(i,a,p)}function Pg(i,s,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,v=function ya(){return Ct.lFrame.currentDirectiveIndex}();try{va(p);for(let E=c;E<d;E++){const D=i.data[E],T=s[E];Ql(E),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&lw(D,T)}}finally{va(-1),Ql(v)}}function lw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function ev(i,s,a){s.componentOffset=a,(i.components||(i.components=[])).push(s.index)}function dw(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Br(s)&&(a[""]=i)}}function Fg(i,s,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=Zs(d.type)),v=new _a(p,Br(d),Ud);i.blueprint[c]=v,a[c]=v,function Lu(i,s,a,c,d){const p=d.hostBindings;if(p){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const E=~s.index;(function eC(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=E&&v.push(E),v.push(a,c,p)}}(i,s,c,Ng(i,a,d.hostVars,kt),d)}function Ps(i,s,a,c,d,p){const v=er(i,s);!function nv(i,s,a,c,d,p,v){if(null==p)i.removeAttribute(s,d,a);else{const E=null==v?Ee(p):v(p,c||"",d);i.setAttribute(s,d,E,a)}}(s[11],v,p,i.value,a,c,d)}function tC(i,s,a,c,d,p){const v=p[s];if(null!==v){const E=c.setInput;for(let D=0;D<v.length;){const T=v[D++],x=v[D++],k=v[D++];null!==E?c.setInput(a,k,T,x):a[x]=k}}}function Gd(i,s,a){let c=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===c&&(c=[]);const v=i[p];for(let E=0;E<v.length;E+=2)if(v[E]===s){c.push(p,v[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function rv(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null]}function nC(i,s){const a=Yn(s,i);if(pa(a)){const c=a[1];48&a[2]?ge(c,a,c.template,a[8]):a[5]>0&&Lg(a)}}function Lg(i){for(let c=Vo(i);null!==c;c=pf(c))for(let d=10;d<c.length;d++){const p=c[d];if(pa(p))if(512&p[2]){const v=p[1];ge(v,p,v.template,p[8])}else p[5]>0&&Lg(p)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Yn(a[c],i);pa(d)&&d[5]>0&&Lg(d)}}function Vg(i,s){const a=Yn(s,i),c=a[1];(function sv(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Qy(c,a,a[8])}function zd(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Uf(i){for(;i;){i[2]|=32;const s=Ms(i);if(ua(i)&&!s)return i;i=s}return null}function Ug(i,s,a,c=!0){const d=s[10];d.begin&&d.begin();try{ge(i,s,i.template,a)}catch(v){throw c&&Wd(s,v),v}finally{d.end&&d.end()}}function Bf(i,s,a){Ic(0),s(i,a)}function fw(i){return i[7]||(i[7]=[])}function qd(i){return i.cleanup||(i.cleanup=[])}function Wd(i,s){const a=i[9],c=a?a.get(Pf,null):null;c&&c.handleError(s)}function ov(i,s,a,c,d){for(let p=0;p<a.length;){const v=a[p++],E=a[p++],D=s[v],T=i.data[v];null!==T.setInput?T.setInput(D,d,c,E):D[E]=d}}function ol(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==s)for(let v=0;v<s.length;v++){const E=s[v];"number"==typeof E?p=E:1==p?d=ue(d,E):2==p&&(c=ue(c,E+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Kd(i,s,a,c,d=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&c.push(Nn(p)),gi(p))for(let E=10;E<p.length;E++){const D=p[E],T=D[1].firstChild;null!==T&&Kd(D[1],D,T,c)}const v=a.type;if(8&v)Kd(i,s,a.child,c);else if(32&v){const E=zc(a,s);let D;for(;D=E();)c.push(D)}else if(16&v){const E=Tu(s,a);if(Array.isArray(E))c.push(...E);else{const D=Ms(s[16]);Kd(D[1],D,E,c,!0)}}a=d?a.projectionNext:a.next}return c}class Zd{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Kd(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(gi(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Zc(s,c),ba(a,c))}this._attachedToViewContainer=!1}Yc(this._lView[1],this._lView)}onDestroy(s){Mt(this._lView[1],this._lView,null,s)}markForCheck(){Uf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ug(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mf(i,s){Su(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=s}}class gw extends Zd{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Ug(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class av extends Fd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Kt(s);return new al(a,this.ngModule)}}function jf(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class cv{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=vt(c);const d=this.injector.get(s,Fy,c);return d!==Fy||a===Fy?d:this.parentInjector.get(s,a,c)}}class al extends Rf{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Ag(i){return i.map(OD).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return jf(this.componentDef.inputs)}get outputs(){return jf(this.componentDef.outputs)}create(s,a,c,d){let p=(d=d||this.ngModule)instanceof nl?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new cv(s,p):s,E=v.get(L0,null);if(null===E)throw new de(407,!1);const D=v.get(V0,null),T=E.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",k=c?function Jy(i,s,a){return i.selectRootElement(s,a===Gt.ShadowDom)}(T,c,this.componentDef.encapsulation):Wc(T,x,function uv(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(x)),G=this.componentDef.onPush?288:272,J=lo(0,null,null,1,0,null,null,null,null,null),me=Rg(null,J,null,G,null,null,E,T,D,v,null);let Le,ze;ru(me);try{const et=this.componentDef;let yt,Me=null;et.findHostDirectiveDefs?(yt=[],Me=new Map,et.findHostDirectiveDefs(et,yt,Me),yt.push(et)):yt=[et];const Ot=function mw(i,s){const a=i[1];return i[22]=s,Bd(a,22,2,"#host",null)}(me,k),pn=function sC(i,s,a,c,d,p,v,E){const D=d[1];!function yw(i,s,a,c){for(const d of i)s.mergedAttrs=Is(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(ol(s,s.mergedAttrs,!0),null!==a&&If(c,a,s))}(c,i,s,v);const T=p.createRenderer(s,a),x=Rg(d,aw(a),null,a.onPush?32:16,d[i.index],i,p,T,E||null,null,null);return D.firstCreatePass&&ev(D,i,c.length-1),zd(d,x),d[i.index]=x}(Ot,k,et,yt,me,E,T);ze=Co(J,22),k&&function dv(i,s,a,c){if(c)mn(i,a,["ng-version",B0.full]);else{const{attrs:d,classes:p}=function PD(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&s.push(p,i[++c]):8===d&&a.push(p);else{if(!Os(d))break;d=p}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&mn(i,a,d),p&&p.length>0&&xs(i,a,p.join(" "))}}(T,et,k,c),void 0!==a&&function _w(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const p=a[d];c.push(null!=p?Array.from(p):null)}}(ze,this.ngContentSelectors,a),Le=function vw(i,s,a,c,d,p){const v=tr(),E=d[1],D=er(v,d);Or(E,d,v,a,null,c);for(let x=0;x<a.length;x++)Nr(wi(d,E,v.directiveStart+x,v),d);Pg(E,d,v),D&&Nr(D,d);const T=wi(d,E,v.directiveStart+v.componentOffset,v);if(i[8]=d[8]=T,null!==p)for(const x of p)x(T,s);return jd(E,v,i),T}(pn,et,yt,Me,me,[oC]),Qy(J,me,null)}finally{tg()}return new lv(this.componentType,Le,rl(ze,me),me,ze)}}class lv extends ED{constructor(s,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new gw(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const p=this._rootLView;ov(p[1],p,d,s,a),uw(p,this._tNode.index)}}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function oC(){const i=tr();ws(Ce()[1],i)}function $f(i){let s=function Bg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(Br(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new de(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const v=i;v.inputs=ir(i.inputs),v.declaredInputs=ir(i.declaredInputs),v.outputs=ir(i.outputs);const E=d.hostBindings;E&&fv(i,E);const D=d.viewQuery,T=d.contentQueries;if(D&&Kr(i,D),T&&jg(i,T),fe(i.inputs,d.inputs),fe(i.declaredInputs,d.declaredInputs),fe(i.outputs,d.outputs),Br(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const E=p[v];E&&E.ngInherit&&E(i),E===$f&&(a=!1)}}s=Object.getPrototypeOf(s)}!function hv(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=Is(d.hostAttrs,a=Is(a,d.hostAttrs))}}(c)}function ir(i){return i===wn?{}:i===ft?[]:i}function Kr(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function jg(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,p)=>{s(c,d,p),a(c,d,p)}:s}function fv(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}let Hf=null;function ul(){if(!Hf){const i=Dt.Symbol;if(i&&i.iterator)Hf=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Hf=c)}}}return Hf}function cl(i){return!!vv(i)&&(Array.isArray(i)||!(i instanceof Map)&&ul()in i)}function vv(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Zr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Vu(i,s,a,c){const d=Ce();return Zr(d,Xi(),s)&&(Zt(),Ps(hn(),d,i,s,a,c)),Vu}function qf(i,s,a,c,d,p,v,E){const D=Ce(),T=Zt(),x=i+22,k=T.firstCreatePass?function Cv(i,s,a,c,d,p,v,E,D){const T=s.consts,x=Bd(s,i,4,v||null,Pi(T,E));Hd(s,a,x,Pi(T,D)),ws(s,x);const k=x.tViews=lo(2,x,c,d,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),k.queries=s.queries.embeddedTView(x)),x}(x,T,D,s,a,c,d,p,v):T.data[x];ei(k,!1);const G=D[11].createComment("");Cd(T,D,G,k),Nr(G,D),zd(D,D[x]=rv(G,D,G,k)),lc(k)&&Ho(T,D,k),null!=v&&en(D,k,E)}function bv(i,s,a){const c=Ce();return Zr(c,Xi(),s)&&function os(i,s,a,c,d,p,v,E){const D=er(s,a);let x,T=s.inputs;!E&&null!=T&&(x=T[c])?(ov(i,a,x,c,d),mi(s)&&uw(a,s.index)):3&s.type&&(c=function Xy(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,s.value||"",c):d,p.setProperty(D,c,d))}(Zt(),hn(),c,i,s,c[11],a,!1),bv}function Kf(i,s,a,c,d){const v=d?"class":"style";ov(i,a,s.inputs[v],v,c)}function th(i,s,a,c){const d=Ce(),p=Zt(),v=22+i,E=d[11],D=d[v]=Wc(E,s,function ng(){return Ct.lFrame.currentNamespace}()),T=p.firstCreatePass?function qg(i,s,a,c,d,p,v){const E=s.consts,T=Bd(s,i,2,d,Pi(E,p));return Hd(s,a,T,Pi(E,v)),null!==T.attrs&&ol(T,T.attrs,!1),null!==T.mergedAttrs&&ol(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(v,p,d,0,s,a,c):p.data[v];return ei(T,!0),If(E,D,T),32!=(32&T.flags)&&Cd(p,d,D,T),0===function Xa(){return Ct.lFrame.elementDepthCount}()&&Nr(D,d),function mc(){Ct.lFrame.elementDepthCount++}(),lc(T)&&(Ho(p,d,T),jd(p,T,d)),null!==c&&en(d,T),th}function Zf(){let i=tr();nu()?function To(){Ct.lFrame.isParent=!1}():(i=i.parent,ei(i,!1));const s=i;!function Wl(){Ct.lFrame.elementDepthCount--}();const a=Zt();return a.firstCreatePass&&(ws(a,i),aa(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Sc(i){return 0!=(8&i.flags)}(s)&&Kf(a,s,Ce(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function td(i){return 0!=(16&i.flags)}(s)&&Kf(a,s,Ce(),s.stylesWithoutHost,!1),Zf}function Wg(i,s,a,c){return th(i,s,a,c),Zf(),Wg}function Yf(){return Ce()}function pl(i){return!!i&&"function"==typeof i.then}function Uu(i){return!!i&&"function"==typeof i.subscribe}const Kg=Uu;function Av(i,s,a,c){const d=Ce(),p=Zt(),v=tr();return function Mv(i,s,a,c,d,p,v){const E=lc(c),T=i.firstCreatePass&&qd(i),x=s[8],k=fw(s);let G=!0;if(3&c.type||v){const Le=er(c,s),ze=v?v(Le):Le,et=k.length,yt=v?Ot=>v(Nn(Ot[c.index])):c.index;let Me=null;if(!v&&E&&(Me=function Tw(i,s,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===a&&d[p+1]===c){const E=s[7],D=d[p+2];return E.length>D?E[D]:null}"string"==typeof v&&(p+=2)}return null}(i,s,d,c.index)),null!==Me)(Me.__ngLastListenerFn__||Me).__ngNextListenerFn__=p,Me.__ngLastListenerFn__=p,G=!1;else{p=Bu(c,s,x,p,!1);const Ot=a.listen(ze,d,p);k.push(p,Ot),T&&T.push(d,yt,et,et+1)}}else p=Bu(c,s,x,p,!1);const J=c.outputs;let me;if(G&&null!==J&&(me=J[d])){const Le=me.length;if(Le)for(let ze=0;ze<Le;ze+=2){const pn=s[me[ze]][me[ze+1]].subscribe(p),Un=k.length;k.push(p,pn),T&&T.push(d,c.index,Un,-(Un+1))}}}(p,d,d[11],v,i,s,c),Av}function Sw(i,s,a,c){try{return!1!==a(c)}catch(d){return Wd(i,d),!1}}function Bu(i,s,a,c,d){return function p(v){if(v===Function)return c;Uf(i.componentOffset>-1?Yn(i.index,s):s);let D=Sw(s,0,c,v),T=p.__ngNextListenerFn__;for(;T;)D=Sw(s,0,T,v)&&D,T=T.__ngNextListenerFn__;return d&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function Wo(i=1){return function uy(i){return(Ct.lFrame.contextLView=function Dc(i,s){for(;i>0;)s=s[15],i--;return s}(i,Ct.lFrame.contextLView))[8]}(i)}function ju(i,s){return i<<17|s<<2}function Ci(i){return i>>17&32767}function Qg(i){return 2|i}function Ls(i){return(131068&i)>>2}function Rv(i,s){return-131069&i|s<<2}function Jg(i){return 1|i}function Xg(i,s,a,c,d){const p=i[a+1],v=null===s;let E=c?Ci(p):Ls(p),D=!1;for(;0!==E&&(!1===D||v);){const x=i[E+1];Lw(i[E],s)&&(D=!0,i[E+1]=c?Jg(x):Qg(x)),E=c?Ci(x):Ls(x)}D&&(i[a+1]=c?Qg(p):Jg(p))}function Lw(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ke(i,s)>=0}function Ov(i,s){return function Hi(i,s,a,c){const d=Ce(),p=Zt(),v=function ti(i){const s=Ct.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function Pv(i,s,a,c){const d=i.data;if(null===d[a+1]){const p=d[jr()],v=function Zo(i,s){return s>=i.expandoStartIndex}(i,a);(function nm(i,s){return 0!=(i.flags&(s?8:16))})(p,c)&&null===s&&!v&&(s=!1),s=function Hw(i,s,a,c){const d=function Xs(i){const s=Ct.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=Hu(a=ep(null,i,s,a,c),s.attrs,c),p=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==d)if(a=ep(d,i,s,a,c),null===p){let D=function kv(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Ls(c))return i[Ci(c)]}(i,s,c);void 0!==D&&Array.isArray(D)&&(D=ep(null,i,s,D[1],c),D=Hu(D,s.attrs,c),function Xf(i,s,a,c){i[Ci(a?s.classBindings:s.styleBindings)]=c}(i,s,c,D))}else p=function Gw(i,s,a){let c;const d=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<d;p++)c=Hu(c,i[p].hostAttrs,a);return Hu(c,s.attrs,a)}(i,s,c)}return void 0!==p&&(c?s.residualClasses=p:s.residualStyles=p),a}(d,p,s,c),function Fw(i,s,a,c,d,p){let v=p?s.classBindings:s.styleBindings,E=Ci(v),D=Ls(v);i[c]=a;let x,T=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||Ke(k,x)>0)&&(T=!0)}else x=a;if(d)if(0!==D){const G=Ci(i[E+1]);i[c+1]=ju(G,E),0!==G&&(i[G+1]=Rv(i[G+1],c)),i[E+1]=function kw(i,s){return 131071&i|s<<17}(i[E+1],c)}else i[c+1]=ju(E,0),0!==E&&(i[E+1]=Rv(i[E+1],c)),E=c;else i[c+1]=ju(D,0),0===E?E=c:i[D+1]=Rv(i[D+1],c),D=c;T&&(i[c+1]=Qg(i[c+1])),Xg(i,x,c,!0),Xg(i,x,c,!1),function Nv(i,s,a,c,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Ke(p,s)>=0&&(a[c+1]=Jg(a[c+1]))}(s,x,i,c,p),v=ju(E,D),p?s.classBindings=v:s.styleBindings=v}(d,p,s,a,v,c)}}(p,i,v,c),s!==kt&&Zr(d,v,s)&&function Fv(i,s,a,c,d,p,v,E){if(!(3&s.type))return;const D=i.data,T=D[E+1],x=function lC(i){return 1==(1&i)}(T)?ah(D,s,a,d,Ls(T),v):void 0;np(x)||(np(p)||function Pw(i){return 2==(2&i)}(T)&&(p=ah(D,null,a,d,E,v)),function $o(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:zr.DashCase;null==d?i.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=zr.Important),i.setStyle(a,c,d,p))}}(c,v,Js(jr(),a),d,p))}(p,p.data[jr()],d,d[11],i,d[v+1]=function qw(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(_(i)))),i}(s,a),c,v)}(i,s,null,!0),Ov}function ep(i,s,a,c,d){let p=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(p=s[E],c=Hu(c,p.hostAttrs,d),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function Hu(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let p=0;p<s.length;p++){const v=s[p];"number"==typeof v?d=v:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Vt(i,v,!!a||s[++p]))}return void 0===i?null:i}function ah(i,s,a,c,d,p){const v=null===s;let E;for(;d>0;){const D=i[d],T=Array.isArray(D),x=T?D[1]:D,k=null===x;let G=a[d+1];G===kt&&(G=k?ft:void 0);let J=k?Ui(G,c):x===c?G:void 0;if(T&&!np(J)&&(J=Ui(D,c)),np(J)&&(E=J,v))return E;const me=i[d+1];d=v?Ci(me):Ls(me)}if(null!==s){let D=p?s.residualClasses:s.residualStyles;null!=D&&(E=Ui(D,c))}return E}function np(i){return void 0!==i}function rm(i,s=""){const a=Ce(),c=Zt(),d=i+22,p=c.firstCreatePass?Bd(c,d,1,s,null):c.data[d],v=a[d]=function wd(i,s){return i.createText(s)}(a[11],s);Cd(c,a,v,p),ei(p,!1)}function im(i){return gl("",i,""),im}function gl(i,s,a){const c=Ce(),d=function Jd(i,s,a,c){return Zr(i,Xi(),a)?s+Ee(a)+c:kt}(c,i,s,a);return d!==kt&&function Na(i,s,a){const c=Js(s,i);!function gf(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,jr(),d),gl}const An=void 0;var DC=["en",[["a","p"],["AM","PM"],An],[["AM","PM"],An,An],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],An,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],An,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",An,"{1} 'at' {0}",An],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xw(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let lh={};function zv(i){const s=function tE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=eE(s);if(a)return a;const c=s.split("-")[0];if(a=eE(c),a)return a;if("en"===c)return DC;throw new de(701,!1)}function qv(i){return zv(i)[_t.PluralCase]}function eE(i){return i in lh||(lh[i]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[i]),lh[i]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const ml="en-US";let Vn=ml;function _m(i,s,a,c,d){if(i=W(i),Array.isArray(i))for(let p=0;p<i.length;p++)_m(i[p],s,a,c,d);else{const p=Zt(),v=Ce();let E=tl(i)?i:W(i.provide),D=Ny(i);const T=tr(),x=1048575&T.providerIndexes,k=T.directiveStart,G=T.providerIndexes>>20;if(tl(i)||!i.multi){const J=new _a(D,d,Ud),me=i_(E,s,d?x:x+G,k);-1===me?(xc(Oo(T,v),p,E),n_(p,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(J),v.push(J)):(a[me]=J,v[me]=J)}else{const J=i_(E,s,x+G,k),me=i_(E,s,x,x+G),Le=J>=0&&a[J],ze=me>=0&&a[me];if(d&&!ze||!d&&!Le){xc(Oo(T,v),p,E);const et=function qn(i,s,a,c,d){const p=new _a(i,a,Ud);return p.multi=[],p.index=s,p.componentProviders=0,r_(p,d,c&&!a),p}(d?yh:FC,a.length,d,c,D);!d&&ze&&(a[me].providerFactory=et),n_(p,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(et),v.push(et)}else n_(p,i,J>-1?J:me,r_(a[d?me:J],D,!d&&c));!d&&c&&ze&&a[me].componentProviders++}}}function n_(i,s,a,c){const d=tl(s),p=function mD(i){return!!i.useClass}(s);if(d||p){const D=(p?W(s.useClass):s).prototype.ngOnDestroy;if(D){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const x=T.indexOf(a);-1===x?T.push(a,[c,D]):T[x+1].push(c,D)}else T.push(a,D)}}}function r_(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function i_(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function FC(i,s,a,c){return s_(this.multi,[])}function yh(i,s,a,c){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=wi(a,a[1],this.providerFactory.index,c);p=E.slice(0,v),s_(d,p);for(let D=v;D<E.length;D++)p.push(E[D])}else p=[],s_(d,p);return p}function s_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function fp(i,s=[]){return a=>{a.providersResolver=(c,d)=>function kC(i,s,a){const c=Zt();if(c.firstCreatePass){const d=Br(i);_m(a,c.data,c.blueprint,d,!0),_m(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class Wn{}class ln{}function mE(i,s){return new Gi(i,s??null)}class Gi extends Wn{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new av(this);const c=hr(s);this._bootstrapComponents=Ra(c.bootstrap),this._r3Injector=$D(s,a,[{provide:Wn,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],ce(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class wr extends ln{constructor(s){super(),this.moduleType=s}create(s){return new Gi(this.moduleType,s)}}class yE extends Wn{constructor(s,a,c){super(),this.componentFactoryResolver=new av(this),this.instance=null;const d=new k0([...s,{provide:Wn,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],a||Dg(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function yn(i,s,a=null){return new yE(i,s,a).injector}let LC=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=N0(0,a.type),d=c.length>0?yn([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=dt({token:i,providedIn:"environment",factory:()=>new i(Ue(nl))}),i})();function wm(i){i.getStandaloneInjector=s=>s.get(LC).getOrCreateStandaloneInjector(i)}function Eh(i){return s=>{setTimeout(i,void 0,s)}}const ls=class kn extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,p=a||(()=>null),v=c;if(s&&"object"==typeof s){const D=s;d=D.next?.bind(D),p=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(p=Eh(p),d&&(d=Eh(d)),v&&(v=Eh(v)));const E=super.subscribe({next:d,error:p,complete:v});return s instanceof Q.w0&&s.add(E),E}};function NE(){return this._results[ul()]()}class f_{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ul(),c=f_.prototype;c[a]||(c[a]=NE)}get changes(){return this._changes||(this._changes=new ls)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function $r(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function ld(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=s[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ba=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ih,i})();const jC=Ba,OE=class extends jC{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,d=Rg(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),Qy(c,d,s),new Zd(d)}};function Ih(){return Us(tr(),Ce())}function Us(i,s){return 4&i.type?new OE(s,i,rl(i,s)):null}let Ep=(()=>{class i{}return i.__NG_ELEMENT_ID__=PE,i})();function PE(){return Jn(tr(),Ce())}const kE=Ep,Cl=class extends kE{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return rl(this._hostTNode,this._hostLView)}get injector(){return new ii(this._hostTNode,this._hostLView)}get parentInjector(){const s=hu(this._hostTNode,this._hostLView);if(nd(s)){const a=No(s,this._hostLView),c=au(s);return new ii(a[1].data[c+8],a)}return new ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Im(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const v=s.createEmbeddedView(a||{},p);return this.insert(v,d),v}createComponent(s,a,c,d,p){const v=s&&!function Ca(i){return"function"==typeof i}(s);let E;if(v)E=a;else{const k=a||{};E=k.index,c=k.injector,d=k.projectableNodes,p=k.environmentInjector||k.ngModuleRef}const D=v?s:new al(Kt(s)),T=c||this.parentInjector;if(!p&&null==D.ngModule){const G=(v?T:this.parentInjector).get(nl,null);G&&(p=G)}const x=D.create(T,d,void 0,p);return this.insert(x.hostView,E),x}insert(s,a){const c=s._lView,d=c[1];if(function Qa(i){return gi(i[3])}(c)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const k=c[3],G=new Cl(k,k[6],k[3]);G.detach(G.indexOf(s))}}const p=this._adjustIndex(a),v=this._lContainer;!function my(i,s,a,c){const d=10+c,p=a.length;c>0&&(a[d-1][4]=s),c<p-10?(s[4]=a[d],mu(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function yy(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=64}(d,c,v,p);const E=qr(p,v),D=c[11],T=Jc(D,v[7]);return null!==T&&function Ed(i,s,a,c,d,p){c[0]=d,c[6]=s,Su(i,c,a,1,d,p)}(d,v[6],D,c,T,E),s.attachToViewContainerRef(),mu(p_(v),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Im(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Zc(this._lContainer,a);c&&(ba(p_(this._lContainer),a),Yc(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Zc(this._lContainer,a);return c&&null!=ba(p_(this._lContainer),a)?new Zd(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function Im(i){return i[8]}function p_(i){return i[8]||(i[8]=[])}function Jn(i,s){let a;const c=s[i.index];if(gi(c))a=c;else{let d;if(8&i.type)d=Nn(c);else{const p=s[11];d=p.createComment("");const v=er(i,s);Aa(p,Jc(p,v),d,function pg(i,s){return i.nextSibling(s)}(p,v),!1)}s[i.index]=a=rv(c,s,d,i),zd(s,a)}return new Cl(a,i,s)}class Jt{constructor(s){this.queryList=s,this.matches=null}clone(){return new Jt(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const v=a.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new Dm(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==bp(s,a).matches&&this.queries[a].setDirty()}}class g_{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Qo{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(s,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new Qo(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class m_{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new m_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(s,a,qi(a,p)),this.matchTNodeWithReadOption(s,a,Ia(a,s,p,!1,!1))}else c===Ba?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ia(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Of||d===Ep||d===Ba&&4&a.type)this.addMatch(a.index,-2);else{const p=Ia(a,s,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function qi(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Ip(i,s,a,c){return-1===a?function FE(i,s){return 11&i.type?rl(i,s):4&i.type?Us(i,s):null}(s,i):-2===a?function LE(i,s,a){return a===Of?rl(s,i):a===Ba?Us(s,i):a===Ep?Jn(s,i):void 0}(i,s,c):wi(i,i[1],a,s)}function po(i,s,a,c){const d=s[19].queries[c];if(null===d.matches){const p=i.data,v=a.matches,E=[];for(let D=0;D<v.length;D+=2){const T=v[D];E.push(T<0?null:Ip(s,p[T],v[D+1],a.metadata.read))}d.matches=E}return d.matches}function Cm(i,s,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const v=po(i,s,d,a);for(let E=0;E<p.length;E+=2){const D=p[E];if(D>0)c.push(v[E/2]);else{const T=p[E+1],x=s[-D];for(let k=10;k<x.length;k++){const G=x[k];G[17]===G[3]&&Cm(G[1],G,T,c)}if(null!==x[9]){const k=x[9];for(let G=0;G<k.length;G++){const J=k[G];Cm(J[1],J,T,c)}}}}}return c}function Dh(i){const s=Ce(),a=Zt(),c=Jl();Ic(c+1);const d=bp(a,c);if(i.dirty&&function fa(i){return 4==(4&i[2])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Cm(a,s,c,[]):po(a,s,d,c);i.reset(p,ID),i.notifyOnChanges()}return!0}return!1}function VE(i,s,a,c){const d=Zt();if(d.firstCreatePass){const p=tr();(function Ch(i,s,a){null===i.queries&&(i.queries=new Qo),i.queries.track(new m_(s,a))})(d,new g_(s,a,c),p.index),function Cp(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Dp(i,s,a){const c=new f_(4==(4&a));Mt(i,s,c,c.destroy),null===s[19]&&(s[19]=new Dm),s[19].queries.push(new Jt(c))}(d,Ce(),a)}function Ut(){return function HC(i,s){return i[19].queries[s].queryList}(Ce(),Jl())}function bp(i,s){return i.queries.getByIndex(s)}function Mm(...i){}const tI=new sn("Application Initializer");let Mp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Mm,this.reject=Mm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(pl(p))a.push(p);else if(Kg(p)){const v=new Promise((E,D)=>{p.subscribe({complete:E,error:D})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ue(tI,8))},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const nI=new sn("AppId",{providedIn:"root",factory:function C_(){return`${b_()}${b_()}${b_()}`}});function b_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xm=new sn("Platform Initializer"),kr=new sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Rm=new sn("appBootstrapListener");let nc=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Nm=new sn("LocaleId",{providedIn:"root",factory:()=>Ze(Nm,lt.Optional|lt.SkipSelf)||function sI(){return typeof $localize<"u"&&$localize.locale||ml}()}),oI=new sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Sl{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let xp=(()=>{class i{compileModuleSync(a){return new wr(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Ra(hr(a).declarations).reduce((v,E)=>{const D=Kt(E);return D&&v.push(new al(D)),v},[]);return new Sl(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const cI=(()=>Promise.resolve(0))();function Mh(i){typeof Zone>"u"?cI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class $s{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ls(!1),this.onMicrotaskEmpty=new ls(!1),this.onStable=new ls(!1),this.onError=new ls(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Rp(){let i=Dt.requestAnimationFrame,s=Dt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function tb(i){const s=()=>{!function eb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Dt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Al(i),i.isCheckStableRunning=!0,x_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Al(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,v,E)=>{try{return rc(i),a.invokeTask(d,p,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),ja(i)}},onInvoke:(a,c,d,p,v,E,D)=>{try{return rc(i),a.invoke(d,p,v,E,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),ja(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Al(i),x_(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$s.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if($s.isInAngularZone())throw new de(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,s,lI,Mm,Mm);try{return p.runTask(v,a,c)}finally{p.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const lI={};function x_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Al(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function rc(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ja(i){i._nesting--,x_(i)}class dI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ls,this.onMicrotaskEmpty=new ls,this.onStable=new ls,this.onError=new ls}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const hI=new sn(""),R_=new sn("");let Pm,nb=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Pm||(function N_(i){Pm=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$s.assertNotInAngularZone(),Mh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Mh(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ue($s),Ue(Om),Ue(R_))},i.\u0275prov=dt({token:i,factory:i.\u0275fac}),i})(),Om=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Pm?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Xo=null;const km=new sn("AllowMultipleToken"),Fm=new sn("PlatformDestroyListeners");class ib{constructor(s,a){this.name=s,this.token=a}}function O_(i,s,a=[]){const c=`Platform: ${s}`,d=new sn(c);return(p=[])=>{let v=Rh();if(!v||v.injector.get(km,!1)){const E=[...a,...p,{provide:d,useValue:!0}];i?i(E):function pI(i){if(Xo&&!Xo.get(km,!1))throw new de(400,!1);Xo=i;const s=i.get(Pp);(function Op(i){const s=i.get(xm,null);s&&s.forEach(a=>a())})(i)}(function Si(i=[],s){return il.create({name:s,providers:[{provide:My,useValue:"platform"},{provide:Fm,useValue:new Set([()=>Xo=null])},...i]})}(E,c))}return function gI(i){const s=Rh();if(!s)throw new de(401,!1);return s}()}}function Rh(){return Xo?.get(Pp)??null}let Pp=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function $a(i,s){let a;return a="noop"===i?new dI:("zone.js"===i?void 0:i)||new $s(s),a}(c?.ngZone,function P_(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:$s,useValue:d}];return d.run(()=>{const v=il.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(v),D=E.injector.get(Pf,null);if(!D)throw new de(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:x=>{D.handleError(x)}});E.onDestroy(()=>{Um(this._modules,E),T.unsubscribe()})}),function Ml(i,s,a){try{const c=a();return pl(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(D,d,()=>{const T=E.injector.get(Mp);return T.runInitializers(),T.donePromise.then(()=>(function He(i){Pt(i,"Expected localeId to be defined"),"string"==typeof i&&(Vn=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Nm,ml)||ml),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const d=k_({},c);return function rb(i,s,a){const c=new wr(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(ea);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new de(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Fm,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ue(il))},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function k_(i,s){return Array.isArray(s)?s.reduce(k_,i):{...i,...s}}let ea=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new O.y(E=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{$s.assertNotInAngularZone(),Mh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{$s.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{D.unsubscribe(),T.unsubscribe()}});this.isStable=(0,re.T)(p,v.pipe((0,ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Rf;if(!this._injector.get(Mp).done)throw!d&&Fn(a),new de(405,false);let v;v=d?a:this._injector.get(Fd).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function Lm(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Wn),T=v.create(il.NULL,[],c||v.selector,E),x=T.location.nativeElement,k=T.injector.get(hI,null);return k?.registerApplication(x),T.onDestroy(()=>{this.detachView(T.hostView),Um(this.components,T),k?.unregisterApplication(x)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Um(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Rm,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Um(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new de(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Ue($s),Ue(nl),Ue(Pf))},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Um(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}function ic(){return!1}let ab=(()=>{class i{}return i.__NG_ELEMENT_ID__=Bm,i})();function Bm(i){return function vI(i,s,a){if(mi(i)&&!a){const c=Yn(i.index,s);return new Zd(c,c)}return 47&i.type?new Zd(s[16],s):null}(tr(),Ce(),16==(16&i))}class B_{constructor(){}supports(s){return cl(s)}create(s){return new $_(s)}}const j_=(i,s)=>s;class $_{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||j_}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const v=!c||a&&a.currentIndex<Gm(c,d,p)?a:c,E=Gm(v,d,p),D=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{p||(p=[]);const T=E-d,x=D-d;if(T!=x){for(let G=0;G<T;G++){const J=G<p.length?p[G]:p[G]=0,me=J+G;x<=me&&me<T&&(p[G]=J+1)}p[v.previousIndex]=x-T}}E!==D&&s(v,E,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!cl(s))throw new de(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,p,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],v=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,p,v,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,E),c=!0),a=a._next}else d=0,function Iw(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[ul()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{v=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,E,v,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,d)):s=this._addAfter(new Vp(a,c),p,d),s}_verifyReinsertion(s,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?s=this._reinsertAfter(p,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,p=s._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Hm),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Vp{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $m{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Hm{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new $m,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Gm(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class H_{constructor(){}supports(s){return s instanceof Map||vv(s)}create(){return new fb}}class fb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||vv(s)))throw new de(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new EI(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class EI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function G_(){return new Up([new B_])}let Up=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||G_()),deps:[[i,new b,new bs]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new de(901,!1)}}return i.\u0275prov=dt({token:i,providedIn:"root",factory:G_}),i})();function z_(){return new q_([new H_])}let q_=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||z_()),deps:[[i,new b,new bs]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new de(901,!1)}}return i.\u0275prov=dt({token:i,providedIn:"root",factory:z_}),i})();const W_=O_(null,"core",[]);let zm=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ue(ea))},i.\u0275mod=En({type:i}),i.\u0275inj=Qr({}),i})();function DI(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(it,we,P)=>{P.d(we,{Z:()=>$e});var f=P(2090),Q=P(4859),O=P(9681),re=P(1877);class ie{constructor(de,De){this._delegate=de,this.firebase=De,(0,O._addComponent)(de,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(de,De=O._DEFAULT_ENTRY_NAME){var Ee;this._delegate.checkDestroyed();const Oe=this._delegate.container.getProvider(de);return!Oe.isInitialized()&&"EXPLICIT"===(null===(Ee=Oe.getComponent())||void 0===Ee?void 0:Ee.instantiationMode)&&Oe.initialize(),Oe.getImmediate({identifier:De})}_removeServiceInstance(de,De=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(De)}_addComponent(de){(0,O._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,O._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function ue(){const tt=function ce(tt){const de={},De={__esModule:!0,initializeApp:function Ae(Re,V={}){const ye=O.initializeApp(Re,V);if((0,f.r3)(de,ye.name))return de[ye.name];const z=new tt(ye,De);return de[ye.name]=z,z},app:Oe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Se(Re){const V=Re.name,ye=V.replace("-compat","");if(O._registerComponent(Re)&&"PUBLIC"===Re.type){const z=(Z=Oe())=>{if("function"!=typeof Z[ye])throw fe.create("invalid-app-argument",{appName:V});return Z[ye]()};void 0!==Re.serviceProps&&(0,f.ZB)(z,Re.serviceProps),De[ye]=z,tt.prototype[ye]=function(...Z){return this._getService.bind(this,V).apply(this,Re.multipleInstances?Z:[])}}return"PUBLIC"===Re.type?De[ye]:null},removeApp:function Ee(Re){delete de[Re]},useAsService:function Ve(Re,V){return"serverAuth"===V?null:V},modularAPIs:O}};function Oe(Re){if(!(0,f.r3)(de,Re=Re||O._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Re});return de[Re]}return De.default=De,Object.defineProperty(De,"apps",{get:function ve(){return Object.keys(de).map(Re=>de[Re])}}),Oe.App=tt,De}(ie);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function de(De){(0,f.ZB)(tt,De)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),tt}(),B=new re.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $e=U;!function Ie(tt){(0,O.registerVersion)("@firebase/app-compat","0.2.0",tt)}()},9681:(it,we,P)=>{P.r(we),P.d(we,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>mo,_DEFAULT_ENTRY_NAME:()=>on,_addComponent:()=>Yt,_addOrOverwriteComponent:()=>ur,_apps:()=>Pt,_clearComponents:()=>Qr,_components:()=>ct,_getProvider:()=>dt,_registerComponent:()=>Ir,_removeServiceInstance:()=>gn,deleteApp:()=>Gs,getApp:()=>hi,getApps:()=>br,initializeApp:()=>gs,onLog:()=>lt,registerVersion:()=>Lr,setLogLevel:()=>Ki});var f=P(5861),Q=P(4859),O=P(1877),re=P(2090),ie=P(8766);class se{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(Ze=>{if(function fe(Ue){return"VERSION"===Ue.getComponent()?.type}(Ze)){const vt=Ze.getImmediate();return`${vt.library}/${vt.version}`}return null}).filter(Ze=>Ze).join(" ")}}const ce="@firebase/app",U=new O.Yd("@firebase/app"),on="[DEFAULT]",At={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pt=new Map,ct=new Map;function Yt(Ue,_e){try{Ue.container.addComponent(_e)}catch(Ze){U.debug(`Component ${_e.name} failed to register with FirebaseApp ${Ue.name}`,Ze)}}function ur(Ue,_e){Ue.container.addOrOverwriteComponent(_e)}function Ir(Ue){const _e=Ue.name;if(ct.has(_e))return U.debug(`There were multiple attempts to register component ${_e}.`),!1;ct.set(_e,Ue);for(const Ze of Pt.values())Yt(Ze,Ue);return!0}function dt(Ue,_e){const Ze=Ue.container.getProvider("heartbeat").getImmediate({optional:!0});return Ze&&Ze.triggerHeartbeat(),Ue.container.getProvider(_e)}function gn(Ue,_e,Ze=on){dt(Ue,_e).clearInstance(Ze)}function Qr(){ct.clear()}const Dr=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Cr{constructor(_e,Ze,vt){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},Ze),this._name=Ze.name,this._automaticDataCollectionEnabled=Ze.automaticDataCollectionEnabled,this._container=vt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}const mo="9.15.0";function gs(Ue,_e={}){let Ze=Ue;"object"!=typeof _e&&(_e={name:_e});const vt=Object.assign({name:on,automaticDataCollectionEnabled:!1},_e),wt=vt.name;if("string"!=typeof wt||!wt)throw Dr.create("bad-app-name",{appName:String(wt)});if(Ze||(Ze=(0,re.aH)()),!Ze)throw Dr.create("no-options");const xt=Pt.get(wt);if(xt){if((0,re.vZ)(Ze,xt.options)&&(0,re.vZ)(vt,xt.config))return xt;throw Dr.create("duplicate-app",{appName:wt})}const j=new Q.H0(wt);for(const q of ct.values())j.addComponent(q);const L=new Cr(Ze,vt,j);return Pt.set(wt,L),L}function hi(Ue=on){const _e=Pt.get(Ue);if(!_e&&Ue===on)return gs();if(!_e)throw Dr.create("no-app",{appName:Ue});return _e}function br(){return Array.from(Pt.values())}function Gs(Ue){return an.apply(this,arguments)}function an(){return(an=(0,f.Z)(function*(Ue){const _e=Ue.name;Pt.has(_e)&&(Pt.delete(_e),yield Promise.all(Ue.container.getProviders().map(Ze=>Ze.delete())),Ue.isDeleted=!0)})).apply(this,arguments)}function Lr(Ue,_e,Ze){var vt;let wt=null!==(vt=At[Ue])&&void 0!==vt?vt:Ue;Ze&&(wt+=`-${Ze}`);const xt=wt.match(/\s|\//),j=_e.match(/\s|\//);if(xt||j){const L=[`Unable to register library "${wt}" with version "${_e}":`];return xt&&L.push(`library name "${wt}" contains illegal characters (whitespace or "/")`),xt&&j&&L.push("and"),j&&L.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void U.warn(L.join(" "))}Ir(new Q.wA(`${wt}-version`,()=>({library:wt,version:_e}),"VERSION"))}function lt(Ue,_e){if(null!==Ue&&"function"!=typeof Ue)throw Dr.create("invalid-log-argument");(0,O.Am)(Ue,_e)}function Ki(Ue){(0,O.Ub)(Ue)}const Tr="firebase-heartbeat-store";let ms=null;function Dt(){return ms||(ms=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(Ue,_e)=>{0===_e&&Ue.createObjectStore(Tr)}}).catch(Ue=>{throw Dr.create("idb-open",{originalErrorMessage:Ue.message})})),ms}function gt(){return(gt=(0,f.Z)(function*(Ue){try{return(yield Dt()).transaction(Tr).objectStore(Tr).get(_n(Ue))}catch(_e){if(_e instanceof re.ZR)U.warn(_e.message);else{const Ze=Dr.create("idb-get",{originalErrorMessage:_e?.message});U.warn(Ze.message)}}})).apply(this,arguments)}function Zi(Ue,_e){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,f.Z)(function*(Ue,_e){try{const vt=(yield Dt()).transaction(Tr,"readwrite");return yield vt.objectStore(Tr).put(_e,_n(Ue)),vt.done}catch(Ze){if(Ze instanceof re.ZR)U.warn(Ze.message);else{const vt=Dr.create("idb-set",{originalErrorMessage:Ze?.message});U.warn(vt.message)}}})).apply(this,arguments)}function _n(Ue){return`${Ue.name}!${Ue.options.appId}`}class na{constructor(_e){this.container=_e,this._heartbeatsCache=null;const Ze=this.container.getProvider("app").getImmediate();this._storage=new Wt(Ze),this._heartbeatsCachePromise=this._storage.read().then(vt=>(this._heartbeatsCache=vt,vt))}triggerHeartbeat(){var _e=this;return(0,f.Z)(function*(){const vt=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wt=nn();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),_e._heartbeatsCache.lastSentHeartbeatDate!==wt&&!_e._heartbeatsCache.heartbeats.some(xt=>xt.date===wt))return _e._heartbeatsCache.heartbeats.push({date:wt,agent:vt}),_e._heartbeatsCache.heartbeats=_e._heartbeatsCache.heartbeats.filter(xt=>{const j=new Date(xt.date).valueOf();return Date.now()-j<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,f.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache||0===_e._heartbeatsCache.heartbeats.length)return"";const Ze=nn(),{heartbeatsToSend:vt,unsentEntries:wt}=function Yi(Ue,_e=1024){const Ze=[];let vt=Ue.slice();for(const wt of Ue){const xt=Ze.find(j=>j.agent===wt.agent);if(xt){if(xt.dates.push(wt.date),lr(Ze)>_e){xt.dates.pop();break}}else if(Ze.push({agent:wt.agent,dates:[wt.date]}),lr(Ze)>_e){Ze.pop();break}vt=vt.slice(1)}return{heartbeatsToSend:Ze,unsentEntries:vt}}(_e._heartbeatsCache.heartbeats),xt=(0,re.L)(JSON.stringify({version:2,heartbeats:vt}));return _e._heartbeatsCache.lastSentHeartbeatDate=Ze,wt.length>0?(_e._heartbeatsCache.heartbeats=wt,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache.heartbeats=[],_e._storage.overwrite(_e._heartbeatsCache)),xt})()}}function nn(){return(new Date).toISOString().substring(0,10)}class Wt{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,f.Z)(function*(){return(yield _e._canUseIndexedDBPromise)&&(yield function ht(Ue){return gt.apply(this,arguments)}(_e.app))||{heartbeats:[]}})()}overwrite(_e){var Ze=this;return(0,f.Z)(function*(){var vt;if(yield Ze._canUseIndexedDBPromise){const xt=yield Ze.read();return Zi(Ze.app,{lastSentHeartbeatDate:null!==(vt=_e.lastSentHeartbeatDate)&&void 0!==vt?vt:xt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}})()}add(_e){var Ze=this;return(0,f.Z)(function*(){var vt;if(yield Ze._canUseIndexedDBPromise){const xt=yield Ze.read();return Zi(Ze.app,{lastSentHeartbeatDate:null!==(vt=_e.lastSentHeartbeatDate)&&void 0!==vt?vt:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,..._e.heartbeats]})}})()}}function lr(Ue){return(0,re.L)(JSON.stringify({version:2,heartbeats:Ue})).length}!function xi(Ue){Ir(new Q.wA("platform-logger",_e=>new se(_e),"PRIVATE")),Ir(new Q.wA("heartbeat",_e=>new na(_e),"PRIVATE")),Lr(ce,"0.9.0",Ue),Lr(ce,"0.9.0","esm2017"),Lr("fire-js","")}("")},4859:(it,we,P)=>{P.d(we,{H0:()=>ce,wA:()=>O});var f=P(5861),Q=P(2090);class O{constructor(U,B,W){this.name=U,this.instanceFactory=B,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const re="[DEFAULT]";class ie{constructor(U,B){this.name=U,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const B=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(B)){const W=new Q.BH;if(this.instancesDeferred.set(B,W),this.isInitialized(B)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:B});ke&&W.resolve(ke)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(U){var B;const W=this.normalizeInstanceIdentifier(U?.identifier),ke=null!==(B=U?.optional)&&void 0!==B&&B;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Ie){if(ke)return null;throw Ie}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function fe(ue){return"EAGER"===ue.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[B,W]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier(B);try{const Ie=this.getOrInitializeService({instanceIdentifier:ke});W.resolve(Ie)}catch{}}}}clearInstance(U=re){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,f.Z)(function*(){const B=Array.from(U.instances.values());yield Promise.all([...B.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...B.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=re){return this.instances.has(U)}getOptions(U=re){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:B={}}=U,W=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:W,options:B});for(const[Ie,$e]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Ie)&&$e.resolve(ke);return ke}onInit(U,B){var W;const ke=this.normalizeInstanceIdentifier(B),Ie=null!==(W=this.onInitCallbacks.get(ke))&&void 0!==W?W:new Set;Ie.add(U),this.onInitCallbacks.set(ke,Ie);const $e=this.instances.get(ke);return $e&&U($e,ke),()=>{Ie.delete(U)}}invokeOnInitCallbacks(U,B){const W=this.onInitCallbacks.get(B);if(W)for(const ke of W)try{ke(U,B)}catch{}}getOrInitializeService({instanceIdentifier:U,options:B={}}){let W=this.instances.get(U);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=U,ue===re?void 0:ue),options:B}),this.instances.set(U,W),this.instancesOptions.set(U,B),this.invokeOnInitCallbacks(W,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,W)}catch{}var ue;return W||null}normalizeInstanceIdentifier(U=re){return this.component?this.component.multipleInstances?U:re:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const B=this.getProvider(U.name);if(B.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);B.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const B=new ie(U,this);return this.providers.set(U,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(it,we,P)=>{P.d(we,{Am:()=>ue,Ub:()=>ce,Yd:()=>fe,in:()=>Q});const f=[];var Q=(()=>{return(U=Q||(Q={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",Q;var U})();const O={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},re=Q.INFO,ie={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},se=(U,B,...W)=>{if(B<U.logLevel)return;const ke=(new Date).toISOString(),Ie=ie[B];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Ie](`[${ke}]  ${U.name}:`,...W)};class fe{constructor(B){this.name=B,this._logLevel=re,this._logHandler=se,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in Q))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...B),this._logHandler(this,Q.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...B),this._logHandler(this,Q.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...B),this._logHandler(this,Q.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...B),this._logHandler(this,Q.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...B),this._logHandler(this,Q.ERROR,...B)}}function ce(U){f.forEach(B=>{B.setLogLevel(U)})}function ue(U,B){for(const W of f){let ke=null;B&&B.level&&(ke=O[B.level]),W.userLogHandler=null===U?null:(Ie,$e,...tt)=>{const de=tt.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");$e>=(ke??Ie.logLevel)&&U({level:Q[$e].toLowerCase(),message:de,args:tt,type:Ie.name})}}}},259:(it,we,P)=>{P.d(we,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=P(9681);(0,f.registerVersion)("firebase","9.15.0","app")},9260:(it,we,P)=>{P.d(we,{Z:()=>f.Z});var f=P(3942);f.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(it,we,P)=>{P.r(we);var f=P(5861),Q=P(3942),O=P(2090),re=P(9681),ie=P(1877),se=P(655),fe=P(4859);const $e=function ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},tt=function Ie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ee=new ie.Yd("@firebase/auth");function Oe(y,...h){Ee.logLevel<=ie.in.ERROR&&Ee.error(`Auth (${re.SDK_VERSION}): ${y}`,...h)}function Ae(y,...h){throw Re(y,...h)}function ve(y,...h){return Re(y,...h)}function Se(y,h,g){const _=Object.assign(Object.assign({},tt()),{[h]:g});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Ve(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Ae(y,"argument-error"),Se(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Re(y,...h){if("string"!=typeof y){const g=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(g,..._)}return de.create(y,...h)}function V(y,h,...g){if(!y)throw Re(h,...g)}function ye(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Oe(h),new Error(h)}function z(y,h){y||ye(h)}const Z=new Map;function ne(y){z(y instanceof Function,"Expected a class definition");let h=Z.get(y);return h?(z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Z.set(y,h),h)}function Ne(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function st(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Pt{constructor(h,g){this.shortDelay=h,this.longDelay=g,z(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function on(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(st()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ct(y,h){z(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Yt{static initialize(h,g,_){this.fetchImpl=h,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ur={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ir=new Pt(3e4,6e4);function dt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function gn(y,h,g,_){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(y,h,g,_,S={}){return Fr(y,S,(0,f.Z)(function*(){let R={},H={};_&&("GET"===h?H=_:R={body:JSON.stringify(_)});const le=(0,O.xO)(Object.assign({key:y.config.apiKey},H)).slice(1),Be=yield y._getAdditionalHeaders();return Be["Content-Type"]="application/json",y.languageCode&&(Be["X-Firebase-Locale"]=y.languageCode),Yt.fetch()(gs(y,y.config.apiHost,g,le),Object.assign({method:h,headers:Be,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Fr(y,h,g){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},ur),h);try{const S=new hi(y),R=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const H=yield R.json();if("needConfirmation"in H)throw br(y,"account-exists-with-different-credential",H);if(R.ok&&!("errorMessage"in H))return H;{const le=R.ok?H.errorMessage:H.error.message,[Be,We]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw br(y,"credential-already-in-use",H);if("EMAIL_EXISTS"===Be)throw br(y,"email-already-in-use",H);if("USER_DISABLED"===Be)throw br(y,"user-disabled",H);const mt=_[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(We)throw Se(y,mt,We);Ae(y,mt)}}catch(S){if(S instanceof O.ZR)throw S;Ae(y,"network-request-failed")}})).apply(this,arguments)}function Cr(y,h,g,_){return mo.apply(this,arguments)}function mo(){return(mo=(0,f.Z)(function*(y,h,g,_,S={}){const R=yield gn(y,h,g,_,S);return"mfaPendingCredential"in R&&Ae(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function gs(y,h,g,_){const S=`${h}${g}?${_}`;return y.config.emulator?ct(y.config,S):`${y.config.apiScheme}://${S}`}class hi{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Ir.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function br(y,h,g){const _={appName:y.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const S=ve(y,h,_);return S.customData._tokenResponse=g,S}function an(){return(an=(0,f.Z)(function*(y,h){return gn(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Lr(y,h){return lt.apply(this,arguments)}function lt(){return(lt=(0,f.Z)(function*(y,h){return gn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ki(y,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,f.Z)(function*(y,h){return gn(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function vn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Dt(){return(Dt=(0,f.Z)(function*(y,h=!1){const g=(0,O.m9)(y),_=yield g.getIdToken(h),S=gt(_);V(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,H=R?.sign_in_provider;return{claims:S,token:_,authTime:vn(ht(S.auth_time)),issuedAtTime:vn(ht(S.iat)),expirationTime:vn(ht(S.exp)),signInProvider:H||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function ht(y){return 1e3*Number(y)}function gt(y){const[h,g,_]=y.split(".");if(void 0===h||void 0===g||void 0===_)return Oe("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,O.tV)(g);return S?JSON.parse(S):(Oe("Failed to decode base64 JWT payload"),null)}catch(S){return Oe("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Cn(y,h){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&pi(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function pi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class cr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),_)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class na{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=vn(this.lastLoginAt),this.creationTime=vn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nn(y){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,f.Z)(function*(y){var h;const g=y.auth,_=yield y.getIdToken(),S=yield Cn(y,Ki(g,{idToken:_}));V(S?.users.length,g,"internal-error");const R=S.users[0];y._notifyReloadListener(R);const H=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?Ue(R.providerUserInfo):[],le=xi(y.providerData,H),mt=!!y.isAnonymous&&!(y.email&&R.passwordHash||le?.length),ot={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:le,metadata:new na(R.createdAt,R.lastLoginAt),isAnonymous:mt};Object.assign(y,ot)})).apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(y){const h=(0,O.m9)(y);yield nn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function xi(y,h){return[...y.filter(_=>!h.some(S=>S.providerId===_.providerId)),...h]}function Ue(y){return y.map(h=>{var{providerId:g}=h,_=(0,se._T)(h,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Ze(){return(Ze=(0,f.Z)(function*(y,h){const g=yield Fr(y,{},(0,f.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:R}=y.config,H=gs(y,S,"/v1/token",`key=${R}`),le=yield y._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",Yt.fetch()(H,{method:"POST",headers:le,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Zi(y){const h=gt(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var _=this;return(0,f.Z)(function*(){return V(!_.accessToken||_.refreshToken,h,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var _=this;return(0,f.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:H}=yield function _e(y,h){return Ze.apply(this,arguments)}(h,g);_.updateTokensAndExpiration(S,R,Number(H))})()}updateTokensAndExpiration(h,g,_){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,g){const{refreshToken:_,accessToken:S,expirationTime:R}=g,H=new vt;return _&&(V("string"==typeof _,"internal-error",{appName:h}),H.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:h}),H.accessToken=S),R&&(V("number"==typeof R,"internal-error",{appName:h}),H.expirationTime=R),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new vt,this.toJSON())}_performRefresh(){return ye("not implemented")}}function wt(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class xt{constructor(h){var{uid:g,auth:_,stsTokenManager:S}=h,R=(0,se._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new na(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const _=yield Cn(g,g.stsTokenManager.getToken(g.auth,h));return V(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(h){return function ms(y){return Dt.apply(this,arguments)}(this,h)}reload(){return function Wt(y){return lr.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new xt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var _=this;return(0,f.Z)(function*(){let S=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),S=!0),g&&(yield nn(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield Cn(h,function Gs(y,h){return an.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var _,S,R,H,le,Be,We,mt;const ot=null!==(_=g.displayName)&&void 0!==_?_:void 0,Gn=null!==(S=g.email)&&void 0!==S?S:void 0,Ii=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,xu=null!==(H=g.photoURL)&&void 0!==H?H:void 0,_g=null!==(le=g.tenantId)&&void 0!==le?le:void 0,uo=null!==(Be=g._redirectEventId)&&void 0!==Be?Be:void 0,Rs=null!==(We=g.createdAt)&&void 0!==We?We:void 0,Ru=null!==(mt=g.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:Nu,emailVerified:Rd,isAnonymous:Nd,providerData:Sf,stsTokenManager:wg}=g;V(Nu&&wg,h,"internal-error");const b0=vt.fromJSON(this.name,wg);V("string"==typeof Nu,h,"internal-error"),wt(ot,h.name),wt(Gn,h.name),V("boolean"==typeof Rd,h,"internal-error"),V("boolean"==typeof Nd,h,"internal-error"),wt(Ii,h.name),wt(xu,h.name),wt(_g,h.name),wt(uo,h.name),wt(Rs,h.name),wt(Ru,h.name);const co=new xt({uid:Nu,auth:h,email:Gn,emailVerified:Rd,displayName:ot,isAnonymous:Nd,photoURL:xu,phoneNumber:Ii,tenantId:_g,stsTokenManager:b0,createdAt:Rs,lastLoginAt:Ru});return Sf&&Array.isArray(Sf)&&(co.providerData=Sf.map(Ou=>Object.assign({},Ou))),uo&&(co._redirectEventId=uo),co}static _fromIdTokenResponse(h,g,_=!1){return(0,f.Z)(function*(){const S=new vt;S.updateFromServerResponse(g);const R=new xt({uid:g.localId,auth:h,stsTokenManager:S,isAnonymous:_});return yield nn(R),R})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,_){var S=this;return(0,f.Z)(function*(){S.storage[g]=_})()}_get(g){var _=this;return(0,f.Z)(function*(){const S=_.storage[g];return void 0===S?null:S})()}_remove(g){var _=this;return(0,f.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return y.type="NONE",y})();function q(y,h,g){return`firebase:${y}:${h}:${g}`}class pe{constructor(h,g,_){this.persistence=h,this.auth=g,this.userKey=_;const{config:S,name:R}=this.auth;this.fullUserKey=q(this.userKey,S.apiKey,R),this.fullPersistenceKey=q("persistence",S.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?xt._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,_="authUser"){return(0,f.Z)(function*(){if(!g.length)return new pe(ne(L),h,_);const S=(yield Promise.all(g.map(function(){var We=(0,f.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return We.apply(this,arguments)}}()))).filter(We=>We);let R=S[0]||ne(L);const H=q(_,h.config.apiKey,h.name);let le=null;for(const We of g)try{const mt=yield We._get(H);if(mt){const ot=xt._fromJSON(h,mt);We!==R&&(le=ot),R=We;break}}catch{}const Be=S.filter(We=>We._shouldAllowMigration);return R._shouldAllowMigration&&Be.length?(R=Be[0],le&&(yield R._set(H,le.toJSON())),yield Promise.all(g.map(function(){var We=(0,f.Z)(function*(mt){if(mt!==R)try{yield mt._remove(H)}catch{}});return function(mt){return We.apply(this,arguments)}}())),new pe(R,h,_)):new pe(R,h,_)})()}}function X(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(wn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Je(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Zn(h))return"Blackberry";if(Lt(h))return"Webos";if(Rt(h))return"Safari";if((h.includes("chrome/")||Gt(h))&&!h.includes("edge/"))return"Chrome";if(ft(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function Je(y=(0,O.z$)()){return/firefox\//i.test(y)}function Rt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Gt(y=(0,O.z$)()){return/crios\//i.test(y)}function wn(y=(0,O.z$)()){return/iemobile/i.test(y)}function ft(y=(0,O.z$)()){return/android/i.test(y)}function Zn(y=(0,O.z$)()){return/blackberry/i.test(y)}function Lt(y=(0,O.z$)()){return/webos/i.test(y)}function $n(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function $h(y=(0,O.z$)()){return $n(y)||ft(y)||Lt(y)||Zn(y)||/windows phone/i.test(y)||wn(y)}function Ha(y,h=[]){let g;switch(y){case"Browser":g=X((0,O.z$)());break;case"Worker":g=`${X((0,O.z$)())}-${y}`;break;default:g=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${re.SDK_VERSION}/${_}`}class uc{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const _=R=>new Promise((H,le)=>{try{H(h(R))}catch(Be){le(Be)}});_.onAbort=g,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,f.Z)(function*(){if(g.auth.currentUser===h)return;const _=[];try{for(const S of g.queue)yield S(h),S.onAbort&&_.push(S.onAbort)}catch(S){_.reverse();for(const R of _)try{R()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Fl{constructor(h,g,_){this.app=h,this.heartbeatServiceProvider=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ll(this),this.idTokenSubscription=new Ll(this),this.beforeStateQueue=new uc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,g){var _=this;return g&&(this._popupRedirectResolver=ne(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var S,R;if(!_._deleted&&(_.persistenceManager=yield pe.create(_,h),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var _;const S=yield g.assertedPersistence.getCurrentUser();let R=S,H=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const le=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,Be=R?._redirectEventId,We=yield g.tryRedirectSignIn(h);(!le||le===Be)&&We?.user&&(R=We.user,H=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(H)try{yield g.beforeStateQueue.runMiddleware(R)}catch(le){R=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(le))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return V(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){try{yield nn(h)}catch(_){if("auth/network-request-failed"!==_?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function At(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&V(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(h,g=!1){var _=this;return(0,f.Z)(function*(){if(!_._deleted)return h&&V(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,f.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(ne(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,g,_){return this.registerStateListener(this.authStateSubscription,h,g,_)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,_){return this.registerStateListener(this.idTokenSubscription,h,g,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var _=this;return(0,f.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(g);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const _=h&&ne(h)||g._popupRedirectResolver;V(_,g,"argument-error"),g.redirectPersistenceManager=yield pe.create(g,[ne(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var _,S;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===h?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,_,S){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),H=this._isInitialized?Promise.resolve():this._initializationPromise;return V(H,this,"internal-error"),H.then(()=>R(this.currentUser)),"function"==typeof g?h.addObserver(g,_,S):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ha(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function En(y){return(0,O.m9)(y)}class Ll{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function sa(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Kt(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Mn{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return ye("not implemented")}_getIdTokenResponse(h){return ye("not implemented")}_linkToIdToken(h,g){return ye("not implemented")}_getReauthenticationResolver(h){return ye("not implemented")}}function Fn(y,h){return hr.apply(this,arguments)}function hr(){return(hr=(0,f.Z)(function*(y,h){return gn(y,"POST","/v1/accounts:resetPassword",dt(y,h))})).apply(this,arguments)}function Ri(y,h){return qe.apply(this,arguments)}function qe(){return(qe=(0,f.Z)(function*(y,h){return gn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function bt(y,h){return un.apply(this,arguments)}function un(){return(un=(0,f.Z)(function*(y,h){return gn(y,"POST","/v1/accounts:update",dt(y,h))})).apply(this,arguments)}function Qi(){return(Qi=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithPassword",dt(y,h))})).apply(this,arguments)}function xn(y,h){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(y,h){return gn(y,"POST","/v1/accounts:sendOobCode",dt(y,h))})).apply(this,arguments)}function dn(y,h){return vo.apply(this,arguments)}function vo(){return(vo=(0,f.Z)(function*(y,h){return xn(y,h)})).apply(this,arguments)}function zs(y,h){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,f.Z)(function*(y,h){return xn(y,h)})).apply(this,arguments)}function Ga(y,h){return _o.apply(this,arguments)}function _o(){return(_o=(0,f.Z)(function*(y,h){return xn(y,h)})).apply(this,arguments)}function Hh(y,h){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,f.Z)(function*(y,h){return xn(y,h)})).apply(this,arguments)}function qs(){return(qs=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithEmailLink",dt(y,h))})).apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithEmailLink",dt(y,h))})).apply(this,arguments)}class ys extends Mn{constructor(h,g,_,S=null){super("password",_),this._email=h,this._password=g,this._tenantId=S}static _fromEmailAndPassword(h,g){return new ys(h,g,"password")}static _fromEmailAndCode(h,g,_=null){return new ys(h,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function Vr(y,h){return Qi.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Xn(y,h){return qs.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Ae(h,"internal-error")}})()}_linkToIdToken(h,g){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return Ri(h,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function wo(y,h){return Jr.apply(this,arguments)}(h,{idToken:g,email:_._email,oobCode:_._password});default:Ae(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Rn(y,h){return rn.apply(this,arguments)}function rn(){return(rn=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithIdp",dt(y,h))})).apply(this,arguments)}class Xr extends Mn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Xr(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Ae("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S}=g,R=(0,se._T)(g,["providerId","signInMethod"]);if(!_||!S)return null;const H=new Xr(_,S);return H.idToken=R.idToken||void 0,H.accessToken=R.accessToken||void 0,H.secret=R.secret,H.nonce=R.nonce,H.pendingToken=R.pendingToken||null,H}_getIdTokenResponse(h){return Rn(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Rn(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Rn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,O.xO)(g)}return h}}function Vl(y,h){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,f.Z)(function*(y,h){return gn(y,"POST","/v1/accounts:sendVerificationCode",dt(y,h))})).apply(this,arguments)}function Sr(){return(Sr=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithPhoneNumber",dt(y,h))})).apply(this,arguments)}function Ul(){return(Ul=(0,f.Z)(function*(y,h){const g=yield Cr(y,"POST","/v1/accounts:signInWithPhoneNumber",dt(y,h));if(g.temporaryProof)throw br(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ur={USER_NOT_FOUND:"user-not-found"};function aa(){return(aa=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithPhoneNumber",dt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Ur)})).apply(this,arguments)}class mi extends Mn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new mi({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new mi({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function Ws(y,h){return Sr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function fr(y,h){return Ul.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function gi(y,h){return aa.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:_,verificationCode:S}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:_,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:R}=h;return _||g||S||R?new mi({verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:R}):null}}class ua{constructor(h){var g,_,S,R,H,le;const Be=(0,O.zd)((0,O.pd)(h)),We=null!==(g=Be.apiKey)&&void 0!==g?g:null,mt=null!==(_=Be.oobCode)&&void 0!==_?_:null,ot=function lc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Be.mode)&&void 0!==S?S:null);V(We&&mt&&ot,"argument-error"),this.apiKey=We,this.operation=ot,this.code=mt,this.continueUrl=null!==(R=Be.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(H=Be.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(le=Be.tenantId)&&void 0!==le?le:null}static parseLink(h){const g=function Br(y){const h=(0,O.zd)((0,O.pd)(y)).link,g=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||g||h||y}(h);try{return new ua(g)}catch{return null}}}let dc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,_){return ys._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const S=ua.parseLink(_);return V(S,"argument-error"),ys._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ji{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ks extends Ji{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class ca extends Ks{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return V("providerId"in g&&"signInMethod"in g,"argument-error"),Xr._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),Xr._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return ca.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return ca.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:R,nonce:H,providerId:le}=h;if(!_&&!S&&!g&&!R||!le)return null;try{return new ca(le)._credential({idToken:g,accessToken:_,nonce:H,pendingToken:R})}catch{return null}}}let Bl=(()=>{class y extends Ks{constructor(){super("facebook.com")}static credential(g){return Xr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),zh=(()=>{class y extends Ks{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return Xr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:S}=g;if(!_&&!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),hc=(()=>{class y extends Ks{constructor(){super("github.com")}static credential(g){return Xr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class za extends Mn{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Rn(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Rn(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Rn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S,pendingToken:R}=g;return _&&S&&R&&_===S?new za(_,R):null}static _create(h,g){return new za(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yi extends Ji{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return yi.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return yi.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=za.fromJSON(h);return V(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:_}=h;if(!g||!_)return null;try{return za._create(_,g)}catch{return null}}}let $l=(()=>{class y extends Ks{constructor(){super("twitter.com")}static credential(g,_){return Xr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=g;if(!_||!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function fc(y,h){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signUp",dt(y,h))})).apply(this,arguments)}class Ar{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,_,S=!1){return(0,f.Z)(function*(){const R=yield xt._fromIdTokenResponse(h,_,S),H=Gl(_);return new Ar({user:R,providerId:H,_tokenResponse:_,operationType:g})})()}static _forOperation(h,g,_){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const S=Gl(_);return new Ar({user:h,providerId:S,_tokenResponse:_,operationType:g})})()}}function Gl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function qh(){return(qh=(0,f.Z)(function*(y){var h;const g=En(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new Ar({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield fc(g,{returnSecureToken:!0}),S=yield Ar._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class zl extends O.ZR{constructor(h,g,_,S){var R;super(g.code,g.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,zl.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,g,_,S){return new zl(h,g,_,S)}}function Zs(y,h,g,_){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?zl._fromErrorAndOperation(y,R,h,_):R})}function vs(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Ys(){return(Ys=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y);yield Qs(!0,g,h);const{providerUserInfo:_}=yield Lr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),S=vs(_||[]);return g.providerData=g.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Wa(y,h){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,f.Z)(function*(y,h,g=!1){const _=yield Cn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return Ar._forOperation(y,"link",_)})).apply(this,arguments)}function Qs(y,h,g){return da.apply(this,arguments)}function da(){return(da=(0,f.Z)(function*(y,h,g){yield nn(h);const S=!1===y?"provider-already-linked":"no-such-provider";V(vs(h.providerData).has(g)===y,h.auth,S)})).apply(this,arguments)}function Za(y,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,f.Z)(function*(y,h,g=!1){const{auth:_}=y,S="reauthenticate";try{const R=yield Cn(y,Zs(_,S,h,y),g);V(R.idToken,_,"internal-error");const H=gt(R.idToken);V(H,_,"internal-error");const{sub:le}=H;return V(y.uid===le,_,"user-mismatch"),Ar._forOperation(y,S,R)}catch(R){throw"auth/user-not-found"===R?.code&&Ae(_,"user-mismatch"),R}})).apply(this,arguments)}function Ya(y,h){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,f.Z)(function*(y,h,g=!1){const _="signIn",S=yield Zs(y,_,h),R=yield Ar._fromIdTokenResponse(y,_,S);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function bn(y,h){return ha.apply(this,arguments)}function ha(){return(ha=(0,f.Z)(function*(y,h){return Ya(En(y),h)})).apply(this,arguments)}function Nn(y,h){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y);return yield Qs(!1,g,h.providerId),Wa(g,h)})).apply(this,arguments)}function Js(y,h){return er.apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(y,h){return Za((0,O.m9)(y),h)})).apply(this,arguments)}function ql(y,h){return Co.apply(this,arguments)}function Co(){return(Co=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithCustomToken",dt(y,h))})).apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(y,h){const g=En(y),_=yield ql(g,{token:h,returnSecureToken:!0}),S=yield Ar._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class fa{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?pa._fromServerResponse(h,g):Ae(h,"internal-error")}}class pa extends fa{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new pa(g)}}function Qa(y,h,g){var _;V((null===(_=g.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(V(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(V(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function ga(){return(ga=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y),S={requestType:"PASSWORD_RESET",email:h};g&&Qa(_,S,g),yield zs(_,S)})).apply(this,arguments)}function Ct(){return(Ct=(0,f.Z)(function*(y,h,g){yield Fn((0,O.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function gc(){return(gc=(0,f.Z)(function*(y,h){yield bt((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Xa(y,h){return mc.apply(this,arguments)}function mc(){return(mc=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y),_=yield Fn(g,{oobCode:h}),S=_.requestType;switch(V(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,g,"internal-error");default:V(_.email,g,"internal-error")}let R=null;return _.mfaInfo&&(R=fa._fromServerResponse(En(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function eu(){return(eu=(0,f.Z)(function*(y,h){const{data:g}=yield Xa((0,O.m9)(y),h);return g.email})).apply(this,arguments)}function Kl(){return(Kl=(0,f.Z)(function*(y,h,g){const _=En(y),S=yield fc(_,{returnSecureToken:!0,email:h,password:g}),R=yield Ar._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function yc(){return(yc=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};V(g.handleCodeInApp,_,"argument-error"),g&&Qa(_,S,g),yield Ga(_,S)})).apply(this,arguments)}function bo(){return(bo=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y),S=dc.credentialWithLink(h,g||Ne());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),bn(_,S)})).apply(this,arguments)}function tu(y,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(y,h){return gn(y,"POST","/v1/accounts:createAuthUri",dt(y,h))})).apply(this,arguments)}function To(){return(To=(0,f.Z)(function*(y,h){const _={identifier:h,continueUri:st()?Ne():"http://localhost"},{signinMethods:S}=yield tu((0,O.m9)(y),_);return S||[]})).apply(this,arguments)}function Yl(){return(Yl=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Qa(g.auth,S,h);const{email:R}=yield dn(g.auth,S);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function In(){return(In=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&Qa(_.auth,R,g);const{email:H}=yield Hh(_.auth,R);H!==y.email&&(yield y.reload())})).apply(this,arguments)}function ki(y,h){return _c.apply(this,arguments)}function _c(){return(_c=(0,f.Z)(function*(y,h){return gn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const _=(0,O.m9)(y),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},H=yield Cn(_,ki(_.auth,R));_.displayName=H.displayName||null,_.photoURL=H.photoUrl||null;const le=_.providerData.find(({providerId:Be})=>"password"===Be);le&&(le.displayName=_.displayName,le.photoURL=_.photoURL),yield _._updateTokensIfNecessary(H)})).apply(this,arguments)}function Ec(y,h,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,f.Z)(function*(y,h,g){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),g&&(R.password=g);const H=yield Cn(y,Ri(_,R));yield y._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class Xs{constructor(h,g,_={}){this.isNewUser=h,this.providerId=g,this.profile=_}}class Jl extends Xs{constructor(h,g,_,S){super(h,g,_),this.username=S}}class Ic extends Xs{constructor(h,g){super(h,"facebook.com",g)}}class Xl extends Jl{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Wh extends Xs{constructor(h,g){super(h,"google.com",g)}}class ru extends Jl{constructor(h,g,_){super(h,"twitter.com",g,_)}}function Kh(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Ql(y){var h,g;if(!y)return null;const{providerId:_}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const H=null===(g=null===(h=gt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(H)return new Xs(R,"anonymous"!==H&&"custom"!==H?H:null)}if(!_)return null;switch(_){case"facebook.com":return new Ic(R,S);case"github.com":return new Xl(R,S);case"google.com":return new Wh(R,S);case"twitter.com":return new ru(R,S,y.screenName||null);case"custom":case"anonymous":return new Xs(R,null);default:return new Xs(R,_,S)}}(g)}class Ao{constructor(h,g,_){this.type=h,this.credential=g,this.auth=_}static _fromIdtoken(h,g){return new Ao("enroll",h,g)}static _fromMfaPendingCredential(h){return new Ao("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,_;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Ao._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Ao._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Cc{constructor(h,g,_){this.session=h,this.hints=g,this.signInResolver=_}static _fromError(h,g){const _=En(h),S=g.customData._serverResponse,R=(S.mfaInfo||[]).map(le=>fa._fromServerResponse(_,le));V(S.mfaPendingCredential,_,"internal-error");const H=Ao._fromMfaPendingCredential(S.mfaPendingCredential);return new Cc(H,R,function(){var le=(0,f.Z)(function*(Be){const We=yield Be._process(_,H);delete S.mfaInfo,delete S.mfaPendingCredential;const mt=Object.assign(Object.assign({},S),{idToken:We.idToken,refreshToken:We.refreshToken});switch(g.operationType){case"signIn":const ot=yield Ar._fromIdTokenResponse(_,g.operationType,mt);return yield _._updateCurrentUser(ot.user),ot;case"reauthenticate":return V(g.user,_,"internal-error"),Ar._forOperation(g.user,g.operationType,mt);default:Ae(_,"internal-error")}});return function(Be){return le.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function Zh(y,h){return gn(y,"POST","/v2/accounts/mfaEnrollment:start",dt(y,h))}class ws{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>fa._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new ws(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Ao._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var _=this;return(0,f.Z)(function*(){const S=h,R=yield _.getSession(),H=yield Cn(_.user,S._process(_.user.auth,R,g));return yield _.user._updateTokensIfNecessary(H),_.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){const _="string"==typeof h?h:h.uid,S=yield g.user.getIdToken(),R=yield Cn(g.user,function Yh(y,h){return gn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",dt(y,h))}(g.user.auth,{idToken:S,mfaEnrollmentId:_}));g.enrolledFactors=g.enrolledFactors.filter(({uid:H})=>H!==_),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(H){if("auth/user-token-expired"!==H?.code)throw H}})()}}const ni=new WeakMap,vi="__sak";class bc{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(vi,"1"),this.storage.removeItem(vi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Tc=(()=>{class y extends bc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ed(){const y=(0,O.z$)();return Rt(y)||$n(y)}()&&function ia(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=$h(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),R=this.localCache[_];S!==R&&g(_,R,S)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((le,Be,We)=>{this.notifyListeners(le,We)});const S=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(S);if(g.newValue!==le)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!_)return}const R=()=>{const le=this.storage.getItem(S);!_&&this.localCache[S]===le||this.notifyListeners(S,le)},H=this.storage.getItem(S);!function ra(){return(0,O.w1)()&&10===document.documentMode}()||H===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const R of Array.from(S))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var S=()=>super._set,R=this;return(0,f.Z)(function*(){yield S().call(R,g,_),R.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,S=this;return(0,f.Z)(function*(){const R=yield _().call(S,g);return S.localCache[g]=JSON.stringify(R),R})()}_remove(g){var _=()=>super._remove,S=this;return(0,f.Z)(function*(){yield _().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),Fi=(()=>{class y extends bc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return y.type="SESSION",y})();let td=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(R=>R.isListeningto(g));if(_)return _;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,f.Z)(function*(){const S=g,{eventId:R,eventType:H,data:le}=S.data,Be=_.handlersMap[H];if(!Be?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:H});const We=Array.from(Be).map(function(){var ot=(0,f.Z)(function*(Gn){return Gn(S.origin,le)});return function(Gn){return ot.apply(this,arguments)}}()),mt=yield function Sc(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return h.apply(this,arguments)}}()))}(We);S.ports[0].postMessage({status:"done",eventId:R,eventType:H,response:mt})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Es(y="",h=10){let g="";for(let _=0;_<h;_++)g+=Math.floor(10*Math.random());return y+g}class Ac{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,_=50){var S=this;return(0,f.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let H,le;return new Promise((Be,We)=>{const mt=Es("",20);R.port1.start();const ot=setTimeout(()=>{We(new Error("unsupported_event"))},_);le={messageChannel:R,onMessage(Gn){const Ii=Gn;if(Ii.data.eventId===mt)switch(Ii.data.status){case"ack":clearTimeout(ot),H=setTimeout(()=>{We(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),Be(Ii.data.response);break;default:clearTimeout(ot),clearTimeout(H),We(new Error("invalid_response"))}}},S.handlers.add(le),R.port1.addEventListener("message",le.onMessage),S.target.postMessage({eventType:h,eventId:mt,data:g},[R.port2])}).finally(()=>{le&&S.removeMessageHandler(le)})})()}}function mn(){return window}function Ro(){return typeof mn().WorkerGlobalScope<"u"&&"function"==typeof mn().importScripts}function ou(){return(ou=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const uu="firebaseLocalStorageDb",es="firebaseLocalStorage",cu="fbase_key";class Ds{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function eo(y,h){return y.transaction([es],h?"readwrite":"readonly").objectStore(es)}function du(){const y=indexedDB.open(uu,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(es,{keyPath:cu})}catch(S){g(S)}}),y.addEventListener("success",(0,f.Z)(function*(){const _=y.result;_.objectStoreNames.contains(es)?h(_):(_.close(),yield function lu(){const y=indexedDB.deleteDatabase(uu);return new Ds(y).toPromise()}(),h(yield du()))}))})}function xr(y,h,g){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,f.Z)(function*(y,h,g){const _=eo(y,!0).put({[cu]:h,value:g});return new Ds(_).toPromise()})).apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(y,h){const g=eo(y,!1).get(h),_=yield new Ds(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Ea(y,h){const g=eo(y,!0).delete(h);return new Ds(g).toPromise()}const ts=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield du()),g.db})()}_withRetries(g){var _=this;return(0,f.Z)(function*(){let S=0;for(;;)try{const R=yield _._openDb();return yield g(R)}catch(R){if(S++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return Ro()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=td._getInstance(function au(){return Ro()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,f.Z)(function*(S,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(S,R){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,f.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var _,S;if(g.activeServiceWorker=yield function Is(){return ou.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ac(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(_=R[0])||void 0===_?void 0:_.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,f.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function nd(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield du();return yield xr(g,vi,"1"),yield Ea(g,vi),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,f.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var S=this;return(0,f.Z)(function*(){return S._withPendingWrite((0,f.Z)(function*(){return yield S._withRetries(R=>xr(R,g,_)),S.localCache[g]=_,S.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,f.Z)(function*(){const S=yield _._withRetries(R=>function Oo(y,h){return to.apply(this,arguments)}(R,g));return _.localCache[g]=S,S})()}_remove(g){var _=this;return(0,f.Z)(function*(){return _._withPendingWrite((0,f.Z)(function*(){return yield _._withRetries(S=>Ea(S,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const _=yield g._withRetries(H=>{const le=eo(H,!1).getAll();return new Ds(le).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:H,value:le}of _)R.add(H),JSON.stringify(g.localCache[H])!==JSON.stringify(le)&&(g.notifyListeners(H,le),S.push(H));for(const H of Object.keys(g.localCache))g.localCache[H]&&!R.has(H)&&(g.notifyListeners(H,null),S.push(H));return S})()}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const R of Array.from(S))R(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Rc(y,h){return gn(y,"POST","/v2/accounts/mfaSignIn:start",dt(y,h))}function Nc(){return(Nc=(0,f.Z)(function*(y){return(yield gn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wi(y){return new Promise((h,g)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=S=>{const R=ve("internal-error");R.customData=S,g(R)},_.type="text/javascript",_.charset="UTF-8",function Ia(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Oc(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ii=1e12;class Jh{constructor(h){this.auth=h,this.counter=ii,this._widgets=new Map}render(h,g){const _=this.counter;return this._widgets.set(_,new Pc(h,this.auth.name,g||{})),this.counter++,_}reset(h){var g;const _=h||ii;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(h){var g;return(null===(g=this._widgets.get(h||ii))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var _;return null===(_=g._widgets.get(h||ii))||void 0===_||_.execute(),""})()}}class Pc{constructor(h,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;V(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kc(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xh=Oc("rcb"),id=new Pt(3e4,6e4);class Cs{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=mn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return V(function Po(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(mn().grecaptcha):new Promise((_,S)=>{const R=mn().setTimeout(()=>{S(ve(h,"network-request-failed"))},id.get());mn()[Xh]=()=>{mn().clearTimeout(R),delete mn()[Xh];const le=mn().grecaptcha;if(!le)return void S(ve(h,"internal-error"));const Be=le.render;le.render=(We,mt)=>{const ot=Be(We,mt);return this.counter++,ot},this.hostLanguage=g,_(le)},wi(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Xh,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),S(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=mn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Da{load(h){return(0,f.Z)(function*(){return new Jh(h)})()}clearedOneInstance(){}}const od="recaptcha",ef={theme:"light",type:"image"};class pu{constructor(h,g=Object.assign({},ef),_){this.parameters=g,this.type=od,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Da:new Cs,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(g)||new Promise(R=>{const H=le=>{!le||(h.tokenChangeListeners.delete(H),R(le))};h.tokenChangeListeners.add(H),h.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof h)h(g);else if("string"==typeof h){const _=mn()[h];"function"==typeof _&&_(g)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){V(st()&&!Ro(),h.auth,"internal-error"),yield function tf(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function _i(y){return Nc.apply(this,arguments)}(h.auth);V(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ns{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=mi._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function Fc(){return(Fc=(0,f.Z)(function*(y,h,g){const _=En(y),S=yield ud(_,h,(0,O.m9)(g));return new ns(S,R=>bn(_,R))})).apply(this,arguments)}function Lc(){return(Lc=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y);yield Qs(!1,_,"phone");const S=yield ud(_.auth,h,(0,O.m9)(g));return new ns(S,R=>Nn(_,R))})).apply(this,arguments)}function nf(){return(nf=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y),S=yield ud(_.auth,h,(0,O.m9)(g));return new ns(S,R=>Js(_,R))})).apply(this,arguments)}function ud(y,h,g){return cd.apply(this,arguments)}function cd(){return(cd=(0,f.Z)(function*(y,h,g){var _;const S=yield g.verify();try{let R;if(V("string"==typeof S,y,"argument-error"),V(g.type===od,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const H=R.session;if("phoneNumber"in R)return V("enroll"===H.type,y,"internal-error"),(yield Zh(y,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===H.type,y,"internal-error");const le=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return V(le,y,"missing-multi-factor-info"),(yield Rc(y,{mfaPendingCredential:H.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield Vl(y,{phoneNumber:R.phoneNumber,recaptchaToken:S});return H}}finally{g._reset()}})).apply(this,arguments)}function rf(){return(rf=(0,f.Z)(function*(y,h){yield Wa((0,O.m9)(y),h)})).apply(this,arguments)}let Uc=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=En(g)}verifyPhoneNumber(g,_){return ud(this.auth,g,(0,O.m9)(_))}static credential(g,_){return mi._fromVerification(g,_)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:S}=g;return _&&S?mi._fromTokenResponse(_,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function fn(y,h){return h?ne(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class gu extends Mn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Rn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Rn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Rn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Ca(y){return Ya(y.auth,new gu(y),y.bypassAuthState)}function ld(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),Za(g,new gu(y),y.bypassAuthState)}function $r(y){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),Wa(g,new gu(y),y.bypassAuthState)})).apply(this,arguments)}class mu{constructor(h,g,_,S,R=!1){this.auth=h,this.resolver=_,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(_,S){h.pendingPromise={resolve:_,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,S){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:R,tenantId:H,error:le,type:Be}=h;if(le)return void g.reject(le);const We={auth:g.auth,requestUri:_,sessionId:S,tenantId:H||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Be)(We))}catch(mt){g.reject(mt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Ca;case"linkViaPopup":case"linkViaRedirect":return $r;case"reauthViaPopup":case"reauthViaRedirect":return ld;default:Ae(this.auth,"internal-error")}}resolve(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ba=new Pt(2e3,1e4);function yu(){return(yu=(0,f.Z)(function*(y,h,g){const _=En(y);Ve(y,h,Ji);const S=fn(_,g);return new Ui(_,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function dd(){return(dd=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Ji);const S=fn(_.auth,g);return new Ui(_.auth,"reauthViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}function Vt(){return(Vt=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Ji);const S=fn(_.auth,g);return new Ui(_.auth,"linkViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}let Ui=(()=>{class y extends mu{constructor(g,_,S,R,H){super(g,_,R,H),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const _=yield g.execute();return V(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,f.Z)(function*(){z(1===g.filter.length,"Popup operations only handle one event");const _=Es();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,ba.get())};g()}}return y.currentPopupAction=null,y})();const si=new Map;class oi extends mu{constructor(h,g,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let _=si.get(g.auth._key());if(!_){try{const R=(yield function sf(y,h){return ai.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;_=()=>Promise.resolve(R)}catch(S){_=()=>Promise.reject(S)}si.set(g.auth._key(),_)}return g.bypassAuthState||si.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,_=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(_,h);if("unknown"!==h.type){if(h.eventId){const S=yield _.auth._redirectUserForId(h.eventId);if(S)return _.user=S,g().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ai(){return(ai=(0,f.Z)(function*(y,h){const g=Fo(h),_=Ta(y);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(g));return yield _._remove(g),S})).apply(this,arguments)}function Ei(y,h){return rs.apply(this,arguments)}function rs(){return(rs=(0,f.Z)(function*(y,h){return Ta(y)._set(Fo(h),"true")})).apply(this,arguments)}function hd(y,h){si.set(y._key(),h)}function Ta(y){return ne(y._redirectPersistence)}function Fo(y){return q("pendingRedirect",y.config.apiKey,y.name)}function I(){return(I=(0,f.Z)(function*(y,h,g){const _=En(y);Ve(y,h,Ji);const S=fn(_,g);return yield Ei(S,_),S._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Ji);const S=fn(_.auth,g);yield Ei(S,_.auth);const R=yield It(_);return S._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function be(){return(be=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Ji);const S=fn(_.auth,g);yield Qs(!1,_,h.providerId),yield Ei(S,_.auth);const R=yield It(_);return S._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function nt(){return(nt=(0,f.Z)(function*(y,h){return yield En(y)._initializationPromise,Xe(y,h,!1)})).apply(this,arguments)}function Xe(y,h){return Et.apply(this,arguments)}function Et(){return(Et=(0,f.Z)(function*(y,h,g=!1){const _=En(y),S=fn(_,h),H=yield new oi(_,S,g).execute();return H&&!g&&(delete H.user._redirectEventId,yield _._persistUserIfCurrent(H.user),yield _._setRedirectUser(null,h)),H})).apply(this,arguments)}function It(y){return pr.apply(this,arguments)}function pr(){return(pr=(0,f.Z)(function*(y){const h=Es(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Lo{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(g=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function gr(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ts(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var _;if(h.error&&!Ts(h)){const S=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,S))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const _=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jc(h))}saveEventToCache(h){this.cachedEventUids.add(jc(h)),this.lastProcessedEventTime=Date.now()}}function jc(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Ts({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function mr(y){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,f.Z)(function*(y,h={}){return gn(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,af=/^https?/;function Qn(){return(Qn=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield mr(y);for(const g of h)try{if(vu(g))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function vu(y){const h=Ne(),{protocol:g,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const H=new URL(y);return""===H.hostname&&""===_?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&H.hostname===_}if(!af.test(g))return!1;if(Rr.test(y))return _===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const cf=new Pt(3e4,6e4);function Bi(){const y=mn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let no=null;function ly(y){return no=no||function Hr(y){return new Promise((h,g)=>{var _,S,R;function H(){Bi(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Bi(),g(ve(y,"network-request-failed"))},timeout:cf.get()})}if(null!==(S=null===(_=mn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(R=mn().gapi)||void 0===R||!R.load){const le=Oc("iframefcb");return mn()[le]=()=>{gapi.load?H():g(ve(y,"network-request-failed"))},wi(`https://apis.google.com/js/api.js?onload=${le}`).catch(Be=>g(Be))}H()}}).catch(h=>{throw no=null,h})}(y),no}const D0=new Pt(5e3,15e3),Gr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C0(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?ct(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:re.SDK_VERSION},S=Sa.get(y.config.apiHost);S&&(_.eid=S);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${g}?${(0,O.xO)(_).slice(1)}`}function $c(){return $c=(0,f.Z)(function*(y){const h=yield ly(y),g=mn().gapi;return V(g,y,"internal-error"),h.open({where:document.body,url:C0(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gr,dontclear:!0},_=>new Promise(function(){var S=(0,f.Z)(function*(R,H){yield _.restyle({setHideOnLeave:!1});const le=ve(y,"network-request-failed"),Be=mn().setTimeout(()=>{H(le)},D0.get());function We(){mn().clearTimeout(Be),R(_)}_.ping(We).then(We,()=>{H(le)})});return function(R,H){return S.apply(this,arguments)}}()))}),$c.apply(this,arguments)}const lf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zr{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ui(y,h,g,_,S,R){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const H={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:_,v:re.SDK_VERSION,eventId:S};if(h instanceof Ji){h.setDefaultLanguage(y.languageCode),H.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(H.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Be,We]of Object.entries(R||{}))H[Be]=We}if(h instanceof Ks){const Be=h.getScopes().filter(We=>""!==We);Be.length>0&&(H.scopes=Be.join(","))}y.tenantId&&(H.tid=y.tenantId);const le=H;for(const Be of Object.keys(le))void 0===le[Be]&&delete le[Be];return`${function og({config:y}){return y.emulator?ct(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(le).slice(1)}`}const gd="webStorageSupport",ug=class ag{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fi,this._completeRedirectFn=Xe,this._overrideRedirectResult=hd}_openPopup(h,g,_,S){var R=this;return(0,f.Z)(function*(){var H;z(null===(H=R.eventManagers[h._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const le=ui(h,g,_,Ne(),S);return function dy(y,h,g,_=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),H=Math.max((window.screen.availWidth-_)/2,0).toString();let le="";const Be=Object.assign(Object.assign({},lf),{width:_.toString(),height:S.toString(),top:R,left:H}),We=(0,O.z$)().toLowerCase();g&&(le=Gt(We)?"_blank":g),Je(We)&&(h=h||"http://localhost",Be.scrollbars="yes");const mt=Object.entries(Be).reduce((Gn,[Ii,xu])=>`${Gn}${Ii}=${xu},`,"");if(function dr(y=(0,O.z$)()){var h;return $n(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(We)&&"_self"!==le)return function wu(y,h){const g=document.createElement("a");g.href=y,g.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(h||"",le),new zr(null);const ot=window.open(h||"",le,mt);V(ot,y,"popup-blocked");try{ot.focus()}catch{}return new zr(ot)}(h,le,Es())})()}_openRedirect(h,g,_,S){var R=this;return(0,f.Z)(function*(){return yield R._originValidation(h),function xo(y){mn().location.href=y}(ui(h,g,_,Ne(),S)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:S,promise:R}=this.eventManagers[g];return S?Promise.resolve(S):(z(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const _=yield function fd(y){return $c.apply(this,arguments)}(h),S=new Lo(h);return _.register("authEvent",R=>(V(R?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:S},g.iframes[h._key()]=_,S})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(gd,{type:gd},S=>{var R;const H=null===(R=S?.[0])||void 0===R?void 0:R[gd];void 0!==H&&g(!!H),Ae(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function uf(y){return Qn.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return $h()||Rt()||$n()}};class yr{constructor(h){this.factorId=h}_process(h,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,_);case"signin":return this._finalizeSignIn(h,g.credential);default:return ye("unexpected MultiFactorSessionType")}}}class As extends yr{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new As(h)}_finalizeEnroll(h,g,_){return function ng(y,h){return gn(y,"POST","/v2/accounts/mfaEnrollment:finalize",dt(y,h))}(h,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Qh(y,h){return gn(y,"POST","/v2/accounts/mfaSignIn:finalize",dt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let vr=(()=>{class y{constructor(){}static assertion(g){return As._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var md="@firebase/auth";class vd{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function St(){return window}function ro(){return(ro=(0,f.Z)(function*(y,h,g){var _;const{BuildInfo:S}=St();z(h.sessionId,"AuthEvent did not contain a session ID");const R=yield dg(h.sessionId),H={};return $n()?H.ibi=S.packageName:ft()?H.apn=S.packageName:Ae(y,"operation-not-supported-in-this-environment"),S.displayName&&(H.appDisplayName=S.displayName),H.sessionId=R,ui(y,g,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,H)})).apply(this,arguments)}function io(){return(io=(0,f.Z)(function*(y){const{BuildInfo:h}=St(),g={};$n()?g.iosBundleId=h.packageName:ft()?g.androidPackageName=h.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield mr(y,g)})).apply(this,arguments)}function Ms(){return(Ms=(0,f.Z)(function*(y,h,g){const{cordova:_}=St();let S=()=>{};try{yield new Promise((R,H)=>{let le=null;function Be(){var ot;R();const Gn=null===(ot=_.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Gn&&Gn(),"function"==typeof g?.close&&g.close()}function We(){le||(le=window.setTimeout(()=>{H(ve(y,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===document?.visibilityState&&We()}h.addPassiveListener(Be),document.addEventListener("resume",We,!1),ft()&&document.addEventListener("visibilitychange",mt,!1),S=()=>{h.removePassiveListener(Be),document.removeEventListener("resume",We,!1),document.removeEventListener("visibilitychange",mt,!1),le&&window.clearTimeout(le)}})}finally{S()}})).apply(this,arguments)}function dg(y){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,f.Z)(function*(y){const h=pf(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function pf(y){if(z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let _=0;_<y.length;_++)g[_]=y.charCodeAt(_);return g}(0,O.Pz)("authIdTokenMaxAge"),function Eu(y){(0,re._registerComponent)(new fe.wA("auth",(h,{options:g})=>{const _=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:R,authDomain:H}=_.options;return((le,Be)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:le.name}),V(!H?.includes(":"),"argument-error",{appName:le.name});const We={apiKey:R,authDomain:H,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ha(y)},mt=new Fl(le,Be,We);return function Fe(y,h){const g=h?.persistence||[],_=(Array.isArray(g)?g:[g]).map(ne);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(mt,g),mt})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,_)=>{h.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new fe.wA("auth-internal",h=>{const g=En(h.getProvider("auth").getImmediate());return new vd(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(md,"0.21.0",function Nr(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,re.registerVersion)(md,"0.21.0","esm2017")}("Browser");class so extends Lo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function hg(y){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,f.Z)(function*(y){const h=yield mf()._get(yf(y));return h&&(yield mf()._remove(yf(y))),h})).apply(this,arguments)}function Ed(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function mf(){return ne(Tc)}function yf(y){return q("authEvent",y.config.apiKey,y.name)}function Kc(y){if(!y?.includes("?"))return{};const[h,...g]=y.split("?");return(0,O.zd)(g.join("?"))}const vf=class Yc{constructor(){this._redirectPersistence=Fi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xe,this._overrideRedirectResult=hd}_initialize(h){var g=this;return(0,f.Z)(function*(){const _=h._key();let S=g.eventManagers.get(_);return S||(S=new so(h),g.eventManagers.set(_,S),g.attachCallbackListeners(h,S)),S})()}_openPopup(h){Ae(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,_,S){var R=this;return(0,f.Z)(function*(){!function qc(y){var h,g,_,S,R,H,le,Be,We,mt;const ot=St();V("function"==typeof(null===(h=ot?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(g=ot?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(S=null===(_=ot?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Be=null===(le=null===(H=ot?.cordova)||void 0===H?void 0:H.plugins)||void 0===le?void 0:le.browsertab)||void 0===Be?void 0:Be.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(mt=null===(We=ot?.cordova)||void 0===We?void 0:We.InAppBrowser)||void 0===mt?void 0:mt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const H=yield R._initialize(h);yield H.initialized(),H.resetRedirect(),function rg(){si.clear()}(),yield R._originValidation(h);const le=function wd(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:Ed(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,_,S);yield function gf(y,h){return mf()._set(yf(y),h)}(h,le);const Be=yield function lg(y,h,g){return ro.apply(this,arguments)}(h,le,g),We=yield function zc(y){const{cordova:h}=St();return new Promise(g=>{h.plugins.browsertab.isAvailable(_=>{let S=null;_?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function yo(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Be);return function py(y,h,g){return Ms.apply(this,arguments)}(h,H,We)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function fy(y){return io.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:_,handleOpenURL:S,BuildInfo:R}=St(),H=setTimeout((0,f.Z)(function*(){yield hg(h),g.onEvent(Uo())}),500),le=function(){var mt=(0,f.Z)(function*(ot){clearTimeout(H);const Gn=yield hg(h);let Ii=null;Gn&&ot?.url&&(Ii=function gy(y,h){var g,_;const S=function yy(y){const h=Kc(y),g=h.link?decodeURIComponent(h.link):void 0,_=Kc(g).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Kc(S).link||S||_||g||y}(h);if(S.includes("/__/auth/callback")){const R=Kc(S),H=R.firebaseError?function my(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,le=null===(_=null===(g=H?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],Be=le?ve(le):null;return Be?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Gn,ot.url)),g.onEvent(Ii||Uo())});return function(Gn){return mt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,le);const Be=S,We=`${R.packageName.toLowerCase()}://`;St().handleOpenURL=function(){var mt=(0,f.Z)(function*(ot){if(ot.toLowerCase().startsWith(We)&&le({url:ot}),"function"==typeof Be)try{Be(ot)}catch(Gn){console.error(Gn)}});return function(ot){return mt.apply(this,arguments)}}()}};function Uo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Du(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function bu(y=(0,O.z$)()){return!("file:"!==Du()&&"ionic:"!==Du()&&"capacitor:"!==Du()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Bo(){try{const y=self.localStorage,h=Es();if(y)return y.setItem(h,"1"),y.removeItem(h),!function wf(y=(0,O.z$)()){return function Jc(){return(0,O.w1)()&&11===document?.documentMode}()||function pg(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Id()&&(0,O.hl)()}return!1}function Id(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xc(){return(function Cu(){return"http:"===Du()||"https:"===Du()}()||(0,O.ru)()||bu())&&!function Qc(){return(0,O.b$)()||(0,O.UG)()}()&&Bo()&&!Id()}function Dd(){return bu()&&typeof document<"u"}function jo(){return(jo=(0,f.Z)(function*(){return!!Dd()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const qr={LOCAL:"local",NONE:"none",SESSION:"session"},oo=V,bd="persistence";function Td(y){return ji.apply(this,arguments)}function ji(){return(ji=(0,f.Z)(function*(y){yield y._initializationPromise;const h=$o(),g=q(bd,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function $o(){var y;try{return(null===(y=function Tu(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Sd=V;class xs{constructor(){this.browserResolver=ne(ug),this.cordovaResolver=ne(vf),this.underlyingResolver=null,this._redirectPersistence=Fi,this._completeRedirectFn=Xe,this._overrideRedirectResult=hd}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,_,S){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,g,_,S)})()}_openRedirect(h,g,_,S){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,g,_,S)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Dd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Cd(){return jo.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function If(y){return y.unwrap()}function Df(y){return gg(y)}function gg(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Uc.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let _;switch(g){case"google.com":_=zh;break;case"facebook.com":_=Bl;break;case"github.com":_=hc;break;case"twitter.com":_=$l;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:H,pendingToken:le,nonce:Be}=h;return R||H||S||le?le?g.startsWith("saml.")?za._create(g,le):Xr._fromParams({providerId:g,signInMethod:g,pendingToken:le,idToken:S,accessToken:R}):new ca(g).credential({idToken:S,accessToken:R,rawNonce:Be}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function ci(y,h){return h.catch(g=>{throw g instanceof O.ZR&&function Ma(y,h){var g;const _=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new bf(y,function nr(y,h){var g;const _=(0,O.m9)(y),S=h;return V(h.customData.operationType,_,"argument-error"),V(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),Cc._fromError(_,S)}(y,h));else if(_){const S=gg(h),R=h;S&&(R.credential=S,R.tenantId=_.tenantId||void 0,R.email=_.email||void 0,R.phoneNumber=_.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Df(g),additionalUserInfo:Kh(g),user:ao.getOrCreate(S)}})}function mg(y,h){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:_=>ci(y,g.confirm(_))}})).apply(this,arguments)}class bf{constructor(h,g){this.resolver=g,this.auth=function Ad(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ci(If(this.auth),this.resolver.resolveSignIn(h))}}class ao{constructor(h){this._delegate=h,this.multiFactor=function su(y){const h=(0,O.m9)(y);return ni.has(h)||ni.set(h,ws._fromUser(h)),ni.get(h)}(h)}static getOrCreate(h){return ao.USER_MAP.has(h)||ao.USER_MAP.set(h,new ao(h)),ao.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return ci(g.auth,Nn(g._delegate,h))})()}linkWithPhoneNumber(h,g){var _=this;return(0,f.Z)(function*(){return mg(_.auth,function ad(y,h,g){return Lc.apply(this,arguments)}(_._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return ci(g.auth,function I0(y,h,g){return Vt.apply(this,arguments)}(g._delegate,h,xs))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Td(En(g.auth)),function K(y,h,g){return function Y(y,h,g){return be.apply(this,arguments)}(y,h,g)}(g._delegate,h,xs)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return ci(g.auth,Js(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return mg(this.auth,function cy(y,h,g){return nf.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return ci(this.auth,function E0(y,h,g){return dd.apply(this,arguments)}(this._delegate,h,xs))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Td(En(g.auth)),function b(y,h,g){return function M(y,h,g){return F.apply(this,arguments)}(y,h,g)}(g._delegate,h,xs)})()}sendEmailVerification(h){return function vc(y,h){return Yl.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function la(y,h){return Ys.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Xp(y,h){return Ec((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function wc(y,h){return Ec((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Vc(y,h){return rf.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Xi(y,h){return ti.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function So(y,h,g){return In.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ao.USER_MAP=new WeakMap;const Au=V;let Mu=(()=>{class y{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Au(S,"invalid-api-key",{appName:g.name}),Au(S,"invalid-api-key",{appName:g.name});const R=typeof window<"u"?xs:void 0;this._delegate=_.initialize({options:{persistence:_y(S,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap($e),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ao.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function cc(y,h,g){const _=En(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const S=!!g?.disableWarnings,R=sa(h),{host:H,port:le}=function oa(y){const h=sa(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const R=S[1];return{host:R,port:Kt(_.substr(R.length+1))}}{const[R,H]=_.split(":");return{host:R,port:Kt(H)}}}(h);_.config.emulator={url:`${R}//${H}${null===le?"":`:${le}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:H,port:le,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Hn(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,_)}applyActionCode(g){return function Ja(y,h){return gc.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Xa(this._delegate,g)}confirmPasswordReset(g,_){return function ma(y,h,g){return Ct.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var S=this;return(0,f.Z)(function*(){return ci(S._delegate,function On(y,h,g){return Kl.apply(this,arguments)}(S._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function nu(y,h){return To.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Zl(y,h){return"EMAIL_SIGNIN"===ua.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){Au(Xc(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function Ye(y,h){return nt.apply(this,arguments)}(g._delegate,xs);return _?ci(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function _f(y,h){En(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,_,S){const{next:R,error:H,complete:le}=Md(g,_,S);return this._delegate.onAuthStateChanged(R,H,le)}onIdTokenChanged(g,_,S){const{next:R,error:H,complete:le}=Md(g,_,S);return this._delegate.onIdTokenChanged(R,H,le)}sendSignInLinkToEmail(g,_){return function Zt(y,h,g){return yc.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function Pi(y,h,g){return ga.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,f.Z)(function*(){let S;switch(function Su(y,h){oo(Object.values(qr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?oo(h!==qr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?oo(h===qr.NONE,y,"unsupported-persistence-type"):Id()?oo(h===qr.NONE||h===qr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):oo(h===qr.NONE||Bo(),y,"unsupported-persistence-type")}(_._delegate,g),g){case qr.SESSION:S=Fi;break;case qr.LOCAL:S=(yield ne(ts)._isAvailable())?ts:Tc;break;case qr.NONE:S=L;break;default:return Ae("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ci(this._delegate,function pc(y){return qh.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ci(this._delegate,bn(this._delegate,g))}signInWithCustomToken(g){return ci(this._delegate,function _s(y,h){return Yn.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return ci(this._delegate,function Ce(y,h,g){return bn((0,O.m9)(y),dc.credential(h,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return ci(this._delegate,function tr(y,h,g){return bo.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return mg(this._delegate,function sn(y,h,g){return Fc.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,f.Z)(function*(){return Au(Xc(),_._delegate,"operation-not-supported-in-this-environment"),ci(_._delegate,function ko(y,h,g){return yu.apply(this,arguments)}(_._delegate,g,xs))})()}signInWithRedirect(g){var _=this;return(0,f.Z)(function*(){return Au(Xc(),_._delegate,"operation-not-supported-in-this-environment"),yield Td(_._delegate),function Bc(y,h,g){return function bs(y,h,g){return I.apply(this,arguments)}(y,h,g)}(_._delegate,g,xs)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Wl(y,h){return eu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=qr,y})();function Md(y,h,g){let _=y;"function"!=typeof y&&({next:_,error:h,complete:g}=y);const S=_;return{next:H=>S(H&&ao.getOrCreate(H)),error:h,complete:g}}function _y(y,h){const g=function Ef(y,h){const g=$o();if(!g)return[];const _=q(bd,y,h);switch(g.getItem(_)){case qr.NONE:return[L];case qr.LOCAL:return[ts,Fi];case qr.SESSION:return[Fi];default:return[]}}(y,h);if(typeof self<"u"&&!g.includes(ts)&&g.push(ts),typeof window<"u")for(const _ of[Tc,Fi])g.includes(_)||g.push(_);return g.includes(L)||g.push(L),g}class xd{constructor(){this.providerId="phone",this._delegate=new Uc(If(Q.Z.auth()))}static credential(h,g){return Uc.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}xd.PHONE_SIGN_IN_METHOD=Uc.PHONE_SIGN_IN_METHOD,xd.PROVIDER_ID=Uc.PROVIDER_ID;const wy=V;class yg{constructor(h,g,_=Q.Z.app()){var S;wy(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new pu(h,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tf(y){y.INTERNAL.registerComponent(new fe.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Mu(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:dc,FacebookAuthProvider:Bl,GithubAuthProvider:hc,GoogleAuthProvider:zh,OAuthProvider:ca,SAMLAuthProvider:yi,PhoneAuthProvider:xd,PhoneMultiFactorGenerator:vr,RecaptchaVerifier:yg,TwitterAuthProvider:$l,Auth:Mu,AuthCredential:Mn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.0")}(Q.Z)},8766:(it,we,P)=>{P.d(we,{Lj:()=>Ae,X3:()=>Oe});var f=P(5861);let O,re;const fe=new WeakMap,ce=new WeakMap,ue=new WeakMap,U=new WeakMap,B=new WeakMap;let Ie={get(V,ye,z){if(V instanceof IDBTransaction){if("done"===ye)return ce.get(V);if("objectStoreNames"===ye)return V.objectStoreNames||ue.get(V);if("store"===ye)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return De(V[ye])},set:(V,ye,z)=>(V[ye]=z,!0),has:(V,ye)=>V instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in V};function de(V){return"function"==typeof V?function tt(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function se(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ye){return V.apply(Ee(this),ye),De(fe.get(this))}:function(...ye){return De(V.apply(Ee(this),ye))}:function(ye,...z){const Z=V.call(Ee(this),ye,...z);return ue.set(Z,ye.sort?ye.sort():[ye]),De(Z)}}(V):(V instanceof IDBTransaction&&function ke(V){if(ce.has(V))return;const ye=new Promise((z,Z)=>{const ne=()=>{V.removeEventListener("complete",ee),V.removeEventListener("error",Fe),V.removeEventListener("abort",Fe)},ee=()=>{z(),ne()},Fe=()=>{Z(V.error||new DOMException("AbortError","AbortError")),ne()};V.addEventListener("complete",ee),V.addEventListener("error",Fe),V.addEventListener("abort",Fe)});ce.set(V,ye)}(V),((V,ye)=>ye.some(z=>V instanceof z))(V,function ie(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Ie):V)}function De(V){if(V instanceof IDBRequest)return function W(V){const ye=new Promise((z,Z)=>{const ne=()=>{V.removeEventListener("success",ee),V.removeEventListener("error",Fe)},ee=()=>{z(De(V.result)),ne()},Fe=()=>{Z(V.error),ne()};V.addEventListener("success",ee),V.addEventListener("error",Fe)});return ye.then(z=>{z instanceof IDBCursor&&fe.set(z,V)}).catch(()=>{}),B.set(ye,V),ye}(V);if(U.has(V))return U.get(V);const ye=de(V);return ye!==V&&(U.set(V,ye),B.set(ye,V)),ye}const Ee=V=>B.get(V);function Oe(V,ye,{blocked:z,upgrade:Z,blocking:ne,terminated:ee}={}){const Fe=indexedDB.open(V,ye),Ne=De(Fe);return Z&&Fe.addEventListener("upgradeneeded",st=>{Z(De(Fe.result),st.oldVersion,st.newVersion,De(Fe.transaction))}),z&&Fe.addEventListener("blocked",()=>z()),Ne.then(st=>{ee&&st.addEventListener("close",()=>ee()),ne&&st.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Ne}function Ae(V,{blocked:ye}={}){const z=indexedDB.deleteDatabase(V);return ye&&z.addEventListener("blocked",()=>ye()),De(z).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],Ve=new Map;function Re(V,ye){if(!(V instanceof IDBDatabase)||ye in V||"string"!=typeof ye)return;if(Ve.get(ye))return Ve.get(ye);const z=ye.replace(/FromIndex$/,""),Z=ye!==z,ne=Se.includes(z);if(!(z in(Z?IDBIndex:IDBObjectStore).prototype)||!ne&&!ve.includes(z))return;const ee=function(){var Fe=(0,f.Z)(function*(Ne,...st){const Xt=this.transaction(Ne,ne?"readwrite":"readonly");let on=Xt.store;return Z&&(on=on.index(st.shift())),(yield Promise.all([on[z](...st),ne&&Xt.done]))[0]});return function(st){return Fe.apply(this,arguments)}}();return Ve.set(ye,ee),ee}!function $e(V){Ie=V(Ie)}(V=>({...V,get:(ye,z,Z)=>Re(ye,z)||V.get(ye,z,Z),has:(ye,z)=>!!Re(ye,z)||V.has(ye,z)}))},5861:(it,we,P)=>{function f(O,re,ie,se,fe,ce,ue){try{var U=O[ce](ue),B=U.value}catch(W){return void ie(W)}U.done?re(B):Promise.resolve(B).then(se,fe)}function Q(O){return function(){var re=this,ie=arguments;return new Promise(function(se,fe){var ce=O.apply(re,ie);function ue(B){f(ce,se,fe,ue,U,"next",B)}function U(B){f(ce,se,fe,ue,U,"throw",B)}ue(void 0)})}}P.d(we,{Z:()=>Q})}},it=>{it(it.s=7487)}]);